import{E as mo,a3 as nt,a4 as $E,a5 as gp,a6 as yp,a7 as Sc,a8 as wo,a9 as kE,G as _o,D as vp,aa as bn,ab as ME,ac as HE,ad as Z,ae as KE,af as Cc,ag as FE,ah as VE,ai as GE,aj as mp,ak as WE,al as BE,am as YE,an as wp,ao as QE,ap as ZE,aq as XE,ar as Bi,as as _p,at as JE,au as t3,av as bp,aw as jr,ax as e3,ay as Ep,az as pi,aA as Re,aB as Be,aC as En,aD as hr,aE as r3,aF as fi,aG as Dp,aH as n3,aI as i3,aJ as s3,aK as Ip,aL as o3,aM as Pp,aN as Sp,aO as di,aP as Oc,aQ as bo,aR as gi,aS as a3,aT as Eo,aU as c3,aV as u3,aW as h3,aX as l3,aY as Do,aZ as p3,a_ as f3,a$ as xc,b0 as Cp,b1 as d3,b2 as g3,b3 as y3,b4 as Op,b5 as v3,b6 as m3,b7 as w3,b8 as _3,b9 as b3,ba as E3,bb as D3,bc as Yi,bd as xp,be as Ac,bf as I3,bg as P3,_ as S3,__tla as C3}from"./index-631ad936.js";import{a as Qi,s as Io,e as Kr,i as Ap,c as O3,b as x3,f as Nc,d as A3,J as on,g as Tc,h as Rc,j as Po,E as jc,k as Dn,l as an,m as Zi,n as N3,p as T3,H as In,__tla as R3}from"./http-6da956ea.js";let Np,Lc,zc,Xi,Ji,So,j3=Promise.all([(()=>{try{return C3}catch{}})(),(()=>{try{return R3}catch{}})()]).then(async()=>{(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new Error().stack;n&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[n]="2c9ad143-7aa0-41c3-971e-e3e3ea0a54ad",o._sentryDebugIdIdentifier="sentry-dbid-2c9ad143-7aa0-41c3-971e-e3e3ea0a54ad")}catch{}})();const Rp=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,jp=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Lp=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function zp(o,n){if(o==="__proto__"||o==="constructor"&&n&&typeof n=="object"&&"prototype"in n){qp(o);return}return n}function qp(o){console.warn(`[destr] Dropping "${o}" key to prevent prototype pollution.`)}function ts(o,n={}){if(typeof o!="string")return o;const r=o.trim();if(o[0]==='"'&&o.at(-1)==='"'&&!o.includes("\\"))return r.slice(1,-1);if(r.length<=9){const i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!Lp.test(o)){if(n.strict)throw new SyntaxError("[destr] Invalid JSON");return o}try{if(Rp.test(o)||jp.test(o)){if(n.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(o,zp)}return JSON.parse(o)}catch(i){if(n.strict)throw i;return o}}function Up(o){return!o||typeof o.then!="function"?Promise.resolve(o):o}function qe(o,...n){try{return Up(o(...n))}catch(r){return Promise.reject(r)}}function $p(o){const n=typeof o;return o===null||n!=="object"&&n!=="function"}function kp(o){const n=Object.getPrototypeOf(o);return!n||n.isPrototypeOf(Object)}function es(o){if($p(o))return String(o);if(kp(o)||Array.isArray(o))return JSON.stringify(o);if(typeof o.toJSON=="function")return es(o.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function qc(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Co="base64:";function Mp(o){if(typeof o=="string")return o;qc();const n=Buffer.from(o).toString("base64");return Co+n}function Hp(o){return typeof o!="string"||!o.startsWith(Co)?o:(qc(),Buffer.from(o.slice(Co.length),"base64"))}function rr(o){return o?o.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Kp(...o){return rr(o.join(":"))}function rs(o){return o=rr(o),o?o+":":""}const Fp="memory",Vp=()=>{const o=new Map;return{name:Fp,options:{},hasItem(n){return o.has(n)},getItem(n){return o.get(n)??null},getItemRaw(n){return o.get(n)??null},setItem(n,r){o.set(n,r)},setItemRaw(n,r){o.set(n,r)},removeItem(n){o.delete(n)},getKeys(){return Array.from(o.keys())},clear(){o.clear()},dispose(){o.clear()}}};function Gp(o={}){const n={mounts:{"":o.driver||Vp()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=d=>{for(const _ of n.mountpoints)if(d.startsWith(_))return{base:_,relativeKey:d.slice(_.length),driver:n.mounts[_]};return{base:"",relativeKey:d,driver:n.mounts[""]}},i=(d,_)=>n.mountpoints.filter(C=>C.startsWith(d)||_&&d.startsWith(C)).map(C=>({relativeBase:d.length>C.length?d.slice(C.length):void 0,mountpoint:C,driver:n.mounts[C]})),a=(d,_)=>{if(n.watching){_=rr(_);for(const C of n.watchListeners)C(d,_)}},u=async()=>{if(!n.watching){n.watching=!0;for(const d in n.mounts)n.unwatch[d]=await Uc(n.mounts[d],a,d)}},p=async()=>{if(n.watching){for(const d in n.unwatch)await n.unwatch[d]();n.unwatch={},n.watching=!1}},y=(d,_,C)=>{const S=new Map,z=T=>{let F=S.get(T.base);return F||(F={driver:T.driver,base:T.base,items:[]},S.set(T.base,F)),F};for(const T of d){const F=typeof T=="string",et=rr(F?T:T.key),gt=F?void 0:T.value,ht=F||!T.options?_:{..._,...T.options},ct=r(et);z(ct).items.push({key:et,value:gt,relativeKey:ct.relativeKey,options:ht})}return Promise.all([...S.values()].map(T=>C(T))).then(T=>T.flat())},w={hasItem(d,_={}){d=rr(d);const{relativeKey:C,driver:S}=r(d);return qe(S.hasItem,C,_)},getItem(d,_={}){d=rr(d);const{relativeKey:C,driver:S}=r(d);return qe(S.getItem,C,_).then(z=>ts(z))},getItems(d,_){return y(d,_,C=>C.driver.getItems?qe(C.driver.getItems,C.items.map(S=>({key:S.relativeKey,options:S.options})),_).then(S=>S.map(z=>({key:Kp(C.base,z.key),value:ts(z.value)}))):Promise.all(C.items.map(S=>qe(C.driver.getItem,S.relativeKey,S.options).then(z=>({key:S.key,value:ts(z)})))))},getItemRaw(d,_={}){d=rr(d);const{relativeKey:C,driver:S}=r(d);return S.getItemRaw?qe(S.getItemRaw,C,_):qe(S.getItem,C,_).then(z=>Hp(z))},async setItem(d,_,C={}){if(_===void 0)return w.removeItem(d);d=rr(d);const{relativeKey:S,driver:z}=r(d);z.setItem&&(await qe(z.setItem,S,es(_),C),z.watch||a("update",d))},async setItems(d,_){await y(d,_,async C=>{C.driver.setItems&&await qe(C.driver.setItems,C.items.map(S=>({key:S.relativeKey,value:es(S.value),options:S.options})),_),C.driver.setItem&&await Promise.all(C.items.map(S=>qe(C.driver.setItem,S.relativeKey,es(S.value),S.options)))})},async setItemRaw(d,_,C={}){if(_===void 0)return w.removeItem(d,C);d=rr(d);const{relativeKey:S,driver:z}=r(d);if(z.setItemRaw)await qe(z.setItemRaw,S,_,C);else if(z.setItem)await qe(z.setItem,S,Mp(_),C);else return;z.watch||a("update",d)},async removeItem(d,_={}){typeof _=="boolean"&&(_={removeMeta:_}),d=rr(d);const{relativeKey:C,driver:S}=r(d);S.removeItem&&(await qe(S.removeItem,C,_),(_.removeMeta||_.removeMata)&&await qe(S.removeItem,C+"$",_),S.watch||a("remove",d))},async getMeta(d,_={}){typeof _=="boolean"&&(_={nativeOnly:_}),d=rr(d);const{relativeKey:C,driver:S}=r(d),z=Object.create(null);if(S.getMeta&&Object.assign(z,await qe(S.getMeta,C,_)),!_.nativeOnly){const T=await qe(S.getItem,C+"$",_).then(F=>ts(F));T&&typeof T=="object"&&(typeof T.atime=="string"&&(T.atime=new Date(T.atime)),typeof T.mtime=="string"&&(T.mtime=new Date(T.mtime)),Object.assign(z,T))}return z},setMeta(d,_,C={}){return this.setItem(d+"$",_,C)},removeMeta(d,_={}){return this.removeItem(d+"$",_)},async getKeys(d,_={}){d=rs(d);const C=i(d,!0);let S=[];const z=[];for(const T of C){const F=(await qe(T.driver.getKeys,T.relativeBase,_)).map(et=>T.mountpoint+rr(et)).filter(et=>!S.some(gt=>et.startsWith(gt)));z.push(...F),S=[T.mountpoint,...S.filter(et=>!et.startsWith(T.mountpoint))]}return d?z.filter(T=>T.startsWith(d)&&!T.endsWith("$")):z.filter(T=>!T.endsWith("$"))},async clear(d,_={}){d=rs(d),await Promise.all(i(d,!1).map(async C=>{if(C.driver.clear)return qe(C.driver.clear,C.relativeBase,_);if(C.driver.removeItem){const S=await C.driver.getKeys(C.relativeBase||"",_);return Promise.all(S.map(z=>C.driver.removeItem(z,_)))}}))},async dispose(){await Promise.all(Object.values(n.mounts).map(d=>$c(d)))},async watch(d){return await u(),n.watchListeners.push(d),async()=>{n.watchListeners=n.watchListeners.filter(_=>_!==d),n.watchListeners.length===0&&await p()}},async unwatch(){n.watchListeners=[],await p()},mount(d,_){if(d=rs(d),d&&n.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(n.mountpoints.push(d),n.mountpoints.sort((C,S)=>S.length-C.length)),n.mounts[d]=_,n.watching&&Promise.resolve(Uc(_,a,d)).then(C=>{n.unwatch[d]=C}).catch(console.error),w},async unmount(d,_=!0){d=rs(d),!(!d||!n.mounts[d])&&(n.watching&&d in n.unwatch&&(n.unwatch[d](),delete n.unwatch[d]),_&&await $c(n.mounts[d]),n.mountpoints=n.mountpoints.filter(C=>C!==d),delete n.mounts[d])},getMount(d=""){d=rr(d)+":";const _=r(d);return{driver:_.driver,base:_.base}},getMounts(d="",_={}){return d=rr(d),i(d,_.parents).map(C=>({driver:C.driver,base:C.mountpoint}))}};return w}function Uc(o,n,r){return o.watch?o.watch((i,a)=>n(i,r+a)):()=>{}}async function $c(o){typeof o.dispose=="function"&&await qe(o.dispose)}function Pn(o){return new Promise((n,r)=>{o.oncomplete=o.onsuccess=()=>n(o.result),o.onabort=o.onerror=()=>r(o.error)})}function kc(o,n){const r=indexedDB.open(o);r.onupgradeneeded=()=>r.result.createObjectStore(n);const i=Pn(r);return(a,u)=>i.then(p=>u(p.transaction(n,a).objectStore(n)))}let Oo;function yi(){return Oo||(Oo=kc("keyval-store","keyval")),Oo}function Mc(o,n=yi()){return n("readonly",r=>Pn(r.get(o)))}function Wp(o,n,r=yi()){return r("readwrite",i=>(i.put(n,o),Pn(i.transaction)))}function Bp(o,n=yi()){return n("readwrite",r=>(r.delete(o),Pn(r.transaction)))}function Yp(o=yi()){return o("readwrite",n=>(n.clear(),Pn(n.transaction)))}function Qp(o,n){return o.openCursor().onsuccess=function(){this.result&&(n(this.result),this.result.continue())},Pn(o.transaction)}function Zp(o=yi()){return o("readonly",n=>{if(n.getAllKeys)return Pn(n.getAllKeys());const r=[];return Qp(n,i=>r.push(i.key)).then(()=>r)})}const Xp="idb-keyval";var Jp=(o={})=>{const n=o.base&&o.base.length>0?`${o.base}:`:"",r=a=>n+a;let i;return o.dbName&&o.storeName&&(i=kc(o.dbName,o.storeName)),{name:Xp,options:o,async hasItem(a){return!(typeof await Mc(r(a),i)>"u")},async getItem(a){return await Mc(r(a),i)??null},setItem(a,u){return Wp(r(a),u,i)},removeItem(a){return Bp(r(a),i)},getKeys(){return Zp(i)},clear(){return Yp(i)}}};const tf="WALLET_CONNECT_V2_INDEXED_DB",ef="keyvaluestorage";let rf=class{constructor(){this.indexedDb=Gp({driver:Jp({dbName:tf,storeName:ef})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(o=>[o.key,o.value])}async getItem(o){const n=await this.indexedDb.getItem(o);if(n!==null)return n}async setItem(o,n){await this.indexedDb.setItem(o,Qi(n))}async removeItem(o){await this.indexedDb.removeItem(o)}};var xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ns={exports:{}};(function(){let o;function n(){}o=n,o.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},o.prototype.setItem=function(r,i){this[r]=String(i)},o.prototype.removeItem=function(r){delete this[r]},o.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},o.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},o.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof xo<"u"&&xo.localStorage?ns.exports=xo.localStorage:typeof window<"u"&&window.localStorage?ns.exports=window.localStorage:ns.exports=new n})();function nf(o){var n;return[o[0],Io((n=o[1])!=null?n:"")]}class sf{constructor(){this.localStorage=ns.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(nf)}async getItem(n){const r=this.localStorage.getItem(n);if(r!==null)return Io(r)}async setItem(n,r){this.localStorage.setItem(n,Qi(r))}async removeItem(n){this.localStorage.removeItem(n)}}const of="wc_storage_version",Hc=1,af=async(o,n,r)=>{const i=of,a=await n.getItem(i);if(a&&a>=Hc){r(n);return}const u=await o.getKeys();if(!u.length){r(n);return}const p=[];for(;u.length;){const y=u.shift();if(!y)continue;const w=y.toLowerCase();if(w.includes("wc@")||w.includes("walletconnect")||w.includes("wc_")||w.includes("wallet_connect")){const d=await o.getItem(y);await n.setItem(y,d),p.push(y)}}await n.setItem(i,Hc),r(n),cf(o,p)},cf=async(o,n)=>{n.length&&n.forEach(async r=>{await o.removeItem(r)})};let uf=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const o=new sf;this.storage=o;try{const n=new rf;af(o,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(o){return await this.initialize(),this.storage.getItem(o)}async setItem(o,n){return await this.initialize(),this.storage.setItem(o,n)}async removeItem(o){return await this.initialize(),this.storage.removeItem(o)}async initialize(){this.initialized||await new Promise(o=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),o())},20)})}};var Kn={},Ao=function(o,n){return Ao=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},Ao(o,n)};function hf(o,n){Ao(o,n);function r(){this.constructor=o}o.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var No=function(){return No=Object.assign||function(o){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(o[a]=n[a])}return o},No.apply(this,arguments)};function lf(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(o);a<i.length;a++)n.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(o,i[a])&&(r[i[a]]=o[i[a]]);return r}function pf(o,n,r,i){var a=arguments.length,u=a<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,r):i,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,n,r,i);else for(var y=o.length-1;y>=0;y--)(p=o[y])&&(u=(a<3?p(u):a>3?p(n,r,u):p(n,r))||u);return a>3&&u&&Object.defineProperty(n,r,u),u}function ff(o,n){return function(r,i){n(r,i,o)}}function df(o,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,n)}function gf(o,n,r,i){function a(u){return u instanceof r?u:new r(function(p){p(u)})}return new(r||(r=Promise))(function(u,p){function y(_){try{d(i.next(_))}catch(C){p(C)}}function w(_){try{d(i.throw(_))}catch(C){p(C)}}function d(_){_.done?u(_.value):a(_.value).then(y,w)}d((i=i.apply(o,n||[])).next())})}function yf(o,n){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,p;return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(d){return function(_){return w([d,_])}}function w(d){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(u=d[0]&2?a.return:d[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,d[1])).done)return u;switch(a=0,u&&(d=[d[0]&2,u.value]),d[0]){case 0:case 1:u=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!u||d[1]>u[0]&&d[1]<u[3])){r.label=d[1];break}if(d[0]===6&&r.label<u[1]){r.label=u[1],u=d;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(d);break}u[2]&&r.ops.pop(),r.trys.pop();continue}d=n.call(o,r)}catch(_){d=[6,_],a=0}finally{i=u=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function vf(o,n,r,i){i===void 0&&(i=r),o[i]=n[r]}function mf(o,n){for(var r in o)r!=="default"&&!n.hasOwnProperty(r)&&(n[r]=o[r])}function To(o){var n=typeof Symbol=="function"&&Symbol.iterator,r=n&&o[n],i=0;if(r)return r.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kc(o,n){var r=typeof Symbol=="function"&&o[Symbol.iterator];if(!r)return o;var i=r.call(o),a,u=[],p;try{for(;(n===void 0||n-- >0)&&!(a=i.next()).done;)u.push(a.value)}catch(y){p={error:y}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(p)throw p.error}}return u}function wf(){for(var o=[],n=0;n<arguments.length;n++)o=o.concat(Kc(arguments[n]));return o}function _f(){for(var o=0,n=0,r=arguments.length;n<r;n++)o+=arguments[n].length;for(var i=Array(o),a=0,n=0;n<r;n++)for(var u=arguments[n],p=0,y=u.length;p<y;p++,a++)i[a]=u[p];return i}function vi(o){return this instanceof vi?(this.v=o,this):new vi(o)}function bf(o,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(o,n||[]),a,u=[];return a={},p("next"),p("throw"),p("return"),a[Symbol.asyncIterator]=function(){return this},a;function p(S){i[S]&&(a[S]=function(z){return new Promise(function(T,F){u.push([S,z,T,F])>1||y(S,z)})})}function y(S,z){try{w(i[S](z))}catch(T){C(u[0][3],T)}}function w(S){S.value instanceof vi?Promise.resolve(S.value.v).then(d,_):C(u[0][2],S)}function d(S){y("next",S)}function _(S){y("throw",S)}function C(S,z){S(z),u.shift(),u.length&&y(u[0][0],u[0][1])}}function Ef(o){var n,r;return n={},i("next"),i("throw",function(a){throw a}),i("return"),n[Symbol.iterator]=function(){return this},n;function i(a,u){n[a]=o[a]?function(p){return(r=!r)?{value:vi(o[a](p)),done:a==="return"}:u?u(p):p}:u}}function Df(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o[Symbol.asyncIterator],r;return n?n.call(o):(o=typeof To=="function"?To(o):o[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(u){r[u]=o[u]&&function(p){return new Promise(function(y,w){p=o[u](p),a(y,w,p.done,p.value)})}}function a(u,p,y,w){Promise.resolve(w).then(function(d){u({value:d,done:y})},p)}}function If(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o}function Pf(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var r in o)Object.hasOwnProperty.call(o,r)&&(n[r]=o[r]);return n.default=o,n}function Sf(o){return o&&o.__esModule?o:{default:o}}function Cf(o,n){if(!n.has(o))throw new TypeError("attempted to get private field on non-instance");return n.get(o)}function Of(o,n,r){if(!n.has(o))throw new TypeError("attempted to set private field on non-instance");return n.set(o,r),r}const xf=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return No},__asyncDelegator:Ef,__asyncGenerator:bf,__asyncValues:Df,__await:vi,__awaiter:gf,__classPrivateFieldGet:Cf,__classPrivateFieldSet:Of,__createBinding:vf,__decorate:pf,__exportStar:mf,__extends:hf,__generator:yf,__importDefault:Sf,__importStar:Pf,__makeTemplateObject:If,__metadata:df,__param:ff,__read:Kc,__rest:lf,__spread:wf,__spreadArrays:_f,__values:To},Symbol.toStringTag,{value:"Module"})),is=mo(xf);var mi={},Fc={},wi={};class Sn{}const Af=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Sn},Symbol.toStringTag,{value:"Module"})),Nf=mo(Af);var Vc;function Tf(){if(Vc)return wi;Vc=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.IHeartBeat=void 0;const o=Nf;class n extends o.IEvents{constructor(i){super()}}return wi.IHeartBeat=n,wi}var Gc;function Wc(){return Gc||(Gc=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),is.__exportStar(Tf(),o)}(Fc)),Fc}var Bc={},Cn={},Yc;function Rf(){if(Yc)return Cn;Yc=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.HEARTBEAT_EVENTS=Cn.HEARTBEAT_INTERVAL=void 0;const o=nt;return Cn.HEARTBEAT_INTERVAL=o.FIVE_SECONDS,Cn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Cn}var Qc;function Zc(){return Qc||(Qc=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),is.__exportStar(Rf(),o)}(Bc)),Bc}var Xc;function jf(){if(Xc)return mi;Xc=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.HeartBeat=void 0;const o=is,n=Kr,r=nt,i=Wc(),a=Zc();class u extends i.IHeartBeat{constructor(y){super(y),this.events=new n.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(y==null?void 0:y.interval)||a.HEARTBEAT_INTERVAL}static init(y){return o.__awaiter(this,void 0,void 0,function*(){const w=new u(y);return yield w.init(),w})}init(){return o.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(y,w){this.events.on(y,w)}once(y,w){this.events.once(y,w)}off(y,w){this.events.off(y,w)}removeListener(y,w){this.events.removeListener(y,w)}initialize(){return o.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}return mi.HeartBeat=u,mi}(function(o){Object.defineProperty(o,"__esModule",{value:!0});const n=is;n.__exportStar(jf(),o),n.__exportStar(Wc(),o),n.__exportStar(Zc(),o)})(Kn);var It={},Ro=function(o,n){return Ro=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},Ro(o,n)};function Lf(o,n){Ro(o,n);function r(){this.constructor=o}o.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var jo=function(){return jo=Object.assign||function(o){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(o[a]=n[a])}return o},jo.apply(this,arguments)};function zf(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(o);a<i.length;a++)n.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(o,i[a])&&(r[i[a]]=o[i[a]]);return r}function qf(o,n,r,i){var a=arguments.length,u=a<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,r):i,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,n,r,i);else for(var y=o.length-1;y>=0;y--)(p=o[y])&&(u=(a<3?p(u):a>3?p(n,r,u):p(n,r))||u);return a>3&&u&&Object.defineProperty(n,r,u),u}function Uf(o,n){return function(r,i){n(r,i,o)}}function $f(o,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,n)}function kf(o,n,r,i){function a(u){return u instanceof r?u:new r(function(p){p(u)})}return new(r||(r=Promise))(function(u,p){function y(_){try{d(i.next(_))}catch(C){p(C)}}function w(_){try{d(i.throw(_))}catch(C){p(C)}}function d(_){_.done?u(_.value):a(_.value).then(y,w)}d((i=i.apply(o,n||[])).next())})}function Mf(o,n){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,p;return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(d){return function(_){return w([d,_])}}function w(d){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(u=d[0]&2?a.return:d[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,d[1])).done)return u;switch(a=0,u&&(d=[d[0]&2,u.value]),d[0]){case 0:case 1:u=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!u||d[1]>u[0]&&d[1]<u[3])){r.label=d[1];break}if(d[0]===6&&r.label<u[1]){r.label=u[1],u=d;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(d);break}u[2]&&r.ops.pop(),r.trys.pop();continue}d=n.call(o,r)}catch(_){d=[6,_],a=0}finally{i=u=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Hf(o,n,r,i){i===void 0&&(i=r),o[i]=n[r]}function Kf(o,n){for(var r in o)r!=="default"&&!n.hasOwnProperty(r)&&(n[r]=o[r])}function Lo(o){var n=typeof Symbol=="function"&&Symbol.iterator,r=n&&o[n],i=0;if(r)return r.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jc(o,n){var r=typeof Symbol=="function"&&o[Symbol.iterator];if(!r)return o;var i=r.call(o),a,u=[],p;try{for(;(n===void 0||n-- >0)&&!(a=i.next()).done;)u.push(a.value)}catch(y){p={error:y}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(p)throw p.error}}return u}function Ff(){for(var o=[],n=0;n<arguments.length;n++)o=o.concat(Jc(arguments[n]));return o}function Vf(){for(var o=0,n=0,r=arguments.length;n<r;n++)o+=arguments[n].length;for(var i=Array(o),a=0,n=0;n<r;n++)for(var u=arguments[n],p=0,y=u.length;p<y;p++,a++)i[a]=u[p];return i}function _i(o){return this instanceof _i?(this.v=o,this):new _i(o)}function Gf(o,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(o,n||[]),a,u=[];return a={},p("next"),p("throw"),p("return"),a[Symbol.asyncIterator]=function(){return this},a;function p(S){i[S]&&(a[S]=function(z){return new Promise(function(T,F){u.push([S,z,T,F])>1||y(S,z)})})}function y(S,z){try{w(i[S](z))}catch(T){C(u[0][3],T)}}function w(S){S.value instanceof _i?Promise.resolve(S.value.v).then(d,_):C(u[0][2],S)}function d(S){y("next",S)}function _(S){y("throw",S)}function C(S,z){S(z),u.shift(),u.length&&y(u[0][0],u[0][1])}}function Wf(o){var n,r;return n={},i("next"),i("throw",function(a){throw a}),i("return"),n[Symbol.iterator]=function(){return this},n;function i(a,u){n[a]=o[a]?function(p){return(r=!r)?{value:_i(o[a](p)),done:a==="return"}:u?u(p):p}:u}}function Bf(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o[Symbol.asyncIterator],r;return n?n.call(o):(o=typeof Lo=="function"?Lo(o):o[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(u){r[u]=o[u]&&function(p){return new Promise(function(y,w){p=o[u](p),a(y,w,p.done,p.value)})}}function a(u,p,y,w){Promise.resolve(w).then(function(d){u({value:d,done:y})},p)}}function Yf(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o}function Qf(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var r in o)Object.hasOwnProperty.call(o,r)&&(n[r]=o[r]);return n.default=o,n}function Zf(o){return o&&o.__esModule?o:{default:o}}function Xf(o,n){if(!n.has(o))throw new TypeError("attempted to get private field on non-instance");return n.get(o)}function Jf(o,n,r){if(!n.has(o))throw new TypeError("attempted to set private field on non-instance");return n.set(o,r),r}const td=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return jo},__asyncDelegator:Wf,__asyncGenerator:Gf,__asyncValues:Bf,__await:_i,__awaiter:kf,__classPrivateFieldGet:Xf,__classPrivateFieldSet:Jf,__createBinding:Hf,__decorate:qf,__exportStar:Kf,__extends:Lf,__generator:Mf,__importDefault:Zf,__importStar:Qf,__makeTemplateObject:Yf,__metadata:$f,__param:Uf,__read:Jc,__rest:zf,__spread:Ff,__spreadArrays:Vf,__values:Lo},Symbol.toStringTag,{value:"Module"})),ed=mo(td);var zo,tu;function rd(){if(tu)return zo;tu=1;function o(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}zo=n;function n(r,i,a){var u=a&&a.stringify||o,p=1;if(typeof r=="object"&&r!==null){var y=i.length+p;if(y===1)return r;var w=new Array(y);w[0]=u(r);for(var d=1;d<y;d++)w[d]=u(i[d]);return w.join(" ")}if(typeof r!="string")return r;var _=i.length;if(_===0)return r;for(var C="",S=1-p,z=-1,T=r&&r.length||0,F=0;F<T;){if(r.charCodeAt(F)===37&&F+1<T){switch(z=z>-1?z:0,r.charCodeAt(F+1)){case 100:case 102:if(S>=_||i[S]==null)break;z<F&&(C+=r.slice(z,F)),C+=Number(i[S]),z=F+2,F++;break;case 105:if(S>=_||i[S]==null)break;z<F&&(C+=r.slice(z,F)),C+=Math.floor(Number(i[S])),z=F+2,F++;break;case 79:case 111:case 106:if(S>=_||i[S]===void 0)break;z<F&&(C+=r.slice(z,F));var et=typeof i[S];if(et==="string"){C+="'"+i[S]+"'",z=F+2,F++;break}if(et==="function"){C+=i[S].name||"<anonymous>",z=F+2,F++;break}C+=u(i[S]),z=F+2,F++;break;case 115:if(S>=_)break;z<F&&(C+=r.slice(z,F)),C+=String(i[S]),z=F+2,F++;break;case 37:z<F&&(C+=r.slice(z,F)),C+="%",z=F+2,F++,S--;break}++S}++F}return z===-1?r:(z<T&&(C+=r.slice(z)),C)}return zo}var qo,eu;function nd(){if(eu)return qo;eu=1;const o=rd();qo=a;const n=pt().console||{},r={mapHttpRequest:T,mapHttpResponse:T,wrapRequestSerializer:F,wrapResponseSerializer:F,wrapErrorSerializer:F,req:T,res:T,err:S};function i(j,H){return Array.isArray(j)?j.filter(function(B){return B!=="!stdSerializers.err"}):j===!0?Object.keys(H):!1}function a(j){j=j||{},j.browser=j.browser||{};const H=j.browser.transmit;if(H&&typeof H.send!="function")throw Error("pino: transmit option must have a send function");const B=j.browser.write||n;j.browser.write&&(j.browser.asObject=!0);const _t=j.serializers||{},rt=i(j.browser.serialize,_t);let yt=j.browser.serialize;Array.isArray(j.browser.serialize)&&j.browser.serialize.indexOf("!stdSerializers.err")>-1&&(yt=!1);const $t=["error","fatal","warn","info","debug","trace"];typeof B=="function"&&(B.error=B.fatal=B.warn=B.info=B.debug=B.trace=B),j.enabled===!1&&(j.level="silent");const Bt=j.level||"info",A=Object.create(B);A.log||(A.log=et),Object.defineProperty(A,"levelVal",{get:Lt}),Object.defineProperty(A,"level",{get:zt,set:Y});const $={transmit:H,serialize:rt,asObject:j.browser.asObject,levels:$t,timestamp:z(j)};A.levels=a.levels,A.level=Bt,A.setMaxListeners=A.getMaxListeners=A.emit=A.addListener=A.on=A.prependListener=A.once=A.prependOnceListener=A.removeListener=A.removeAllListeners=A.listeners=A.listenerCount=A.eventNames=A.write=A.flush=et,A.serializers=_t,A._serialize=rt,A._stdErrSerialize=yt,A.child=V,H&&(A._logEvent=C());function Lt(){return this.level==="silent"?1/0:this.levels.values[this.level]}function zt(){return this._level}function Y(K){if(K!=="silent"&&!this.levels.values[K])throw Error("unknown level "+K);this._level=K,u($,A,"error","log"),u($,A,"fatal","error"),u($,A,"warn","error"),u($,A,"info","log"),u($,A,"debug","log"),u($,A,"trace","log")}function V(K,G){if(!K)throw new Error("missing bindings for child Pino");G=G||{},rt&&K.serializers&&(G.serializers=K.serializers);const ue=G.serializers;if(rt&&ue){var Ht=Object.assign({},_t,ue),zr=j.browser.serialize===!0?Object.keys(Ht):rt;delete K.serializers,w([K],zr,Ht,this._stdErrSerialize)}function bt(De){this._childLevel=(De._childLevel|0)+1,this.error=d(De,K,"error"),this.fatal=d(De,K,"fatal"),this.warn=d(De,K,"warn"),this.info=d(De,K,"info"),this.debug=d(De,K,"debug"),this.trace=d(De,K,"trace"),Ht&&(this.serializers=Ht,this._serialize=zr),H&&(this._logEvent=C([].concat(De._logEvent.bindings,K)))}return bt.prototype=this,new bt(this)}return A}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=r,a.stdTimeFunctions=Object.assign({},{nullTime:gt,epochTime:ht,unixTime:ct,isoTime:lt});function u(j,H,B,_t){const rt=Object.getPrototypeOf(H);H[B]=H.levelVal>H.levels.values[B]?et:rt[B]?rt[B]:n[B]||n[_t]||et,p(j,H,B)}function p(j,H,B){!j.transmit&&H[B]===et||(H[B]=function(_t){return function(){const rt=j.timestamp(),yt=new Array(arguments.length),$t=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var Bt=0;Bt<yt.length;Bt++)yt[Bt]=arguments[Bt];if(j.serialize&&!j.asObject&&w(yt,this._serialize,this.serializers,this._stdErrSerialize),j.asObject?_t.call($t,y(this,B,yt,rt)):_t.apply($t,yt),j.transmit){const A=j.transmit.level||H.level,$=a.levels.values[A],Lt=a.levels.values[B];if(Lt<$)return;_(this,{ts:rt,methodLevel:B,methodValue:Lt,transmitLevel:A,transmitValue:a.levels.values[j.transmit.level||H.level],send:j.transmit.send,val:H.levelVal},yt)}}}(H[B]))}function y(j,H,B,_t){j._serialize&&w(B,j._serialize,j.serializers,j._stdErrSerialize);const rt=B.slice();let yt=rt[0];const $t={};_t&&($t.time=_t),$t.level=a.levels.values[H];let Bt=(j._childLevel|0)+1;if(Bt<1&&(Bt=1),yt!==null&&typeof yt=="object"){for(;Bt--&&typeof rt[0]=="object";)Object.assign($t,rt.shift());yt=rt.length?o(rt.shift(),rt):void 0}else typeof yt=="string"&&(yt=o(rt.shift(),rt));return yt!==void 0&&($t.msg=yt),$t}function w(j,H,B,_t){for(const rt in j)if(_t&&j[rt]instanceof Error)j[rt]=a.stdSerializers.err(j[rt]);else if(typeof j[rt]=="object"&&!Array.isArray(j[rt]))for(const yt in j[rt])H&&H.indexOf(yt)>-1&&yt in B&&(j[rt][yt]=B[yt](j[rt][yt]))}function d(j,H,B){return function(){const _t=new Array(1+arguments.length);_t[0]=H;for(var rt=1;rt<_t.length;rt++)_t[rt]=arguments[rt-1];return j[B].apply(this,_t)}}function _(j,H,B){const _t=H.send,rt=H.ts,yt=H.methodLevel,$t=H.methodValue,Bt=H.val,A=j._logEvent.bindings;w(B,j._serialize||Object.keys(j.serializers),j.serializers,j._stdErrSerialize===void 0?!0:j._stdErrSerialize),j._logEvent.ts=rt,j._logEvent.messages=B.filter(function($){return A.indexOf($)===-1}),j._logEvent.level.label=yt,j._logEvent.level.value=$t,_t(yt,j._logEvent,Bt),j._logEvent=C(A)}function C(j){return{ts:0,messages:[],bindings:j||[],level:{label:"",value:0}}}function S(j){const H={type:j.constructor.name,msg:j.message,stack:j.stack};for(const B in j)H[B]===void 0&&(H[B]=j[B]);return H}function z(j){return typeof j.timestamp=="function"?j.timestamp:j.timestamp===!1?gt:ht}function T(){return{}}function F(j){return j}function et(){}function gt(){return!1}function ht(){return Date.now()}function ct(){return Math.round(Date.now()/1e3)}function lt(){return new Date(Date.now()).toISOString()}function pt(){function j(H){return typeof H<"u"&&H}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return j(self)||j(window)||j(this)||{}}}return qo}var Fn={},ru;function nu(){return ru||(ru=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.PINO_CUSTOM_CONTEXT_KEY=Fn.PINO_LOGGER_DEFAULTS=void 0,Fn.PINO_LOGGER_DEFAULTS={level:"info"},Fn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Fn}var Ye={},iu;function id(){if(iu)return Ye;iu=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.generateChildLogger=Ye.formatChildLoggerContext=Ye.getLoggerContext=Ye.setBrowserLoggerContext=Ye.getBrowserLoggerContext=Ye.getDefaultLoggerOptions=void 0;const o=nu();function n(y){return Object.assign(Object.assign({},y),{level:(y==null?void 0:y.level)||o.PINO_LOGGER_DEFAULTS.level})}Ye.getDefaultLoggerOptions=n;function r(y,w=o.PINO_CUSTOM_CONTEXT_KEY){return y[w]||""}Ye.getBrowserLoggerContext=r;function i(y,w,d=o.PINO_CUSTOM_CONTEXT_KEY){return y[d]=w,y}Ye.setBrowserLoggerContext=i;function a(y,w=o.PINO_CUSTOM_CONTEXT_KEY){let d="";return typeof y.bindings>"u"?d=r(y,w):d=y.bindings().context||"",d}Ye.getLoggerContext=a;function u(y,w,d=o.PINO_CUSTOM_CONTEXT_KEY){const _=a(y,d);return _.trim()?`${_}/${w}`:w}Ye.formatChildLoggerContext=u;function p(y,w,d=o.PINO_CUSTOM_CONTEXT_KEY){const _=u(y,w,d),C=y.child({context:_});return i(C,_,d)}return Ye.generateChildLogger=p,Ye}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.pino=void 0;const n=ed,r=n.__importDefault(nd());Object.defineProperty(o,"pino",{enumerable:!0,get:function(){return r.default}}),n.__exportStar(nu(),o),n.__exportStar(id(),o)})(It);class sd extends Sn{constructor(n){super(),this.opts=n,this.protocol="wc",this.version=2}}let od=class extends Sn{constructor(o,n){super(),this.core=o,this.logger=n,this.records=new Map}},ad=class{constructor(o,n){this.logger=o,this.core=n}},cd=class extends Sn{constructor(o,n){super(),this.relayer=o,this.logger=n}},ud=class extends Sn{constructor(o){super()}},hd=class{constructor(o,n,r,i){this.core=o,this.logger=n,this.name=r}};class ld extends Sn{constructor(n,r){super(),this.relayer=n,this.logger=r}}let pd=class extends Sn{constructor(o,n){super(),this.core=o,this.logger=n}},fd=class{constructor(o,n){this.projectId=o,this.logger=n}},dd=class{constructor(o,n){this.projectId=o,this.logger=n}},gd=class{constructor(o){this.opts=o,this.protocol="wc",this.version=2}},yd=class{constructor(o){this.client=o}};var Uo={},su={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var n=$E,r=gp;o.DIGEST_LENGTH=64,o.BLOCK_SIZE=128;var i=function(){function y(){this.digestLength=o.DIGEST_LENGTH,this.blockSize=o.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return y.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},y.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},y.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},y.prototype.update=function(w,d){if(d===void 0&&(d=w.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var _=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<o.BLOCK_SIZE&&d>0;)this._buffer[this._bufferLength++]=w[_++],d--;this._bufferLength===this.blockSize&&(u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(_=u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,w,_,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=w[_++],d--;return this},y.prototype.finish=function(w){if(!this._finished){var d=this._bytesHashed,_=this._bufferLength,C=d/536870912|0,S=d<<3,z=d%128<112?128:256;this._buffer[_]=128;for(var T=_+1;T<z-8;T++)this._buffer[T]=0;n.writeUint32BE(C,this._buffer,z-8),n.writeUint32BE(S,this._buffer,z-4),u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,z),this._finished=!0}for(var T=0;T<this.digestLength/8;T++)n.writeUint32BE(this._stateHi[T],w,T*8),n.writeUint32BE(this._stateLo[T],w,T*8+4);return this},y.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},y.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},y.prototype.restoreState=function(w){return this._stateHi.set(w.stateHi),this._stateLo.set(w.stateLo),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},y.prototype.cleanSavedState=function(w){r.wipe(w.stateHi),r.wipe(w.stateLo),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},y}();o.SHA512=i;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function u(y,w,d,_,C,S,z){for(var T=d[0],F=d[1],et=d[2],gt=d[3],ht=d[4],ct=d[5],lt=d[6],pt=d[7],j=_[0],H=_[1],B=_[2],_t=_[3],rt=_[4],yt=_[5],$t=_[6],Bt=_[7],A,$,Lt,zt,Y,V,K,G;z>=128;){for(var ue=0;ue<16;ue++){var Ht=8*ue+S;y[ue]=n.readUint32BE(C,Ht),w[ue]=n.readUint32BE(C,Ht+4)}for(var ue=0;ue<80;ue++){var zr=T,bt=F,De=et,R=gt,N=ht,O=ct,h=lt,E=pt,J=j,at=H,mt=B,xt=_t,Nt=rt,Pt=yt,Ie=$t,me=Bt;if(A=pt,$=Bt,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=(ht>>>14|rt<<32-14)^(ht>>>18|rt<<32-18)^(rt>>>41-32|ht<<32-(41-32)),$=(rt>>>14|ht<<32-14)^(rt>>>18|ht<<32-18)^(ht>>>41-32|rt<<32-(41-32)),Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,A=ht&ct^~ht&lt,$=rt&yt^~rt&$t,Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,A=a[ue*2],$=a[ue*2+1],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,A=y[ue%16],$=w[ue%16],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,Lt=K&65535|G<<16,zt=Y&65535|V<<16,A=Lt,$=zt,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=(T>>>28|j<<32-28)^(j>>>34-32|T<<32-(34-32))^(j>>>39-32|T<<32-(39-32)),$=(j>>>28|T<<32-28)^(T>>>34-32|j<<32-(34-32))^(T>>>39-32|j<<32-(39-32)),Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,A=T&F^T&et^F&et,$=j&H^j&B^H&B,Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,E=K&65535|G<<16,me=Y&65535|V<<16,A=R,$=xt,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=Lt,$=zt,Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,R=K&65535|G<<16,xt=Y&65535|V<<16,F=zr,et=bt,gt=De,ht=R,ct=N,lt=O,pt=h,T=E,H=J,B=at,_t=mt,rt=xt,yt=Nt,$t=Pt,Bt=Ie,j=me,ue%16===15)for(var Ht=0;Ht<16;Ht++)A=y[Ht],$=w[Ht],Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=y[(Ht+9)%16],$=w[(Ht+9)%16],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,Lt=y[(Ht+1)%16],zt=w[(Ht+1)%16],A=(Lt>>>1|zt<<32-1)^(Lt>>>8|zt<<32-8)^Lt>>>7,$=(zt>>>1|Lt<<32-1)^(zt>>>8|Lt<<32-8)^(zt>>>7|Lt<<32-7),Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,Lt=y[(Ht+14)%16],zt=w[(Ht+14)%16],A=(Lt>>>19|zt<<32-19)^(zt>>>61-32|Lt<<32-(61-32))^Lt>>>6,$=(zt>>>19|Lt<<32-19)^(Lt>>>61-32|zt<<32-(61-32))^(zt>>>6|Lt<<32-6),Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,y[Ht]=K&65535|G<<16,w[Ht]=Y&65535|V<<16}A=T,$=j,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=d[0],$=_[0],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,d[0]=T=K&65535|G<<16,_[0]=j=Y&65535|V<<16,A=F,$=H,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=d[1],$=_[1],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,d[1]=F=K&65535|G<<16,_[1]=H=Y&65535|V<<16,A=et,$=B,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=d[2],$=_[2],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,d[2]=et=K&65535|G<<16,_[2]=B=Y&65535|V<<16,A=gt,$=_t,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=d[3],$=_[3],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,d[3]=gt=K&65535|G<<16,_[3]=_t=Y&65535|V<<16,A=ht,$=rt,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=d[4],$=_[4],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,d[4]=ht=K&65535|G<<16,_[4]=rt=Y&65535|V<<16,A=ct,$=yt,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=d[5],$=_[5],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,d[5]=ct=K&65535|G<<16,_[5]=yt=Y&65535|V<<16,A=lt,$=$t,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=d[6],$=_[6],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,d[6]=lt=K&65535|G<<16,_[6]=$t=Y&65535|V<<16,A=pt,$=Bt,Y=$&65535,V=$>>>16,K=A&65535,G=A>>>16,A=d[7],$=_[7],Y+=$&65535,V+=$>>>16,K+=A&65535,G+=A>>>16,V+=Y>>>16,K+=V>>>16,G+=K>>>16,d[7]=pt=K&65535|G<<16,_[7]=Bt=Y&65535|V<<16,S+=128,z-=128}return S}function p(y){var w=new i;w.update(y);var d=w.digest();return w.clean(),d}o.hash=p})(su),function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.convertSecretKeyToX25519=o.convertPublicKeyToX25519=o.verify=o.sign=o.extractPublicKeyFromSecretKey=o.generateKeyPair=o.generateKeyPairFromSeed=o.SEED_LENGTH=o.SECRET_KEY_LENGTH=o.PUBLIC_KEY_LENGTH=o.SIGNATURE_LENGTH=void 0;const n=yp,r=su,i=gp;o.SIGNATURE_LENGTH=64,o.PUBLIC_KEY_LENGTH=32,o.SECRET_KEY_LENGTH=64,o.SEED_LENGTH=32;function a(R){const N=new Float64Array(16);if(R)for(let O=0;O<R.length;O++)N[O]=R[O];return N}const u=new Uint8Array(32);u[0]=9;const p=a(),y=a([1]),w=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),C=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function z(R,N){for(let O=0;O<16;O++)R[O]=N[O]|0}function T(R){let N=1;for(let O=0;O<16;O++){let h=R[O]+N+65535;N=Math.floor(h/65536),R[O]=h-N*65536}R[0]+=N-1+37*(N-1)}function F(R,N,O){const h=~(O-1);for(let E=0;E<16;E++){const J=h&(R[E]^N[E]);R[E]^=J,N[E]^=J}}function et(R,N){const O=a(),h=a();for(let E=0;E<16;E++)h[E]=N[E];T(h),T(h),T(h);for(let E=0;E<2;E++){O[0]=h[0]-65517;for(let at=1;at<15;at++)O[at]=h[at]-65535-(O[at-1]>>16&1),O[at-1]&=65535;O[15]=h[15]-32767-(O[14]>>16&1);const J=O[15]>>16&1;O[14]&=65535,F(h,O,1-J)}for(let E=0;E<16;E++)R[2*E]=h[E]&255,R[2*E+1]=h[E]>>8}function gt(R,N){let O=0;for(let h=0;h<32;h++)O|=R[h]^N[h];return(1&O-1>>>8)-1}function ht(R,N){const O=new Uint8Array(32),h=new Uint8Array(32);return et(O,R),et(h,N),gt(O,h)}function ct(R){const N=new Uint8Array(32);return et(N,R),N[0]&1}function lt(R,N){for(let O=0;O<16;O++)R[O]=N[2*O]+(N[2*O+1]<<8);R[15]&=32767}function pt(R,N,O){for(let h=0;h<16;h++)R[h]=N[h]+O[h]}function j(R,N,O){for(let h=0;h<16;h++)R[h]=N[h]-O[h]}function H(R,N,O){let h,E,J=0,at=0,mt=0,xt=0,Nt=0,Pt=0,Ie=0,me=0,se=0,Rt=0,Qt=0,Zt=0,oe=0,kt=0,Xt=0,At=0,Kt=0,he=0,qt=0,Pe=0,je=0,He=0,Ke=0,Ue=0,Qe=0,ir=0,qr=0,Ze=0,Wr=0,hn=0,xn=0,le=O[0],re=O[1],pe=O[2],fe=O[3],ae=O[4],ne=O[5],Se=O[6],Ce=O[7],de=O[8],Oe=O[9],ge=O[10],we=O[11],ye=O[12],Yt=O[13],xe=O[14],Ae=O[15];h=N[0],J+=h*le,at+=h*re,mt+=h*pe,xt+=h*fe,Nt+=h*ae,Pt+=h*ne,Ie+=h*Se,me+=h*Ce,se+=h*de,Rt+=h*Oe,Qt+=h*ge,Zt+=h*we,oe+=h*ye,kt+=h*Yt,Xt+=h*xe,At+=h*Ae,h=N[1],at+=h*le,mt+=h*re,xt+=h*pe,Nt+=h*fe,Pt+=h*ae,Ie+=h*ne,me+=h*Se,se+=h*Ce,Rt+=h*de,Qt+=h*Oe,Zt+=h*ge,oe+=h*we,kt+=h*ye,Xt+=h*Yt,At+=h*xe,Kt+=h*Ae,h=N[2],mt+=h*le,xt+=h*re,Nt+=h*pe,Pt+=h*fe,Ie+=h*ae,me+=h*ne,se+=h*Se,Rt+=h*Ce,Qt+=h*de,Zt+=h*Oe,oe+=h*ge,kt+=h*we,Xt+=h*ye,At+=h*Yt,Kt+=h*xe,he+=h*Ae,h=N[3],xt+=h*le,Nt+=h*re,Pt+=h*pe,Ie+=h*fe,me+=h*ae,se+=h*ne,Rt+=h*Se,Qt+=h*Ce,Zt+=h*de,oe+=h*Oe,kt+=h*ge,Xt+=h*we,At+=h*ye,Kt+=h*Yt,he+=h*xe,qt+=h*Ae,h=N[4],Nt+=h*le,Pt+=h*re,Ie+=h*pe,me+=h*fe,se+=h*ae,Rt+=h*ne,Qt+=h*Se,Zt+=h*Ce,oe+=h*de,kt+=h*Oe,Xt+=h*ge,At+=h*we,Kt+=h*ye,he+=h*Yt,qt+=h*xe,Pe+=h*Ae,h=N[5],Pt+=h*le,Ie+=h*re,me+=h*pe,se+=h*fe,Rt+=h*ae,Qt+=h*ne,Zt+=h*Se,oe+=h*Ce,kt+=h*de,Xt+=h*Oe,At+=h*ge,Kt+=h*we,he+=h*ye,qt+=h*Yt,Pe+=h*xe,je+=h*Ae,h=N[6],Ie+=h*le,me+=h*re,se+=h*pe,Rt+=h*fe,Qt+=h*ae,Zt+=h*ne,oe+=h*Se,kt+=h*Ce,Xt+=h*de,At+=h*Oe,Kt+=h*ge,he+=h*we,qt+=h*ye,Pe+=h*Yt,je+=h*xe,He+=h*Ae,h=N[7],me+=h*le,se+=h*re,Rt+=h*pe,Qt+=h*fe,Zt+=h*ae,oe+=h*ne,kt+=h*Se,Xt+=h*Ce,At+=h*de,Kt+=h*Oe,he+=h*ge,qt+=h*we,Pe+=h*ye,je+=h*Yt,He+=h*xe,Ke+=h*Ae,h=N[8],se+=h*le,Rt+=h*re,Qt+=h*pe,Zt+=h*fe,oe+=h*ae,kt+=h*ne,Xt+=h*Se,At+=h*Ce,Kt+=h*de,he+=h*Oe,qt+=h*ge,Pe+=h*we,je+=h*ye,He+=h*Yt,Ke+=h*xe,Ue+=h*Ae,h=N[9],Rt+=h*le,Qt+=h*re,Zt+=h*pe,oe+=h*fe,kt+=h*ae,Xt+=h*ne,At+=h*Se,Kt+=h*Ce,he+=h*de,qt+=h*Oe,Pe+=h*ge,je+=h*we,He+=h*ye,Ke+=h*Yt,Ue+=h*xe,Qe+=h*Ae,h=N[10],Qt+=h*le,Zt+=h*re,oe+=h*pe,kt+=h*fe,Xt+=h*ae,At+=h*ne,Kt+=h*Se,he+=h*Ce,qt+=h*de,Pe+=h*Oe,je+=h*ge,He+=h*we,Ke+=h*ye,Ue+=h*Yt,Qe+=h*xe,ir+=h*Ae,h=N[11],Zt+=h*le,oe+=h*re,kt+=h*pe,Xt+=h*fe,At+=h*ae,Kt+=h*ne,he+=h*Se,qt+=h*Ce,Pe+=h*de,je+=h*Oe,He+=h*ge,Ke+=h*we,Ue+=h*ye,Qe+=h*Yt,ir+=h*xe,qr+=h*Ae,h=N[12],oe+=h*le,kt+=h*re,Xt+=h*pe,At+=h*fe,Kt+=h*ae,he+=h*ne,qt+=h*Se,Pe+=h*Ce,je+=h*de,He+=h*Oe,Ke+=h*ge,Ue+=h*we,Qe+=h*ye,ir+=h*Yt,qr+=h*xe,Ze+=h*Ae,h=N[13],kt+=h*le,Xt+=h*re,At+=h*pe,Kt+=h*fe,he+=h*ae,qt+=h*ne,Pe+=h*Se,je+=h*Ce,He+=h*de,Ke+=h*Oe,Ue+=h*ge,Qe+=h*we,ir+=h*ye,qr+=h*Yt,Ze+=h*xe,Wr+=h*Ae,h=N[14],Xt+=h*le,At+=h*re,Kt+=h*pe,he+=h*fe,qt+=h*ae,Pe+=h*ne,je+=h*Se,He+=h*Ce,Ke+=h*de,Ue+=h*Oe,Qe+=h*ge,ir+=h*we,qr+=h*ye,Ze+=h*Yt,Wr+=h*xe,hn+=h*Ae,h=N[15],At+=h*le,Kt+=h*re,he+=h*pe,qt+=h*fe,Pe+=h*ae,je+=h*ne,He+=h*Se,Ke+=h*Ce,Ue+=h*de,Qe+=h*Oe,ir+=h*ge,qr+=h*we,Ze+=h*ye,Wr+=h*Yt,hn+=h*xe,xn+=h*Ae,J+=38*Kt,at+=38*he,mt+=38*qt,xt+=38*Pe,Nt+=38*je,Pt+=38*He,Ie+=38*Ke,me+=38*Ue,se+=38*Qe,Rt+=38*ir,Qt+=38*qr,Zt+=38*Ze,oe+=38*Wr,kt+=38*hn,Xt+=38*xn,E=1,h=J+E+65535,E=Math.floor(h/65536),J=h-E*65536,h=at+E+65535,E=Math.floor(h/65536),at=h-E*65536,h=mt+E+65535,E=Math.floor(h/65536),mt=h-E*65536,h=xt+E+65535,E=Math.floor(h/65536),xt=h-E*65536,h=Nt+E+65535,E=Math.floor(h/65536),Nt=h-E*65536,h=Pt+E+65535,E=Math.floor(h/65536),Pt=h-E*65536,h=Ie+E+65535,E=Math.floor(h/65536),Ie=h-E*65536,h=me+E+65535,E=Math.floor(h/65536),me=h-E*65536,h=se+E+65535,E=Math.floor(h/65536),se=h-E*65536,h=Rt+E+65535,E=Math.floor(h/65536),Rt=h-E*65536,h=Qt+E+65535,E=Math.floor(h/65536),Qt=h-E*65536,h=Zt+E+65535,E=Math.floor(h/65536),Zt=h-E*65536,h=oe+E+65535,E=Math.floor(h/65536),oe=h-E*65536,h=kt+E+65535,E=Math.floor(h/65536),kt=h-E*65536,h=Xt+E+65535,E=Math.floor(h/65536),Xt=h-E*65536,h=At+E+65535,E=Math.floor(h/65536),At=h-E*65536,J+=E-1+37*(E-1),E=1,h=J+E+65535,E=Math.floor(h/65536),J=h-E*65536,h=at+E+65535,E=Math.floor(h/65536),at=h-E*65536,h=mt+E+65535,E=Math.floor(h/65536),mt=h-E*65536,h=xt+E+65535,E=Math.floor(h/65536),xt=h-E*65536,h=Nt+E+65535,E=Math.floor(h/65536),Nt=h-E*65536,h=Pt+E+65535,E=Math.floor(h/65536),Pt=h-E*65536,h=Ie+E+65535,E=Math.floor(h/65536),Ie=h-E*65536,h=me+E+65535,E=Math.floor(h/65536),me=h-E*65536,h=se+E+65535,E=Math.floor(h/65536),se=h-E*65536,h=Rt+E+65535,E=Math.floor(h/65536),Rt=h-E*65536,h=Qt+E+65535,E=Math.floor(h/65536),Qt=h-E*65536,h=Zt+E+65535,E=Math.floor(h/65536),Zt=h-E*65536,h=oe+E+65535,E=Math.floor(h/65536),oe=h-E*65536,h=kt+E+65535,E=Math.floor(h/65536),kt=h-E*65536,h=Xt+E+65535,E=Math.floor(h/65536),Xt=h-E*65536,h=At+E+65535,E=Math.floor(h/65536),At=h-E*65536,J+=E-1+37*(E-1),R[0]=J,R[1]=at,R[2]=mt,R[3]=xt,R[4]=Nt,R[5]=Pt,R[6]=Ie,R[7]=me,R[8]=se,R[9]=Rt,R[10]=Qt,R[11]=Zt,R[12]=oe,R[13]=kt,R[14]=Xt,R[15]=At}function B(R,N){H(R,N,N)}function _t(R,N){const O=a();let h;for(h=0;h<16;h++)O[h]=N[h];for(h=253;h>=0;h--)B(O,O),h!==2&&h!==4&&H(O,O,N);for(h=0;h<16;h++)R[h]=O[h]}function rt(R,N){const O=a();let h;for(h=0;h<16;h++)O[h]=N[h];for(h=250;h>=0;h--)B(O,O),h!==1&&H(O,O,N);for(h=0;h<16;h++)R[h]=O[h]}function yt(R,N){const O=a(),h=a(),E=a(),J=a(),at=a(),mt=a(),xt=a(),Nt=a(),Pt=a();j(O,R[1],R[0]),j(Pt,N[1],N[0]),H(O,O,Pt),pt(h,R[0],R[1]),pt(Pt,N[0],N[1]),H(h,h,Pt),H(E,R[3],N[3]),H(E,E,d),H(J,R[2],N[2]),pt(J,J,J),j(at,h,O),j(mt,J,E),pt(xt,J,E),pt(Nt,h,O),H(R[0],at,mt),H(R[1],Nt,xt),H(R[2],xt,mt),H(R[3],at,Nt)}function $t(R,N,O){for(let h=0;h<4;h++)F(R[h],N[h],O)}function Bt(R,N){const O=a(),h=a(),E=a();_t(E,N[2]),H(O,N[0],E),H(h,N[1],E),et(R,h),R[31]^=ct(O)<<7}function A(R,N,O){z(R[0],p),z(R[1],y),z(R[2],y),z(R[3],p);for(let h=255;h>=0;--h){const E=O[h/8|0]>>(h&7)&1;$t(R,N,E),yt(N,R),yt(R,R),$t(R,N,E)}}function $(R,N){const O=[a(),a(),a(),a()];z(O[0],_),z(O[1],C),z(O[2],y),H(O[3],_,C),A(R,O,N)}function Lt(R){if(R.length!==o.SEED_LENGTH)throw new Error(`ed25519: seed must be ${o.SEED_LENGTH} bytes`);const N=(0,r.hash)(R);N[0]&=248,N[31]&=127,N[31]|=64;const O=new Uint8Array(32),h=[a(),a(),a(),a()];$(h,N),Bt(O,h);const E=new Uint8Array(64);return E.set(R),E.set(O,32),{publicKey:O,secretKey:E}}o.generateKeyPairFromSeed=Lt;function zt(R){const N=(0,n.randomBytes)(32,R),O=Lt(N);return(0,i.wipe)(N),O}o.generateKeyPair=zt;function Y(R){if(R.length!==o.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${o.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(R.subarray(32))}o.extractPublicKeyFromSecretKey=Y;const V=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function K(R,N){let O,h,E,J;for(h=63;h>=32;--h){for(O=0,E=h-32,J=h-12;E<J;++E)N[E]+=O-16*N[h]*V[E-(h-32)],O=Math.floor((N[E]+128)/256),N[E]-=O*256;N[E]+=O,N[h]=0}for(O=0,E=0;E<32;E++)N[E]+=O-(N[31]>>4)*V[E],O=N[E]>>8,N[E]&=255;for(E=0;E<32;E++)N[E]-=O*V[E];for(h=0;h<32;h++)N[h+1]+=N[h]>>8,R[h]=N[h]&255}function G(R){const N=new Float64Array(64);for(let O=0;O<64;O++)N[O]=R[O];for(let O=0;O<64;O++)R[O]=0;K(R,N)}function ue(R,N){const O=new Float64Array(64),h=[a(),a(),a(),a()],E=(0,r.hash)(R.subarray(0,32));E[0]&=248,E[31]&=127,E[31]|=64;const J=new Uint8Array(64);J.set(E.subarray(32),32);const at=new r.SHA512;at.update(J.subarray(32)),at.update(N);const mt=at.digest();at.clean(),G(mt),$(h,mt),Bt(J,h),at.reset(),at.update(J.subarray(0,32)),at.update(R.subarray(32)),at.update(N);const xt=at.digest();G(xt);for(let Nt=0;Nt<32;Nt++)O[Nt]=mt[Nt];for(let Nt=0;Nt<32;Nt++)for(let Pt=0;Pt<32;Pt++)O[Nt+Pt]+=xt[Nt]*E[Pt];return K(J.subarray(32),O),J}o.sign=ue;function Ht(R,N){const O=a(),h=a(),E=a(),J=a(),at=a(),mt=a(),xt=a();return z(R[2],y),lt(R[1],N),B(E,R[1]),H(J,E,w),j(E,E,R[2]),pt(J,R[2],J),B(at,J),B(mt,at),H(xt,mt,at),H(O,xt,E),H(O,O,J),rt(O,O),H(O,O,E),H(O,O,J),H(O,O,J),H(R[0],O,J),B(h,R[0]),H(h,h,J),ht(h,E)&&H(R[0],R[0],S),B(h,R[0]),H(h,h,J),ht(h,E)?-1:(ct(R[0])===N[31]>>7&&j(R[0],p,R[0]),H(R[3],R[0],R[1]),0)}function zr(R,N,O){const h=new Uint8Array(32),E=[a(),a(),a(),a()],J=[a(),a(),a(),a()];if(O.length!==o.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${o.SIGNATURE_LENGTH} bytes`);if(Ht(J,R))return!1;const at=new r.SHA512;at.update(O.subarray(0,32)),at.update(R),at.update(N);const mt=at.digest();return G(mt),A(E,J,mt),$(J,O.subarray(32)),yt(E,J),Bt(h,E),!gt(O,h)}o.verify=zr;function bt(R){let N=[a(),a(),a(),a()];if(Ht(N,R))throw new Error("Ed25519: invalid public key");let O=a(),h=a(),E=N[1];pt(O,y,E),j(h,y,E),_t(h,h),H(O,O,h);let J=new Uint8Array(32);return et(J,O),J}o.convertPublicKeyToX25519=bt;function De(R){const N=(0,r.hash)(R.subarray(0,32));N[0]&=248,N[31]&=127,N[31]|=64;const O=new Uint8Array(N.subarray(0,32));return(0,i.wipe)(N),O}o.convertSecretKeyToX25519=De}(Uo);const vd="EdDSA",md="JWT",ou=".",au="base64url",wd="utf8",_d="utf8",bd=":",Ed="did",Dd="key",cu="base58btc",Id="z",Pd="K36",Sd=32;function ss(o){return wo(Sc(Qi(o),wd),au)}function uu(o){const n=Sc(Pd,cu),r=Id+wo(kE([n,o]),cu);return[Ed,Dd,r].join(bd)}function Cd(o){return wo(o,au)}function Od(o){return Sc([ss(o.header),ss(o.payload)].join(ou),_d)}function xd(o){return[ss(o.header),ss(o.payload),Cd(o.signature)].join(ou)}function hu(o=yp.randomBytes(Sd)){return Uo.generateKeyPairFromSeed(o)}async function Ad(o,n,r,i,a=nt.fromMiliseconds(Date.now())){const u={alg:vd,typ:md},p=uu(i.publicKey),y=a+r,w={iss:p,sub:o,aud:n,iat:a,exp:y},d=Od({header:u,payload:w}),_=Uo.sign(i.secretKey,d);return xd({header:u,payload:w,signature:_})}const Nd=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Td=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",lu=o=>o.split("?")[0],pu=10,Rd=Nd();let jd=class{constructor(o){if(this.url=o,this.events=new Kr.EventEmitter,this.registering=!1,!Ap(o))throw new Error(`Provided URL is not compatible with WebSocket connection: ${o}`);this.url=o}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(o,n){this.events.on(o,n)}once(o,n){this.events.once(o,n)}off(o,n){this.events.off(o,n)}removeListener(o,n){this.events.removeListener(o,n)}async open(o=this.url){await this.register(o)}async close(){return new Promise((o,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),o()},this.socket.close()})}async send(o){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Qi(o))}catch(n){this.onError(o.id,n)}}register(o=this.url){if(!Ap(o))throw new Error(`Provided URL is not compatible with WebSocket connection: ${o}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),i(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=o,this.registering=!0,new Promise((n,r)=>{const i=new URLSearchParams(o).get("origin"),a=O3.isReactNative()?{headers:{origin:i}}:{rejectUnauthorized:!x3(o)},u=new Rd(o,[],a);Td()?u.onerror=p=>{const y=p;r(this.emitError(y.error))}:u.on("error",p=>{r(this.emitError(p))}),u.onopen=()=>{this.onOpen(u),n(u)}})}onOpen(o){o.onmessage=n=>this.onPayload(n),o.onclose=n=>this.onClose(n),this.socket=o,this.registering=!1,this.events.emit("open")}onClose(o){this.socket=void 0,this.registering=!1,this.events.emit("close",o)}onPayload(o){if(typeof o.data>"u")return;const n=typeof o.data=="string"?Io(o.data):o.data;this.events.emit("payload",n)}onError(o,n){const r=this.parseError(n),i=r.message||r.toString(),a=Nc(o,i);this.events.emit("payload",a)}parseError(o,n=this.url){return A3(o,lu(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>pu&&this.events.setMaxListeners(pu)}emitError(o){const n=this.parseError(new Error((o==null?void 0:o.message)||`WebSocket connection failed for host: ${lu(this.url)}`));return this.events.emit("register_error",n),n}};var os={exports:{}};os.exports,function(o,n){var r=200,i="__lodash_hash_undefined__",a=1,u=2,p=9007199254740991,y="[object Arguments]",w="[object Array]",d="[object AsyncFunction]",_="[object Boolean]",C="[object Date]",S="[object Error]",z="[object Function]",T="[object GeneratorFunction]",F="[object Map]",et="[object Number]",gt="[object Null]",ht="[object Object]",ct="[object Promise]",lt="[object Proxy]",pt="[object RegExp]",j="[object Set]",H="[object String]",B="[object Symbol]",_t="[object Undefined]",rt="[object WeakMap]",yt="[object ArrayBuffer]",$t="[object DataView]",Bt="[object Float32Array]",A="[object Float64Array]",$="[object Int8Array]",Lt="[object Int16Array]",zt="[object Int32Array]",Y="[object Uint8Array]",V="[object Uint8ClampedArray]",K="[object Uint16Array]",G="[object Uint32Array]",ue=/[\\^$.*+?()[\]{}|]/g,Ht=/^\[object .+?Constructor\]$/,zr=/^(?:0|[1-9]\d*)$/,bt={};bt[Bt]=bt[A]=bt[$]=bt[Lt]=bt[zt]=bt[Y]=bt[V]=bt[K]=bt[G]=!0,bt[y]=bt[w]=bt[yt]=bt[_]=bt[$t]=bt[C]=bt[S]=bt[z]=bt[F]=bt[et]=bt[ht]=bt[pt]=bt[j]=bt[H]=bt[rt]=!1;var De=typeof _o=="object"&&_o&&_o.Object===Object&&_o,R=typeof self=="object"&&self&&self.Object===Object&&self,N=De||R||Function("return this")(),O=n&&!n.nodeType&&n,h=O&&!0&&o&&!o.nodeType&&o,E=h&&h.exports===O,J=E&&De.process,at=function(){try{return J&&J.binding&&J.binding("util")}catch{}}(),mt=at&&at.isTypedArray;function xt(v,I){for(var k=-1,Q=v==null?0:v.length,Vt=0,dt=[];++k<Q;){var Jt=v[k];I(Jt,k,v)&&(dt[Vt++]=Jt)}return dt}function Nt(v,I){for(var k=-1,Q=I.length,Vt=v.length;++k<Q;)v[Vt+k]=I[k];return v}function Pt(v,I){for(var k=-1,Q=v==null?0:v.length;++k<Q;)if(I(v[k],k,v))return!0;return!1}function Ie(v,I){for(var k=-1,Q=Array(v);++k<v;)Q[k]=I(k);return Q}function me(v){return function(I){return v(I)}}function se(v,I){return v.has(I)}function Rt(v,I){return v==null?void 0:v[I]}function Qt(v){var I=-1,k=Array(v.size);return v.forEach(function(Q,Vt){k[++I]=[Vt,Q]}),k}function Zt(v,I){return function(k){return v(I(k))}}function oe(v){var I=-1,k=Array(v.size);return v.forEach(function(Q){k[++I]=Q}),k}var kt=Array.prototype,Xt=Function.prototype,At=Object.prototype,Kt=N["__core-js_shared__"],he=Xt.toString,qt=At.hasOwnProperty,Pe=function(){var v=/[^.]+$/.exec(Kt&&Kt.keys&&Kt.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),je=At.toString,He=RegExp("^"+he.call(qt).replace(ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=E?N.Buffer:void 0,Ue=N.Symbol,Qe=N.Uint8Array,ir=At.propertyIsEnumerable,qr=kt.splice,Ze=Ue?Ue.toStringTag:void 0,Wr=Object.getOwnPropertySymbols,hn=Ke?Ke.isBuffer:void 0,xn=Zt(Object.keys,Object),le=lr(N,"DataView"),re=lr(N,"Map"),pe=lr(N,"Promise"),fe=lr(N,"Set"),ae=lr(N,"WeakMap"),ne=lr(Object,"create"),Se=Yr(le),Ce=Yr(re),de=Yr(pe),Oe=Yr(fe),ge=Yr(ae),we=Ue?Ue.prototype:void 0,ye=we?we.valueOf:void 0;function Yt(v){var I=-1,k=v==null?0:v.length;for(this.clear();++I<k;){var Q=v[I];this.set(Q[0],Q[1])}}function xe(){this.__data__=ne?ne(null):{},this.size=0}function Ae(v){var I=this.has(v)&&delete this.__data__[v];return this.size-=I?1:0,I}function ra(v){var I=this.__data__;if(ne){var k=I[v];return k===i?void 0:k}return qt.call(I,v)?I[v]:void 0}function na(v){var I=this.__data__;return ne?I[v]!==void 0:qt.call(I,v)}function ia(v,I){var k=this.__data__;return this.size+=this.has(v)?0:1,k[v]=ne&&I===void 0?i:I,this}Yt.prototype.clear=xe,Yt.prototype.delete=Ae,Yt.prototype.get=ra,Yt.prototype.has=na,Yt.prototype.set=ia;function mr(v){var I=-1,k=v==null?0:v.length;for(this.clear();++I<k;){var Q=v[I];this.set(Q[0],Q[1])}}function sa(){this.__data__=[],this.size=0}function oa(v){var I=this.__data__,k=An(I,v);if(k<0)return!1;var Q=I.length-1;return k==Q?I.pop():qr.call(I,k,1),--this.size,!0}function aa(v){var I=this.__data__,k=An(I,v);return k<0?void 0:I[k][1]}function ca(v){return An(this.__data__,v)>-1}function ua(v,I){var k=this.__data__,Q=An(k,v);return Q<0?(++this.size,k.push([v,I])):k[Q][1]=I,this}mr.prototype.clear=sa,mr.prototype.delete=oa,mr.prototype.get=aa,mr.prototype.has=ca,mr.prototype.set=ua;function Br(v){var I=-1,k=v==null?0:v.length;for(this.clear();++I<k;){var Q=v[I];this.set(Q[0],Q[1])}}function Gn(){this.size=0,this.__data__={hash:new Yt,map:new(re||mr),string:new Yt}}function ha(v){var I=ln(this,v).delete(v);return this.size-=I?1:0,I}function Wn(v){return ln(this,v).get(v)}function la(v){return ln(this,v).has(v)}function pa(v,I){var k=ln(this,v),Q=k.size;return k.set(v,I),this.size+=k.size==Q?0:1,this}Br.prototype.clear=Gn,Br.prototype.delete=ha,Br.prototype.get=Wn,Br.prototype.has=la,Br.prototype.set=pa;function Bn(v){var I=-1,k=v==null?0:v.length;for(this.__data__=new Br;++I<k;)this.add(v[I])}function fs(v){return this.__data__.set(v,i),this}function ds(v){return this.__data__.has(v)}Bn.prototype.add=Bn.prototype.push=fs,Bn.prototype.has=ds;function Or(v){var I=this.__data__=new mr(v);this.size=I.size}function fa(){this.__data__=new mr,this.size=0}function da(v){var I=this.__data__,k=I.delete(v);return this.size=I.size,k}function ga(v){return this.__data__.get(v)}function ya(v){return this.__data__.has(v)}function gs(v,I){var k=this.__data__;if(k instanceof mr){var Q=k.__data__;if(!re||Q.length<r-1)return Q.push([v,I]),this.size=++k.size,this;k=this.__data__=new Br(Q)}return k.set(v,I),this.size=k.size,this}Or.prototype.clear=fa,Or.prototype.delete=da,Or.prototype.get=ga,Or.prototype.has=ya,Or.prototype.set=gs;function ys(v,I){var k=Zn(v),Q=!k&&Os(v),Vt=!k&&!Q&&Ni(v),dt=!k&&!Q&&!Vt&&Ns(v),Jt=k||Q||Vt||dt,Ne=Jt?Ie(v.length,String):[],Ct=Ne.length;for(var Gt in v)(I||qt.call(v,Gt))&&!(Jt&&(Gt=="length"||Vt&&(Gt=="offset"||Gt=="parent")||dt&&(Gt=="buffer"||Gt=="byteLength"||Gt=="byteOffset")||Ds(Gt,Ct)))&&Ne.push(Gt);return Ne}function An(v,I){for(var k=v.length;k--;)if(Cs(v[k][0],I))return k;return-1}function xi(v,I,k){var Q=I(v);return Zn(v)?Q:Nt(Q,k(v))}function Nn(v){return v==null?v===void 0?_t:gt:Ze&&Ze in Object(v)?bs(v):wa(v)}function Ai(v){return Rn(v)&&Nn(v)==y}function Tn(v,I,k,Q,Vt){return v===I?!0:v==null||I==null||!Rn(v)&&!Rn(I)?v!==v&&I!==I:vs(v,I,k,Q,Tn,Vt)}function vs(v,I,k,Q,Vt,dt){var Jt=Zn(v),Ne=Zn(I),Ct=Jt?w:Ur(v),Gt=Ne?w:Ur(I);Ct=Ct==y?ht:Ct,Gt=Gt==y?ht:Gt;var _e=Ct==ht,sr=Gt==ht,Te=Ct==Gt;if(Te&&Ni(v)){if(!Ni(I))return!1;Jt=!0,_e=!1}if(Te&&!_e)return dt||(dt=new Or),Jt||Ns(v)?Yn(v,I,k,Q,Vt,dt):ma(v,I,Ct,k,Q,Vt,dt);if(!(k&a)){var te=_e&&qt.call(v,"__wrapped__"),Xe=sr&&qt.call(I,"__wrapped__");if(te||Xe){var xr=te?v.value():v,wr=Xe?I.value():I;return dt||(dt=new Or),Vt(xr,wr,k,Q,dt)}}return Te?(dt||(dt=new Or),_s(v,I,k,Q,Vt,dt)):!1}function va(v){if(!As(v)||Ps(v))return!1;var I=Xn(v)?He:Ht;return I.test(Yr(v))}function ms(v){return Rn(v)&&xs(v.length)&&!!bt[Nn(v)]}function ws(v){if(!Ss(v))return xn(v);var I=[];for(var k in Object(v))qt.call(v,k)&&k!="constructor"&&I.push(k);return I}function Yn(v,I,k,Q,Vt,dt){var Jt=k&a,Ne=v.length,Ct=I.length;if(Ne!=Ct&&!(Jt&&Ct>Ne))return!1;var Gt=dt.get(v);if(Gt&&dt.get(I))return Gt==I;var _e=-1,sr=!0,Te=k&u?new Bn:void 0;for(dt.set(v,I),dt.set(I,v);++_e<Ne;){var te=v[_e],Xe=I[_e];if(Q)var xr=Jt?Q(Xe,te,_e,I,v,dt):Q(te,Xe,_e,v,I,dt);if(xr!==void 0){if(xr)continue;sr=!1;break}if(Te){if(!Pt(I,function(wr,$r){if(!se(Te,$r)&&(te===wr||Vt(te,wr,k,Q,dt)))return Te.push($r)})){sr=!1;break}}else if(!(te===Xe||Vt(te,Xe,k,Q,dt))){sr=!1;break}}return dt.delete(v),dt.delete(I),sr}function ma(v,I,k,Q,Vt,dt,Jt){switch(k){case $t:if(v.byteLength!=I.byteLength||v.byteOffset!=I.byteOffset)return!1;v=v.buffer,I=I.buffer;case yt:return!(v.byteLength!=I.byteLength||!dt(new Qe(v),new Qe(I)));case _:case C:case et:return Cs(+v,+I);case S:return v.name==I.name&&v.message==I.message;case pt:case H:return v==I+"";case F:var Ne=Qt;case j:var Ct=Q&a;if(Ne||(Ne=oe),v.size!=I.size&&!Ct)return!1;var Gt=Jt.get(v);if(Gt)return Gt==I;Q|=u,Jt.set(v,I);var _e=Yn(Ne(v),Ne(I),Q,Vt,dt,Jt);return Jt.delete(v),_e;case B:if(ye)return ye.call(v)==ye.call(I)}return!1}function _s(v,I,k,Q,Vt,dt){var Jt=k&a,Ne=Qn(v),Ct=Ne.length,Gt=Qn(I),_e=Gt.length;if(Ct!=_e&&!Jt)return!1;for(var sr=Ct;sr--;){var Te=Ne[sr];if(!(Jt?Te in I:qt.call(I,Te)))return!1}var te=dt.get(v);if(te&&dt.get(I))return te==I;var Xe=!0;dt.set(v,I),dt.set(I,v);for(var xr=Jt;++sr<Ct;){Te=Ne[sr];var wr=v[Te],$r=I[Te];if(Q)var Ti=Jt?Q($r,wr,Te,I,v,dt):Q(wr,$r,Te,v,I,dt);if(!(Ti===void 0?wr===$r||Vt(wr,$r,k,Q,dt):Ti)){Xe=!1;break}xr||(xr=Te=="constructor")}if(Xe&&!xr){var jn=v.constructor,$e=I.constructor;jn!=$e&&"constructor"in v&&"constructor"in I&&!(typeof jn=="function"&&jn instanceof jn&&typeof $e=="function"&&$e instanceof $e)&&(Xe=!1)}return dt.delete(v),dt.delete(I),Xe}function Qn(v){return xi(v,Ea,Es)}function ln(v,I){var k=v.__data__;return Is(I)?k[typeof I=="string"?"string":"hash"]:k.map}function lr(v,I){var k=Rt(v,I);return va(k)?k:void 0}function bs(v){var I=qt.call(v,Ze),k=v[Ze];try{v[Ze]=void 0;var Q=!0}catch{}var Vt=je.call(v);return Q&&(I?v[Ze]=k:delete v[Ze]),Vt}var Es=Wr?function(v){return v==null?[]:(v=Object(v),xt(Wr(v),function(I){return ir.call(v,I)}))}:Ft,Ur=Nn;(le&&Ur(new le(new ArrayBuffer(1)))!=$t||re&&Ur(new re)!=F||pe&&Ur(pe.resolve())!=ct||fe&&Ur(new fe)!=j||ae&&Ur(new ae)!=rt)&&(Ur=function(v){var I=Nn(v),k=I==ht?v.constructor:void 0,Q=k?Yr(k):"";if(Q)switch(Q){case Se:return $t;case Ce:return F;case de:return ct;case Oe:return j;case ge:return rt}return I});function Ds(v,I){return I=I??p,!!I&&(typeof v=="number"||zr.test(v))&&v>-1&&v%1==0&&v<I}function Is(v){var I=typeof v;return I=="string"||I=="number"||I=="symbol"||I=="boolean"?v!=="__proto__":v===null}function Ps(v){return!!Pe&&Pe in v}function Ss(v){var I=v&&v.constructor,k=typeof I=="function"&&I.prototype||At;return v===k}function wa(v){return je.call(v)}function Yr(v){if(v!=null){try{return he.call(v)}catch{}try{return v+""}catch{}}return""}function Cs(v,I){return v===I||v!==v&&I!==I}var Os=Ai(function(){return arguments}())?Ai:function(v){return Rn(v)&&qt.call(v,"callee")&&!ir.call(v,"callee")},Zn=Array.isArray;function _a(v){return v!=null&&xs(v.length)&&!Xn(v)}var Ni=hn||Mt;function ba(v,I){return Tn(v,I)}function Xn(v){if(!As(v))return!1;var I=Nn(v);return I==z||I==T||I==d||I==lt}function xs(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=p}function As(v){var I=typeof v;return v!=null&&(I=="object"||I=="function")}function Rn(v){return v!=null&&typeof v=="object"}var Ns=mt?me(mt):ms;function Ea(v){return _a(v)?ys(v):ws(v)}function Ft(){return[]}function Mt(){return!1}o.exports=ba}(os,os.exports);var Ld=os.exports;const zd=vp(Ld);function qd(o,n){return n=n||{},new Promise(function(r,i){var a=new XMLHttpRequest,u=[],p=[],y={},w=function(){return{ok:(a.status/100|0)==2,statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:w,headers:{keys:function(){return u},entries:function(){return p},get:function(_){return y[_.toLowerCase()]},has:function(_){return _.toLowerCase()in y}}}};for(var d in a.open(n.method||"get",o,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(_,C,S){u.push(C=C.toLowerCase()),p.push([C,S]),y[C]=y[C]?y[C]+","+S:S}),r(w())},a.onerror=i,a.withCredentials=n.credentials=="include",n.headers)a.setRequestHeader(d,n.headers[d]);a.send(n.body||null)})}const Ud=Object.freeze(Object.defineProperty({__proto__:null,default:qd},Symbol.toStringTag,{value:"Module"})),fu=mo(Ud);var $d=self.fetch||(self.fetch=fu.default||fu);const kd=vp($d);function Md(o,n){if(o.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var a=0;a<o.length;a++){var u=o.charAt(a),p=u.charCodeAt(0);if(r[p]!==255)throw new TypeError(u+" is ambiguous");r[p]=a}var y=o.length,w=o.charAt(0),d=Math.log(y)/Math.log(256),_=Math.log(256)/Math.log(y);function C(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var F=0,et=0,gt=0,ht=T.length;gt!==ht&&T[gt]===0;)gt++,F++;for(var ct=(ht-gt)*_+1>>>0,lt=new Uint8Array(ct);gt!==ht;){for(var pt=T[gt],j=0,H=ct-1;(pt!==0||j<et)&&H!==-1;H--,j++)pt+=256*lt[H]>>>0,lt[H]=pt%y>>>0,pt=pt/y>>>0;if(pt!==0)throw new Error("Non-zero carry");et=j,gt++}for(var B=ct-et;B!==ct&&lt[B]===0;)B++;for(var _t=w.repeat(F);B<ct;++B)_t+=o.charAt(lt[B]);return _t}function S(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var F=0;if(T[F]!==" "){for(var et=0,gt=0;T[F]===w;)et++,F++;for(var ht=(T.length-F)*d+1>>>0,ct=new Uint8Array(ht);T[F];){var lt=r[T.charCodeAt(F)];if(lt===255)return;for(var pt=0,j=ht-1;(lt!==0||pt<gt)&&j!==-1;j--,pt++)lt+=y*ct[j]>>>0,ct[j]=lt%256>>>0,lt=lt/256>>>0;if(lt!==0)throw new Error("Non-zero carry");gt=pt,F++}if(T[F]!==" "){for(var H=ht-gt;H!==ht&&ct[H]===0;)H++;for(var B=new Uint8Array(et+(ht-H)),_t=et;H!==ht;)B[_t++]=ct[H++];return B}}}function z(T){var F=S(T);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:C,decodeUnsafe:S,decode:z}}var Hd=Md,Kd=Hd;const du=o=>{if(o instanceof Uint8Array&&o.constructor.name==="Uint8Array")return o;if(o instanceof ArrayBuffer)return new Uint8Array(o);if(ArrayBuffer.isView(o))return new Uint8Array(o.buffer,o.byteOffset,o.byteLength);throw new Error("Unknown type, must be binary type")},Fd=o=>new TextEncoder().encode(o),Vd=o=>new TextDecoder().decode(o);class Gd{constructor(n,r,i){this.name=n,this.prefix=r,this.baseEncode=i}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}}class Wd{constructor(n,r,i){if(this.name=n,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return gu(this,n)}}class Bd{constructor(n){this.decoders=n}or(n){return gu(this,n)}decode(n){const r=n[0],i=this.decoders[r];if(i)return i.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const gu=(o,n)=>new Bd({...o.decoders||{[o.prefix]:o},...n.decoders||{[n.prefix]:n}});class Yd{constructor(n,r,i,a){this.name=n,this.prefix=r,this.baseEncode=i,this.baseDecode=a,this.encoder=new Gd(n,r,i),this.decoder=new Wd(n,r,a)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}}const as=({name:o,prefix:n,encode:r,decode:i})=>new Yd(o,n,r,i),bi=({prefix:o,name:n,alphabet:r})=>{const{encode:i,decode:a}=Kd(r,n);return as({prefix:o,name:n,encode:i,decode:u=>du(a(u))})},Qd=(o,n,r,i)=>{const a={};for(let _=0;_<n.length;++_)a[n[_]]=_;let u=o.length;for(;o[u-1]==="=";)--u;const p=new Uint8Array(u*r/8|0);let y=0,w=0,d=0;for(let _=0;_<u;++_){const C=a[o[_]];if(C===void 0)throw new SyntaxError(`Non-${i} character`);w=w<<r|C,y+=r,y>=8&&(y-=8,p[d++]=255&w>>y)}if(y>=r||255&w<<8-y)throw new SyntaxError("Unexpected end of data");return p},Zd=(o,n,r)=>{const i=n[n.length-1]==="=",a=(1<<r)-1;let u="",p=0,y=0;for(let w=0;w<o.length;++w)for(y=y<<8|o[w],p+=8;p>r;)p-=r,u+=n[a&y>>p];if(p&&(u+=n[a&y<<r-p]),i)for(;u.length*r&7;)u+="=";return u},Me=({name:o,prefix:n,bitsPerChar:r,alphabet:i})=>as({prefix:n,name:o,encode(a){return Zd(a,i,r)},decode(a){return Qd(a,i,r,o)}}),Xd=as({prefix:"\0",name:"identity",encode:o=>Vd(o),decode:o=>Fd(o)});var Jd=Object.freeze({__proto__:null,identity:Xd});const tg=Me({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var eg=Object.freeze({__proto__:null,base2:tg});const rg=Me({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ng=Object.freeze({__proto__:null,base8:rg});const ig=bi({prefix:"9",name:"base10",alphabet:"0123456789"});var sg=Object.freeze({__proto__:null,base10:ig});const og=Me({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ag=Me({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var cg=Object.freeze({__proto__:null,base16:og,base16upper:ag});const ug=Me({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hg=Me({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lg=Me({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pg=Me({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fg=Me({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dg=Me({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),gg=Me({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),yg=Me({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),vg=Me({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var mg=Object.freeze({__proto__:null,base32:ug,base32upper:hg,base32pad:lg,base32padupper:pg,base32hex:fg,base32hexupper:dg,base32hexpad:gg,base32hexpadupper:yg,base32z:vg});const wg=bi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_g=bi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var bg=Object.freeze({__proto__:null,base36:wg,base36upper:_g});const Eg=bi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Dg=bi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ig=Object.freeze({__proto__:null,base58btc:Eg,base58flickr:Dg});const Pg=Me({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Sg=Me({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cg=Me({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Og=Me({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var xg=Object.freeze({__proto__:null,base64:Pg,base64pad:Sg,base64url:Cg,base64urlpad:Og});const yu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ag=yu.reduce((o,n,r)=>(o[r]=n,o),[]),Ng=yu.reduce((o,n,r)=>(o[n.codePointAt(0)]=r,o),[]);function Tg(o){return o.reduce((n,r)=>(n+=Ag[r],n),"")}function Rg(o){const n=[];for(const r of o){const i=Ng[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);n.push(i)}return new Uint8Array(n)}const jg=as({prefix:"\u{1F680}",name:"base256emoji",encode:Tg,decode:Rg});var Lg=Object.freeze({__proto__:null,base256emoji:jg}),zg=mu,vu=128,qg=127,Ug=~qg,$g=Math.pow(2,31);function mu(o,n,r){n=n||[],r=r||0;for(var i=r;o>=$g;)n[r++]=o&255|vu,o/=128;for(;o&Ug;)n[r++]=o&255|vu,o>>>=7;return n[r]=o|0,mu.bytes=r-i+1,n}var kg=$o,Mg=128,wu=127;function $o(o,i){var r=0,i=i||0,a=0,u=i,p,y=o.length;do{if(u>=y)throw $o.bytes=0,new RangeError("Could not decode varint");p=o[u++],r+=a<28?(p&wu)<<a:(p&wu)*Math.pow(2,a),a+=7}while(p>=Mg);return $o.bytes=u-i,r}var Hg=Math.pow(2,7),Kg=Math.pow(2,14),Fg=Math.pow(2,21),Vg=Math.pow(2,28),Gg=Math.pow(2,35),Wg=Math.pow(2,42),Bg=Math.pow(2,49),Yg=Math.pow(2,56),Qg=Math.pow(2,63),Zg=function(o){return o<Hg?1:o<Kg?2:o<Fg?3:o<Vg?4:o<Gg?5:o<Wg?6:o<Bg?7:o<Yg?8:o<Qg?9:10},Xg={encode:zg,decode:kg,encodingLength:Zg},_u=Xg;const bu=(o,n,r=0)=>(_u.encode(o,n,r),n),Eu=o=>_u.encodingLength(o),ko=(o,n)=>{const r=n.byteLength,i=Eu(o),a=i+Eu(r),u=new Uint8Array(a+r);return bu(o,u,0),bu(r,u,i),u.set(n,a),new Jg(o,r,n,u)};class Jg{constructor(n,r,i,a){this.code=n,this.size=r,this.digest=i,this.bytes=a}}const Du=({name:o,code:n,encode:r})=>new ty(o,n,r);class ty{constructor(n,r,i){this.name=n,this.code=r,this.encode=i}digest(n){if(n instanceof Uint8Array){const r=this.encode(n);return r instanceof Uint8Array?ko(this.code,r):r.then(i=>ko(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Iu=o=>async n=>new Uint8Array(await crypto.subtle.digest(o,n)),ey=Du({name:"sha2-256",code:18,encode:Iu("SHA-256")}),ry=Du({name:"sha2-512",code:19,encode:Iu("SHA-512")});var ny=Object.freeze({__proto__:null,sha256:ey,sha512:ry});const Pu=0,iy="identity",Su=du;var sy=Object.freeze({__proto__:null,identity:{code:Pu,name:iy,encode:Su,digest:o=>ko(Pu,Su(o))}});new TextEncoder,new TextDecoder;const Cu={...Jd,...eg,...ng,...sg,...cg,...mg,...bg,...Ig,...xg,...Lg};({...ny,...sy});function Ou(o){return globalThis.Buffer!=null?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):o}function oy(o=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ou(globalThis.Buffer.allocUnsafe(o)):new Uint8Array(o)}function xu(o,n,r,i){return{name:o,prefix:n,encoder:{name:o,prefix:n,encode:r},decoder:{decode:i}}}const Au=xu("utf8","u",o=>"u"+new TextDecoder("utf8").decode(o),o=>new TextEncoder().encode(o.substring(1))),Mo=xu("ascii","a",o=>{let n="a";for(let r=0;r<o.length;r++)n+=String.fromCharCode(o[r]);return n},o=>{o=o.substring(1);const n=oy(o.length);for(let r=0;r<o.length;r++)n[r]=o.charCodeAt(r);return n}),ay={utf8:Au,"utf-8":Au,hex:Cu.base16,latin1:Mo,ascii:Mo,binary:Mo,...Cu};function cy(o,n="utf8"){const r=ay[n];if(!r)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ou(globalThis.Buffer.from(o,"utf-8")):r.decoder.decode(`${r.prefix}${o}`)}const Nu="wc",uy=2,Ho="core",cn=`${Nu}@2:${Ho}:`,hy={name:Ho,logger:"error"},ly={database:":memory:"},py="crypto",Tu="client_ed25519_seed",fy=nt.ONE_DAY,dy="keychain",gy="0.3",yy="messages",vy="0.3",my=nt.SIX_HOURS,wy="publisher",Ru="irn",_y="error",ju="wss://relay.walletconnect.com",Lu="wss://relay.walletconnect.org",by="relayer",Ve={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Ey="_subscription",Fr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Dy=nt.ONE_SECOND,Iy="2.11.0",Py=1e4,Sy="0.3",Cy="WALLETCONNECT_CLIENT_ID",Cr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Oy="subscription",xy="0.3",Ay=nt.FIVE_SECONDS*1e3,Ny="pairing",Ty="0.3",Ei={wc_pairingDelete:{req:{ttl:nt.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:nt.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:nt.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:nt.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:nt.ONE_DAY,prompt:!1,tag:0},res:{ttl:nt.ONE_DAY,prompt:!1,tag:0}}},Di={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Lr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Ry="history",jy="0.3",Ly="expirer",vr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},zy="0.3",Ko="verify-api",Vn="https://verify.walletconnect.com",Fo="https://verify.walletconnect.org",qy=[Vn,Fo],Uy="echo",$y="https://echo.walletconnect.com";class ky{constructor(n,r){this.core=n,this.logger=r,this.keychain=new Map,this.name=dy,this.version=gy,this.initialized=!1,this.storagePrefix=cn,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,a)=>{this.isInitialized(),this.keychain.set(i,a),await this.persist()},this.get=i=>{this.isInitialized();const a=this.keychain.get(i);if(typeof a>"u"){const{message:u}=Z("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(u)}return a},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=n,this.logger=It.generateChildLogger(r,this.name)}get context(){return It.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(n){await this.core.storage.setItem(this.storageKey,Pp(n))}async getKeyChain(){const n=await this.core.storage.getItem(this.storageKey);return typeof n<"u"?Sp(n):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:n}=Z("NOT_INITIALIZED",this.name);throw new Error(n)}}}class My{constructor(n,r,i){this.core=n,this.logger=r,this.name=py,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),u=hu(a);return uu(u.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=KE();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const u=await this.getClientSeed(),p=hu(u),y=Cc();return await Ad(y,a,fy,p)},this.generateSharedKey=(a,u,p)=>{this.isInitialized();const y=this.getPrivateKey(a),w=FE(y,u);return this.setSymKey(w,p)},this.setSymKey=async(a,u)=>{this.isInitialized();const p=u||VE(a);return await this.keychain.set(p,a),p},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,u,p)=>{this.isInitialized();const y=GE(p),w=Qi(u);if(mp(y)){const S=y.senderPublicKey,z=y.receiverPublicKey;a=await this.generateSharedKey(S,z)}const d=this.getSymKey(a),{type:_,senderPublicKey:C}=y;return WE({type:_,symKey:d,message:w,senderPublicKey:C})},this.decode=async(a,u,p)=>{this.isInitialized();const y=BE(u,p);if(mp(y)){const w=y.receiverPublicKey,d=y.senderPublicKey;a=await this.generateSharedKey(w,d)}try{const w=this.getSymKey(a),d=YE({symKey:w,encoded:u});return Io(d)}catch(w){this.logger.error(`Failed to decode message from topic: '${a}', clientId: '${await this.getClientId()}'`),this.logger.error(w)}},this.getPayloadType=a=>{const u=wp(a);return QE(u.type)},this.getPayloadSenderPublicKey=a=>{const u=wp(a);return u.senderPublicKey?wo(u.senderPublicKey,ZE):void 0},this.core=n,this.logger=It.generateChildLogger(r,this.name),this.keychain=i||new ky(this.core,this.logger)}get context(){return It.getLoggerContext(this.logger)}async setPrivateKey(n,r){return await this.keychain.set(n,r),n}getPrivateKey(n){return this.keychain.get(n)}async getClientSeed(){let n="";try{n=this.keychain.get(Tu)}catch{n=Cc(),await this.keychain.set(Tu,n)}return cy(n,"base16")}getSymKey(n){return this.keychain.get(n)}isInitialized(){if(!this.initialized){const{message:n}=Z("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Hy extends ad{constructor(n,r){super(n,r),this.logger=n,this.core=r,this.messages=new Map,this.name=yy,this.version=vy,this.initialized=!1,this.storagePrefix=cn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,a)=>{this.isInitialized();const u=di(a);let p=this.messages.get(i);return typeof p>"u"&&(p={}),typeof p[u]<"u"||(p[u]=a,this.messages.set(i,p),await this.persist()),u},this.get=i=>{this.isInitialized();let a=this.messages.get(i);return typeof a>"u"&&(a={}),a},this.has=(i,a)=>{this.isInitialized();const u=this.get(i),p=di(a);return typeof u[p]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=It.generateChildLogger(n,this.name),this.core=r}get context(){return It.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(n){await this.core.storage.setItem(this.storageKey,Pp(n))}async getRelayerMessages(){const n=await this.core.storage.getItem(this.storageKey);return typeof n<"u"?Sp(n):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:n}=Z("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Ky extends cd{constructor(n,r){super(n,r),this.relayer=n,this.logger=r,this.events=new Kr.EventEmitter,this.name=wy,this.queue=new Map,this.publishTimeout=nt.toMiliseconds(nt.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,a,u)=>{var p;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:a,opts:u}});try{const y=(u==null?void 0:u.ttl)||my,w=Oc(u),d=(u==null?void 0:u.prompt)||!1,_=(u==null?void 0:u.tag)||0,C=(u==null?void 0:u.id)||N3().toString(),S={topic:i,message:a,opts:{ttl:y,relay:w,prompt:d,tag:_,id:C}},z=setTimeout(()=>this.queue.set(C,S),this.publishTimeout);try{await await Bi(this.rpcPublish(i,a,y,w,d,_,C),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(C),this.relayer.events.emit(Ve.publish,S)}catch(T){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(p=u==null?void 0:u.internal)!=null&&p.throwOnFailedPublish)throw this.removeRequestFromQueue(C),T;return}finally{clearTimeout(z)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:a,opts:u}})}catch(y){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(y),y}},this.on=(i,a)=>{this.events.on(i,a)},this.once=(i,a)=>{this.events.once(i,a)},this.off=(i,a)=>{this.events.off(i,a)},this.removeListener=(i,a)=>{this.events.removeListener(i,a)},this.relayer=n,this.logger=It.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return It.getLoggerContext(this.logger)}rpcPublish(n,r,i,a,u,p,y){var w,d,_,C;const S={method:bo(a.protocol).publish,params:{topic:n,message:r,ttl:i,prompt:u,tag:p},id:y};return bn((w=S.params)==null?void 0:w.prompt)&&((d=S.params)==null||delete d.prompt),bn((_=S.params)==null?void 0:_.tag)&&((C=S.params)==null||delete C.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:S}),this.relayer.request(S)}removeRequestFromQueue(n){this.queue.delete(n)}checkQueue(){this.queue.forEach(async n=>{const{topic:r,message:i,opts:a}=n;await this.publish(r,i,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(Kn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ve.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ve.message_ack,n=>{this.removeRequestFromQueue(n.id.toString())})}}class Fy{constructor(){this.map=new Map,this.set=(n,r)=>{const i=this.get(n);this.exists(n,r)||this.map.set(n,[...i,r])},this.get=n=>this.map.get(n)||[],this.exists=(n,r)=>this.get(n).includes(r),this.delete=(n,r)=>{if(typeof r>"u"){this.map.delete(n);return}if(!this.map.has(n))return;const i=this.get(n);if(!this.exists(n,r))return;const a=i.filter(u=>u!==r);if(!a.length){this.map.delete(n);return}this.map.set(n,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Vy=Object.defineProperty,Gy=Object.defineProperties,Wy=Object.getOwnPropertyDescriptors,zu=Object.getOwnPropertySymbols,By=Object.prototype.hasOwnProperty,Yy=Object.prototype.propertyIsEnumerable,qu=(o,n,r)=>n in o?Vy(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Ii=(o,n)=>{for(var r in n||(n={}))By.call(n,r)&&qu(o,r,n[r]);if(zu)for(var r of zu(n))Yy.call(n,r)&&qu(o,r,n[r]);return o},Vo=(o,n)=>Gy(o,Wy(n));class Qy extends ld{constructor(n,r){super(n,r),this.relayer=n,this.logger=r,this.subscriptions=new Map,this.topicMap=new Fy,this.events=new Kr.EventEmitter,this.name=Oy,this.version=xy,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=cn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:a}});try{const u=Oc(a),p={topic:i,relay:u};this.pending.set(i,p);const y=await this.rpcSubscribe(i,u);return this.onSubscribe(y,p),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:a}}),y}catch(u){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(u),u}},this.unsubscribe=async(i,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(i,a.id,a):await this.unsubscribeByTopic(i,a)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise((a,u)=>{const p=new nt.Watch;p.start(this.pendingSubscriptionWatchLabel);const y=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(y),p.stop(this.pendingSubscriptionWatchLabel),a(!0)),p.elapsed(this.pendingSubscriptionWatchLabel)>=Ay&&(clearInterval(y),p.stop(this.pendingSubscriptionWatchLabel),u(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(i,a)=>{this.events.on(i,a)},this.once=(i,a)=>{this.events.once(i,a)},this.off=(i,a)=>{this.events.off(i,a)},this.removeListener=(i,a)=>{this.events.removeListener(i,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=n,this.logger=It.generateChildLogger(r,this.name),this.clientId=""}get context(){return It.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(n,r){let i=!1;try{i=this.getSubscription(n).topic===r}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(n,r){const i=this.topicMap.get(n);await Promise.all(i.map(async a=>await this.unsubscribeById(n,a,r)))}async unsubscribeById(n,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:n,id:r,opts:i}});try{const a=Oc(i);await this.rpcUnsubscribe(n,r,a);const u=Be("USER_DISCONNECTED",`${this.name}, ${n}`);await this.onUnsubscribe(n,r,u),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:n,id:r,opts:i}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(n,r){const i={method:bo(r.protocol).subscribe,params:{topic:n}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await Bi(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ve.connection_stalled)}return di(n+this.clientId)}async rpcBatchSubscribe(n){if(!n.length)return;const r=n[0].relay,i={method:bo(r.protocol).batchSubscribe,params:{topics:n.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Bi(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ve.connection_stalled)}}rpcUnsubscribe(n,r,i){const a={method:bo(i.protocol).unsubscribe,params:{topic:n,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(n,r){this.setSubscription(n,Vo(Ii({},r),{id:n})),this.pending.delete(r.topic)}onBatchSubscribe(n){n.length&&n.forEach(r=>{this.setSubscription(r.id,Ii({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(n,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,n)&&this.deleteSubscription(r,i),await this.relayer.messages.del(n)}async setRelayerSubscriptions(n){await this.relayer.core.storage.setItem(this.storageKey,n)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(n,r){this.subscriptions.has(n)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:n,subscription:r}),this.addSubscription(n,r))}addSubscription(n,r){this.subscriptions.set(n,Ii({},r)),this.topicMap.set(r.topic,n),this.events.emit(Cr.created,r)}getSubscription(n){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:n});const r=this.subscriptions.get(n);if(!r){const{message:i}=Z("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return r}deleteSubscription(n,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:n,reason:r});const i=this.getSubscription(n);this.subscriptions.delete(n),this.topicMap.delete(i.topic,n),this.events.emit(Cr.deleted,Vo(Ii({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Cr.sync)}async reset(){if(this.cached.length){const n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Cr.resubscribed)}async restore(){try{const n=await this.getRelayerSubscriptions();if(typeof n>"u"||!n.length)return;if(this.subscriptions.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=n,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(n){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(n)}}async batchSubscribe(n){if(!n.length)return;const r=await this.rpcBatchSubscribe(n);gi(r)&&this.onBatchSubscribe(r.map((i,a)=>Vo(Ii({},n[a]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const n=[];this.pending.forEach(r=>{n.push(r)}),await this.batchSubscribe(n)}registerEventListeners(){this.relayer.core.heartbeat.on(Kn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ve.connect,async()=>{await this.onConnect()}),this.relayer.on(Ve.disconnect,()=>{this.onDisconnect()}),this.events.on(Cr.created,async n=>{const r=Cr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:n}),await this.persist()}),this.events.on(Cr.deleted,async n=>{const r=Cr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:n}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:n}=Z("NOT_INITIALIZED",this.name);throw new Error(n)}}async restartToComplete(){this.restartInProgress&&await new Promise(n=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),n())},this.pollingInterval)})}}var Zy=Object.defineProperty,Uu=Object.getOwnPropertySymbols,Xy=Object.prototype.hasOwnProperty,Jy=Object.prototype.propertyIsEnumerable,$u=(o,n,r)=>n in o?Zy(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,tv=(o,n)=>{for(var r in n||(n={}))Xy.call(n,r)&&$u(o,r,n[r]);if(Uu)for(var r of Uu(n))Jy.call(n,r)&&$u(o,r,n[r]);return o};class ev extends ud{constructor(n){super(n),this.protocol="wc",this.version=2,this.events=new Kr.EventEmitter,this.name=by,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Ve.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Ve.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Fr.payload,this.onPayloadHandler),this.provider.on(Fr.connect,this.onConnectHandler),this.provider.on(Fr.disconnect,this.onDisconnectHandler),this.provider.on(Fr.error,this.onProviderErrorHandler)},this.core=n.core,this.logger=typeof n.logger<"u"&&typeof n.logger!="string"?It.generateChildLogger(n.logger,this.name):It.pino(It.getDefaultLoggerOptions({level:n.logger||_y})),this.messages=new Hy(this.logger,n.core),this.subscriber=new Qy(this,this.logger),this.publisher=new Ky(this,this.logger),this.relayUrl=(n==null?void 0:n.relayUrl)||ju,this.projectId=n.projectId,this.bundleId=XE(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Lu}...`),await this.restartTransport(Lu)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},Py)}get context(){return It.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(n,r,i){this.isInitialized(),await this.publisher.publish(n,r,i),await this.recordMessageEvent({topic:n,message:r,publishedAt:Date.now()})}async subscribe(n,r){var i;this.isInitialized();let a=((i=this.subscriber.topicMap.get(n))==null?void 0:i[0])||"";if(a)return a;let u;const p=y=>{y.topic===n&&(this.subscriber.off(Cr.created,p),u())};return await Promise.all([new Promise(y=>{u=y,this.subscriber.on(Cr.created,p)}),new Promise(async y=>{a=await this.subscriber.subscribe(n,r),y()})]),a}async unsubscribe(n,r){this.isInitialized(),await this.subscriber.unsubscribe(n,r)}on(n,r){this.events.on(n,r)}once(n,r){this.events.once(n,r)}off(n,r){this.events.off(n,r)}removeListener(n,r){this.events.removeListener(n,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Bi(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(n){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){n&&n!==this.relayUrl&&(this.relayUrl=n,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Cr.resubscribed,()=>{r()})}),new Promise(async(r,i)=>{try{await Bi(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(a){i(a);return}r()})])}catch(r){this.logger.error(r);const i=r;if(!this.isConnectionStalled(i.message))throw r;this.provider.events.emit(Fr.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(n){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=n||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await _p())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(n){return this.staleConnectionErrors.some(r=>n.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const n=await this.core.crypto.signJWT(this.relayUrl);this.provider=new on(new jd(JE({sdkVersion:Iy,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:n,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(n){const{topic:r,message:i}=n;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(n){const{topic:r,message:i}=n;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const a=this.messages.has(r,i);return a&&this.logger.debug(`Ignoring duplicate message: ${i}`),a}async onProviderPayload(n){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:n}),Tc(n)){if(!n.method.endsWith(Ey))return;const r=n.params,{topic:i,message:a,publishedAt:u}=r.data,p={topic:i,message:a,publishedAt:u};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(tv({type:"event",event:r.id},p)),this.events.emit(r.id,p),await this.acknowledgePayload(n),await this.onMessageEvent(p)}else Rc(n)&&this.events.emit(Ve.message_ack,n)}async onMessageEvent(n){await this.shouldIgnoreMessageEvent(n)||(this.events.emit(Ve.message,n),await this.recordMessageEvent(n))}async acknowledgePayload(n){const r=Po(n.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Fr.payload,this.onPayloadHandler),this.provider.off(Fr.connect,this.onConnectHandler),this.provider.off(Fr.disconnect,this.onDisconnectHandler),this.provider.off(Fr.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Ve.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let n=await _p();t3(async r=>{this.initialized&&n!==r&&(n=r,r?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(i=>this.logger.error(i))))})}onProviderDisconnect(){this.events.emit(Ve.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(n=>this.logger.error(n))},nt.toMiliseconds(Dy)))}isInitialized(){if(!this.initialized){const{message:n}=Z("NOT_INITIALIZED",this.name);throw new Error(n)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(n=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),n())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var rv=Object.defineProperty,ku=Object.getOwnPropertySymbols,nv=Object.prototype.hasOwnProperty,iv=Object.prototype.propertyIsEnumerable,Mu=(o,n,r)=>n in o?rv(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Hu=(o,n)=>{for(var r in n||(n={}))nv.call(n,r)&&Mu(o,r,n[r]);if(ku)for(var r of ku(n))iv.call(n,r)&&Mu(o,r,n[r]);return o};class cs extends hd{constructor(n,r,i,a=cn,u=void 0){super(n,r,i,a),this.core=n,this.logger=r,this.name=i,this.map=new Map,this.version=Sy,this.cached=[],this.initialized=!1,this.storagePrefix=cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(p=>{this.getKey&&p!==null&&!bn(p)?this.map.set(this.getKey(p),p):ME(p)?this.map.set(p.id,p):HE(p)&&this.map.set(p.topic,p)}),this.cached=[],this.initialized=!0)},this.set=async(p,y)=>{this.isInitialized(),this.map.has(p)?await this.update(p,y):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:p,value:y}),this.map.set(p,y),await this.persist())},this.get=p=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:p}),this.getData(p)),this.getAll=p=>(this.isInitialized(),p?this.values.filter(y=>Object.keys(p).every(w=>zd(y[w],p[w]))):this.values),this.update=async(p,y)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:p,update:y});const w=Hu(Hu({},this.getData(p)),y);this.map.set(p,w),await this.persist()},this.delete=async(p,y)=>{this.isInitialized(),this.map.has(p)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:p,reason:y}),this.map.delete(p),await this.persist())},this.logger=It.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=u}get context(){return It.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(n){await this.core.storage.setItem(this.storageKey,n)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(n){const r=this.map.get(n);if(!r){const{message:i}=Z("NO_MATCHING_KEY",`${this.name}: ${n}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const n=await this.getDataStore();if(typeof n>"u"||!n.length)return;if(this.map.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=n,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(n){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(n)}}isInitialized(){if(!this.initialized){const{message:n}=Z("NOT_INITIALIZED",this.name);throw new Error(n)}}}class sv{constructor(n,r){this.core=n,this.logger=r,this.name=Ny,this.version=Ty,this.events=new jc,this.initialized=!1,this.storagePrefix=cn,this.ignoredPayloadTypes=[bp],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=Cc(),a=await this.core.crypto.setSymKey(i),u=jr(nt.FIVE_MINUTES),p={protocol:Ru},y={topic:a,expiry:u,relay:p,active:!1},w=e3({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:i,relay:p});return await this.pairings.set(a,y),await this.core.relayer.subscribe(a),this.core.expirer.set(a,u),{topic:a,uri:w}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:a,symKey:u,relay:p}=Ep(i.uri);let y;if(this.pairings.keys.includes(a)&&(y=this.pairings.get(a),y.active))throw new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);const w=jr(nt.FIVE_MINUTES),d={topic:a,relay:p,expiry:w,active:!1};return await this.pairings.set(a,d),this.core.expirer.set(a,w),i.activatePairing&&await this.activate({topic:a}),this.events.emit(Di.create,d),this.core.crypto.keychain.has(a)||(await this.core.crypto.setSymKey(u,a),await this.core.relayer.subscribe(a,{relay:p})),d},this.activate=async({topic:i})=>{this.isInitialized();const a=jr(nt.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:a}),this.core.expirer.set(i,a)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:a}=i;if(this.pairings.keys.includes(a)){const u=await this.sendRequest(a,"wc_pairingPing",{}),{done:p,resolve:y,reject:w}=pi();this.events.once(Re("pairing_ping",u),({error:d})=>{d?w(d):y()}),await p()}},this.updateExpiry=async({topic:i,expiry:a})=>{this.isInitialized(),await this.pairings.update(i,{expiry:a})},this.updateMetadata=async({topic:i,metadata:a})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:a}=i;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",Be("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(i,a,u)=>{const p=Zi(a,u),y=await this.core.crypto.encode(i,p),w=Ei[a].req;return this.core.history.set(i,p),this.core.relayer.publish(i,y,w),p.id},this.sendResult=async(i,a,u)=>{const p=Po(i,u),y=await this.core.crypto.encode(a,p),w=await this.core.history.get(a,i),d=Ei[w.request.method].res;await this.core.relayer.publish(a,y,d),await this.core.history.resolve(p)},this.sendError=async(i,a,u)=>{const p=Nc(i,u),y=await this.core.crypto.encode(a,p),w=await this.core.history.get(a,i),d=Ei[w.request.method]?Ei[w.request.method].res:Ei.unregistered_method.res;await this.core.relayer.publish(a,y,d),await this.core.history.resolve(p)},this.deletePairing=async(i,a)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,Be("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),a?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(a=>En(a.expiry));await Promise.all(i.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=i=>{const{topic:a,payload:u}=i;switch(u.method){case"wc_pairingPing":return this.onPairingPingRequest(a,u);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,u);default:return this.onUnknownRpcMethodRequest(a,u)}},this.onRelayEventResponse=async i=>{const{topic:a,payload:u}=i,p=(await this.core.history.get(a,u.id)).request.method;switch(p){case"wc_pairingPing":return this.onPairingPingResponse(a,u);default:return this.onUnknownRpcMethodResponse(p)}},this.onPairingPingRequest=async(i,a)=>{const{id:u}=a;try{this.isValidPing({topic:i}),await this.sendResult(u,i,!0),this.events.emit(Di.ping,{id:u,topic:i})}catch(p){await this.sendError(u,i,p),this.logger.error(p)}},this.onPairingPingResponse=(i,a)=>{const{id:u}=a;setTimeout(()=>{Dn(a)?this.events.emit(Re("pairing_ping",u),{}):an(a)&&this.events.emit(Re("pairing_ping",u),{error:a.error})},500)},this.onPairingDeleteRequest=async(i,a)=>{const{id:u}=a;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(Di.delete,{id:u,topic:i})}catch(p){await this.sendError(u,i,p),this.logger.error(p)}},this.onUnknownRpcMethodRequest=async(i,a)=>{const{id:u,method:p}=a;try{if(this.registeredMethods.includes(p))return;const y=Be("WC_METHOD_UNSUPPORTED",p);await this.sendError(u,i,y),this.logger.error(y)}catch(y){await this.sendError(u,i,y),this.logger.error(y)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(Be("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{var a;if(!hr(i)){const{message:p}=Z("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(p)}if(!r3(i.uri)){const{message:p}=Z("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(p)}const u=Ep(i.uri);if(!((a=u==null?void 0:u.relay)!=null&&a.protocol)){const{message:p}=Z("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(p)}if(!(u!=null&&u.symKey)){const{message:p}=Z("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(p)}},this.isValidPing=async i=>{if(!hr(i)){const{message:u}=Z("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(u)}const{topic:a}=i;await this.isValidPairingTopic(a)},this.isValidDisconnect=async i=>{if(!hr(i)){const{message:u}=Z("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(u)}const{topic:a}=i;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async i=>{if(!fi(i,!1)){const{message:a}=Z("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(a)}if(!this.pairings.keys.includes(i)){const{message:a}=Z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(a)}if(En(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:a}=Z("EXPIRED",`pairing topic: ${i}`);throw new Error(a)}},this.core=n,this.logger=It.generateChildLogger(r,this.name),this.pairings=new cs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return It.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:n}=Z("NOT_INITIALIZED",this.name);throw new Error(n)}}registerRelayerEvents(){this.core.relayer.on(Ve.message,async n=>{const{topic:r,message:i}=n;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const a=await this.core.crypto.decode(r,i);try{Tc(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Rc(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.core.history.delete(r,a.id))}catch(u){this.logger.error(u)}})}registerExpirerEvents(){this.core.expirer.on(vr.expired,async n=>{const{topic:r}=Dp(n.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Di.expire,{topic:r}))})}}class ov extends od{constructor(n,r){super(n,r),this.core=n,this.logger=r,this.records=new Map,this.events=new Kr.EventEmitter,this.name=Ry,this.version=jy,this.cached=[],this.initialized=!1,this.storagePrefix=cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,a,u)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:a,chainId:u}),this.records.has(a.id))return;const p={id:a.id,topic:i,request:{method:a.method,params:a.params||null},chainId:u,expiry:jr(nt.THIRTY_DAYS)};this.records.set(p.id,p),this.events.emit(Lr.created,p)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const a=await this.getRecord(i.id);typeof a.response>"u"&&(a.response=an(i)?{error:i.error}:{result:i.result},this.records.set(a.id,a),this.events.emit(Lr.updated,a))},this.get=async(i,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:a}),await this.getRecord(a)),this.delete=(i,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(u=>{if(u.topic===i){if(typeof a<"u"&&u.id!==a)return;this.records.delete(u.id),this.events.emit(Lr.deleted,u)}})},this.exists=async(i,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===i:!1),this.on=(i,a)=>{this.events.on(i,a)},this.once=(i,a)=>{this.events.once(i,a)},this.off=(i,a)=>{this.events.off(i,a)},this.removeListener=(i,a)=>{this.events.removeListener(i,a)},this.logger=It.generateChildLogger(r,this.name)}get context(){return It.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const n=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:Zi(r.request.method,r.request.params,r.id),chainId:r.chainId};return n.push(i)}),n}async setJsonRpcRecords(n){await this.core.storage.setItem(this.storageKey,n)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(n){this.isInitialized();const r=this.records.get(n);if(!r){const{message:i}=Z("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Lr.sync)}async restore(){try{const n=await this.getJsonRpcRecords();if(typeof n>"u"||!n.length)return;if(this.records.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=n,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}}registerEventListeners(){this.events.on(Lr.created,n=>{const r=Lr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:n}),this.persist()}),this.events.on(Lr.updated,n=>{const r=Lr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:n}),this.persist()}),this.events.on(Lr.deleted,n=>{const r=Lr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:n}),this.persist()}),this.core.heartbeat.on(Kn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(n=>{nt.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.delete(n.topic,n.id))})}catch(n){this.logger.warn(n)}}isInitialized(){if(!this.initialized){const{message:n}=Z("NOT_INITIALIZED",this.name);throw new Error(n)}}}class av extends pd{constructor(n,r){super(n,r),this.core=n,this.logger=r,this.expirations=new Map,this.events=new Kr.EventEmitter,this.name=Ly,this.version=zy,this.cached=[],this.initialized=!1,this.storagePrefix=cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const a=this.formatTarget(i);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(i,a)=>{this.isInitialized();const u=this.formatTarget(i),p={target:u,expiry:a};this.expirations.set(u,p),this.checkExpiry(u,p),this.events.emit(vr.created,{target:u,expiration:p})},this.get=i=>{this.isInitialized();const a=this.formatTarget(i);return this.getExpiration(a)},this.del=i=>{if(this.isInitialized(),this.has(i)){const a=this.formatTarget(i),u=this.getExpiration(a);this.expirations.delete(a),this.events.emit(vr.deleted,{target:a,expiration:u})}},this.on=(i,a)=>{this.events.on(i,a)},this.once=(i,a)=>{this.events.once(i,a)},this.off=(i,a)=>{this.events.off(i,a)},this.removeListener=(i,a)=>{this.events.removeListener(i,a)},this.logger=It.generateChildLogger(r,this.name)}get context(){return It.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(n){if(typeof n=="string")return n3(n);if(typeof n=="number")return i3(n);const{message:r}=Z("UNKNOWN_TYPE",`Target type: ${typeof n}`);throw new Error(r)}async setExpirations(n){await this.core.storage.setItem(this.storageKey,n)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(vr.sync)}async restore(){try{const n=await this.getExpirations();if(typeof n>"u"||!n.length)return;if(this.expirations.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=n,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(n){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(n)}}getExpiration(n){const r=this.expirations.get(n);if(!r){const{message:i}=Z("NO_MATCHING_KEY",`${this.name}: ${n}`);throw this.logger.error(i),new Error(i)}return r}checkExpiry(n,r){const{expiry:i}=r;nt.toMiliseconds(i)-Date.now()<=0&&this.expire(n,r)}expire(n,r){this.expirations.delete(n),this.events.emit(vr.expired,{target:n,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((n,r)=>this.checkExpiry(r,n))}registerEventListeners(){this.core.heartbeat.on(Kn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(vr.created,n=>{const r=vr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:n}),this.persist()}),this.events.on(vr.expired,n=>{const r=vr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:n}),this.persist()}),this.events.on(vr.deleted,n=>{const r=vr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:n}),this.persist()})}isInitialized(){if(!this.initialized){const{message:n}=Z("NOT_INITIALIZED",this.name);throw new Error(n)}}}class cv extends fd{constructor(n,r){super(n,r),this.projectId=n,this.logger=r,this.name=Ko,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async i=>{if(this.verifyDisabled||s3()||!Ip())return;const a=this.getVerifyUrl(i==null?void 0:i.verifyUrl);this.verifyUrl!==a&&this.removeIframe(),this.verifyUrl=a;try{await this.createIframe()}catch(u){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(u)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Fo;try{await this.createIframe()}catch(u){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(u),this.verifyDisabled=!0}}},this.register=async i=>{this.initialized?this.sendPost(i.attestationId):(this.addToQueue(i.attestationId),await this.init())},this.resolve=async i=>{if(this.isDevEnv)return"";const a=this.getVerifyUrl(i==null?void 0:i.verifyUrl);let u;try{u=await this.fetchAttestation(i.attestationId,a)}catch(p){this.logger.info(`failed to resolve attestation: ${i.attestationId} from url: ${a}`),this.logger.info(p),u=await this.fetchAttestation(i.attestationId,Fo)}return u},this.fetchAttestation=async(i,a)=>{this.logger.info(`resolving attestation: ${i} from url: ${a}`);const u=this.startAbortTimer(nt.ONE_SECOND*2),p=await fetch(`${a}/attestation/${i}`,{signal:this.abortController.signal});return clearTimeout(u),p.status===200?await p.json():void 0},this.addToQueue=i=>{this.queue.push(i)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(i=>this.sendPost(i)),this.queue=[])},this.sendPost=i=>{var a;try{if(!this.iframe)return;(a=this.iframe.contentWindow)==null||a.postMessage(i,"*"),this.logger.info(`postMessage sent: ${i} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let i;const a=u=>{u.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",a),i())};await Promise.race([new Promise(u=>{if(document.getElementById(Ko))return u();window.addEventListener("message",a);const p=document.createElement("iframe");p.id=Ko,p.src=`${this.verifyUrl}/${this.projectId}`,p.style.display="none",document.body.append(p),this.iframe=p,i=u}),new Promise((u,p)=>setTimeout(()=>{window.removeEventListener("message",a),p("verify iframe load timeout")},nt.toMiliseconds(nt.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=i=>{let a=i||Vn;return qy.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${Vn}`),a=Vn),a},this.logger=It.generateChildLogger(r,this.name),this.verifyUrl=Vn,this.abortController=new AbortController,this.isDevEnv=o3()&&{VITE_RUNTIME_ENV:"production",VITE_PUBLIC_PATH:"/",VITE_SENTRY_AUTH_TOKEN:"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",VITE_AUTH0_ID:"d2lXoGguxROpIsbBChdHbJzqvwkhPnj6",VITE_SERVER_API_ENDPOINT:"https://api.qna3.ai"}.IS_VITEST}get context(){return It.getLoggerContext(this.logger)}startAbortTimer(n){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),nt.toMiliseconds(n))}}class uv extends dd{constructor(n,r){super(n,r),this.projectId=n,this.logger=r,this.context=Uy,this.registerDeviceToken=async i=>{const{clientId:a,token:u,notificationType:p,enableEncrypted:y=!1}=i,w=`${$y}/${this.projectId}/clients`;await kd(w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:a,type:p,token:u,always_raw:y})})},this.logger=It.generateChildLogger(r,this.context)}}var hv=Object.defineProperty,Ku=Object.getOwnPropertySymbols,lv=Object.prototype.hasOwnProperty,pv=Object.prototype.propertyIsEnumerable,Fu=(o,n,r)=>n in o?hv(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Vu=(o,n)=>{for(var r in n||(n={}))lv.call(n,r)&&Fu(o,r,n[r]);if(Ku)for(var r of Ku(n))pv.call(n,r)&&Fu(o,r,n[r]);return o};class Go extends sd{constructor(n){super(n),this.protocol=Nu,this.version=uy,this.name=Ho,this.events=new Kr.EventEmitter,this.initialized=!1,this.on=(i,a)=>this.events.on(i,a),this.once=(i,a)=>this.events.once(i,a),this.off=(i,a)=>this.events.off(i,a),this.removeListener=(i,a)=>this.events.removeListener(i,a),this.projectId=n==null?void 0:n.projectId,this.relayUrl=(n==null?void 0:n.relayUrl)||ju,this.customStoragePrefix=n!=null&&n.customStoragePrefix?`:${n.customStoragePrefix}`:"";const r=typeof(n==null?void 0:n.logger)<"u"&&typeof(n==null?void 0:n.logger)!="string"?n.logger:It.pino(It.getDefaultLoggerOptions({level:(n==null?void 0:n.logger)||hy.logger}));this.logger=It.generateChildLogger(r,this.name),this.heartbeat=new Kn.HeartBeat,this.crypto=new My(this,this.logger,n==null?void 0:n.keychain),this.history=new ov(this,this.logger),this.expirer=new av(this,this.logger),this.storage=n!=null&&n.storage?n.storage:new uf(Vu(Vu({},ly),n==null?void 0:n.storageOptions)),this.relayer=new ev({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new sv(this,this.logger),this.verify=new cv(this.projectId||"",this.logger),this.echoClient=new uv(this.projectId||"",this.logger)}static async init(n){const r=new Go(n);await r.initialize();const i=await r.crypto.getClientId();return await r.storage.setItem(Cy,i),r}get context(){return It.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(n){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,n),this.logger.error(n.message),n}}}const fv=Go,Gu="wc",Wu=2,Bu="client",Wo=`${Gu}@${Wu}:${Bu}:`,Bo={name:Bu,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Yu="WALLETCONNECT_DEEPLINK_CHOICE",dv="proposal",Qu="Proposal expired",gv="session",us=nt.SEVEN_DAYS,yv="engine",Pi={wc_sessionPropose:{req:{ttl:nt.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:nt.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:nt.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:nt.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:nt.ONE_DAY,prompt:!1,tag:1104},res:{ttl:nt.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:nt.ONE_DAY,prompt:!1,tag:1106},res:{ttl:nt.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:nt.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:nt.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:nt.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:nt.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:nt.ONE_DAY,prompt:!1,tag:1112},res:{ttl:nt.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:nt.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:nt.THIRTY_SECONDS,prompt:!1,tag:1115}}},Yo={min:nt.FIVE_MINUTES,max:nt.SEVEN_DAYS},Vr={idle:"IDLE",active:"ACTIVE"},vv="request",mv=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var wv=Object.defineProperty,_v=Object.defineProperties,bv=Object.getOwnPropertyDescriptors,Zu=Object.getOwnPropertySymbols,Ev=Object.prototype.hasOwnProperty,Dv=Object.prototype.propertyIsEnumerable,Xu=(o,n,r)=>n in o?wv(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,nr=(o,n)=>{for(var r in n||(n={}))Ev.call(n,r)&&Xu(o,r,n[r]);if(Zu)for(var r of Zu(n))Dv.call(n,r)&&Xu(o,r,n[r]);return o},Si=(o,n)=>_v(o,bv(n));class Iv extends yd{constructor(n){super(n),this.name=yv,this.events=new jc,this.initialized=!1,this.ignoredPayloadTypes=[bp],this.requestQueue={state:Vr.idle,queue:[]},this.sessionRequestQueue={state:Vr.idle,queue:[]},this.requestQueueDelay=nt.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Pi)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},nt.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const i=Si(nr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:a,requiredNamespaces:u,optionalNamespaces:p,sessionProperties:y,relays:w}=i;let d=a,_,C=!1;if(d&&(C=this.client.core.pairing.pairings.get(d).active),!d||!C){const{topic:ct,uri:lt}=await this.client.core.pairing.create();d=ct,_=lt}const S=await this.client.core.crypto.generateKeyPair(),z=nr({requiredNamespaces:u,optionalNamespaces:p,relays:w??[{protocol:Ru}],proposer:{publicKey:S,metadata:this.client.metadata}},y&&{sessionProperties:y}),{reject:T,resolve:F,done:et}=pi(nt.FIVE_MINUTES,Qu);if(this.events.once(Re("session_connect"),async({error:ct,session:lt})=>{if(ct)T(ct);else if(lt){lt.self.publicKey=S;const pt=Si(nr({},lt),{requiredNamespaces:lt.requiredNamespaces,optionalNamespaces:lt.optionalNamespaces});await this.client.session.set(lt.topic,pt),await this.setExpiry(lt.topic,lt.expiry),d&&await this.client.core.pairing.updateMetadata({topic:d,metadata:lt.peer.metadata}),F(pt)}}),!d){const{message:ct}=Z("NO_MATCHING_KEY",`connect() pairing topic: ${d}`);throw new Error(ct)}const gt=await this.sendRequest({topic:d,method:"wc_sessionPropose",params:z}),ht=jr(nt.FIVE_MINUTES);return await this.setProposal(gt,nr({id:gt,expiry:ht},z)),{uri:_,approval:et}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:i,relayProtocol:a,namespaces:u,sessionProperties:p}=r,y=this.client.proposal.get(i);let{pairingTopic:w,proposer:d,requiredNamespaces:_,optionalNamespaces:C}=y;w=w||"",Eo(_)||(_=c3(u,"approve()"));const S=await this.client.core.crypto.generateKeyPair(),z=d.publicKey,T=await this.client.core.crypto.generateSharedKey(S,z);w&&i&&(await this.client.core.pairing.updateMetadata({topic:w,metadata:d.metadata}),await this.sendResult({id:i,topic:w,result:{relay:{protocol:a??"irn"},responderPublicKey:S}}),await this.client.proposal.delete(i,Be("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:w}));const F=nr({relay:{protocol:a??"irn"},namespaces:u,requiredNamespaces:_,optionalNamespaces:C,pairingTopic:w,controller:{publicKey:S,metadata:this.client.metadata},expiry:jr(us)},p&&{sessionProperties:p});await this.client.core.relayer.subscribe(T),await this.sendRequest({topic:T,method:"wc_sessionSettle",params:F,throwOnFailedPublish:!0});const et=Si(nr({},F),{topic:T,pairingTopic:w,acknowledged:!1,self:F.controller,peer:{publicKey:d.publicKey,metadata:d.metadata},controller:S});return await this.client.session.set(T,et),await this.setExpiry(T,jr(us)),{topic:T,acknowledged:()=>new Promise(gt=>setTimeout(()=>gt(this.client.session.get(T)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:i,reason:a}=r,{pairingTopic:u}=this.client.proposal.get(i);u&&(await this.sendError(i,u,a),await this.client.proposal.delete(i,Be("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:i,namespaces:a}=r,u=await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:a}}),{done:p,resolve:y,reject:w}=pi();return this.events.once(Re("session_update",u),({error:d})=>{d?w(d):y()}),await this.client.session.update(i,{namespaces:a}),{acknowledged:p}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:i}=r,a=await this.sendRequest({topic:i,method:"wc_sessionExtend",params:{}}),{done:u,resolve:p,reject:y}=pi();return this.events.once(Re("session_extend",a),({error:w})=>{w?y(w):p()}),await this.setExpiry(i,jr(us)),{acknowledged:u}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:i,request:a,topic:u,expiry:p}=r,y=T3(),{done:w,resolve:d,reject:_}=pi(p,"Request expired. Please try again.");return this.events.once(Re("session_request",y),({error:C,result:S})=>{C?_(C):d(S)}),await Promise.all([new Promise(async C=>{await this.sendRequest({clientRpcId:y,topic:u,method:"wc_sessionRequest",params:{request:a,chainId:i},expiry:p,throwOnFailedPublish:!0}).catch(S=>_(S)),this.client.events.emit("session_request_sent",{topic:u,request:a,chainId:i,id:y}),C()}),new Promise(async C=>{const S=await u3(this.client.core.storage,Yu);h3({id:y,topic:u,wcDeepLink:S}),C()}),w()]).then(C=>C[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:i,response:a}=r,{id:u}=a;Dn(a)?await this.sendResult({id:u,topic:i,result:a.result,throwOnFailedPublish:!0}):an(a)&&await this.sendError(u,i,a.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:i}=r;if(this.client.session.keys.includes(i)){const a=await this.sendRequest({topic:i,method:"wc_sessionPing",params:{}}),{done:u,resolve:p,reject:y}=pi();this.events.once(Re("session_ping",a),({error:w})=>{w?y(w):p()}),await u()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:i,event:a,chainId:u}=r;await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:a,chainId:u}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.client.session.keys.includes(i)?(await this.sendRequest({topic:i,method:"wc_sessionDelete",params:Be("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(i)):await this.client.core.pairing.disconnect({topic:i})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>l3(i,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const i=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(u=>{var p,y;return((p=u.peerMetadata)==null?void 0:p.url)&&((y=u.peerMetadata)==null?void 0:y.url)===r.peer.metadata.url&&u.topic&&u.topic!==i.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(u=>this.client.core.pairing.disconnect({topic:u.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(r,i)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Be("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Yu).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===r&&this.deletePendingSessionRequest(u.id,Be("USER_DISCONNECTED"))})},this.deleteProposal=async(r,i)=>{await Promise.all([this.client.proposal.delete(r,Be("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,i,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),a?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(u=>u.id!==r),a&&(this.sessionRequestQueue.state=Vr.idle)},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:i}),this.client.core.expirer.set(r,i)},this.setProposal=async(r,i)=>{await this.client.proposal.set(r,i),this.client.core.expirer.set(r,i.expiry)},this.setPendingSessionRequest=async r=>{const i=Pi.wc_sessionRequest.req.ttl,{id:a,topic:u,params:p,verifyContext:y}=r;await this.client.pendingRequest.set(a,{id:a,topic:u,params:p,verifyContext:y}),i&&this.client.core.expirer.set(a,jr(i))},this.sendRequest=async r=>{const{topic:i,method:a,params:u,expiry:p,relayRpcId:y,clientRpcId:w,throwOnFailedPublish:d}=r,_=Zi(a,u,w);if(Ip()&&mv.includes(a)){const z=di(JSON.stringify(_));this.client.core.verify.register({attestationId:z})}const C=await this.client.core.crypto.encode(i,_),S=Pi[a].req;return p&&(S.ttl=p),y&&(S.id=y),this.client.core.history.set(i,_),d?(S.internal=Si(nr({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,C,S)):this.client.core.relayer.publish(i,C,S).catch(z=>this.client.logger.error(z)),_.id},this.sendResult=async r=>{const{id:i,topic:a,result:u,throwOnFailedPublish:p}=r,y=Po(i,u),w=await this.client.core.crypto.encode(a,y),d=await this.client.core.history.get(a,i),_=Pi[d.request.method].res;p?(_.internal=Si(nr({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(a,w,_)):this.client.core.relayer.publish(a,w,_).catch(C=>this.client.logger.error(C)),await this.client.core.history.resolve(y)},this.sendError=async(r,i,a)=>{const u=Nc(r,a),p=await this.client.core.crypto.encode(i,u),y=await this.client.core.history.get(i,r),w=Pi[y.request.method].res;this.client.core.relayer.publish(i,p,w),await this.client.core.history.resolve(u)},this.cleanup=async()=>{const r=[],i=[];this.client.session.getAll().forEach(a=>{En(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{En(a.expiry)&&i.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...i.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Vr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Vr.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(i=>setTimeout(i,300))}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=Vr.idle},this.processRequest=r=>{const{topic:i,payload:a}=r,u=a.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeRequest(i,a);case"wc_sessionSettle":return this.onSessionSettleRequest(i,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,a);case"wc_sessionExtend":return this.onSessionExtendRequest(i,a);case"wc_sessionPing":return this.onSessionPingRequest(i,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,a);case"wc_sessionRequest":return this.onSessionRequest(i,a);case"wc_sessionEvent":return this.onSessionEventRequest(i,a);default:return this.client.logger.info(`Unsupported request method ${u}`)}},this.onRelayEventResponse=async r=>{const{topic:i,payload:a}=r,u=(await this.client.core.history.get(i,a.id)).request.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeResponse(i,a);case"wc_sessionSettle":return this.onSessionSettleResponse(i,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,a);case"wc_sessionExtend":return this.onSessionExtendResponse(i,a);case"wc_sessionPing":return this.onSessionPingResponse(i,a);case"wc_sessionRequest":return this.onSessionRequestResponse(i,a);default:return this.client.logger.info(`Unsupported response method ${u}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:i}=r,{message:a}=Z("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(r,i)=>{const{params:a,id:u}=i;try{this.isValidConnect(nr({},i.params));const p=jr(nt.FIVE_MINUTES),y=nr({id:u,pairingTopic:r,expiry:p},a);await this.setProposal(u,y);const w=di(JSON.stringify(i)),d=await this.getVerifyContext(w,y.proposer.metadata);this.client.events.emit("session_proposal",{id:u,params:y,verifyContext:d})}catch(p){await this.sendError(u,r,p),this.client.logger.error(p)}},this.onSessionProposeResponse=async(r,i)=>{const{id:a}=i;if(Dn(i)){const{result:u}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:u});const p=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:p});const y=p.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:y});const w=u.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:w});const d=await this.client.core.crypto.generateSharedKey(y,w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:d});const _=await this.client.core.relayer.subscribe(d);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:_}),await this.client.core.pairing.activate({topic:r})}else an(i)&&(await this.client.proposal.delete(a,Be("USER_DISCONNECTED")),this.events.emit(Re("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(r,i)=>{const{id:a,params:u}=i;try{this.isValidSessionSettleRequest(u);const{relay:p,controller:y,expiry:w,namespaces:d,requiredNamespaces:_,optionalNamespaces:C,sessionProperties:S,pairingTopic:z}=i.params,T=nr({topic:r,relay:p,expiry:w,namespaces:d,acknowledged:!0,pairingTopic:z,requiredNamespaces:_,optionalNamespaces:C,controller:y.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:y.publicKey,metadata:y.metadata}},S&&{sessionProperties:S});await this.sendResult({id:i.id,topic:r,result:!0}),this.events.emit(Re("session_connect"),{session:T}),this.cleanupDuplicatePairings(T)}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionSettleResponse=async(r,i)=>{const{id:a}=i;Dn(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Re("session_approve",a),{})):an(i)&&(await this.client.session.delete(r,Be("USER_DISCONNECTED")),this.events.emit(Re("session_approve",a),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{const{params:a,id:u}=i;try{const p=`${r}_session_update`,y=Do.get(p);if(y&&this.isRequestOutOfSync(y,u)){this.client.logger.info(`Discarding out of sync request - ${u}`);return}this.isValidUpdate(nr({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult({id:u,topic:r,result:!0}),this.client.events.emit("session_update",{id:u,topic:r,params:a}),Do.set(p,u)}catch(p){await this.sendError(u,r,p),this.client.logger.error(p)}},this.isRequestOutOfSync=(r,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,i)=>{const{id:a}=i;Dn(i)?this.events.emit(Re("session_update",a),{}):an(i)&&this.events.emit(Re("session_update",a),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{const{id:a}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,jr(us)),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_extend",{id:a,topic:r})}catch(u){await this.sendError(a,r,u),this.client.logger.error(u)}},this.onSessionExtendResponse=(r,i)=>{const{id:a}=i;Dn(i)?this.events.emit(Re("session_extend",a),{}):an(i)&&this.events.emit(Re("session_extend",a),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{const{id:a}=i;try{this.isValidPing({topic:r}),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_ping",{id:a,topic:r})}catch(u){await this.sendError(a,r,u),this.client.logger.error(u)}},this.onSessionPingResponse=(r,i)=>{const{id:a}=i;setTimeout(()=>{Dn(i)?this.events.emit(Re("session_ping",a),{}):an(i)&&this.events.emit(Re("session_ping",a),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{const{id:a}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),await Promise.all([new Promise(u=>{this.client.core.relayer.once(Ve.publish,async()=>{u(await this.deleteSession(r))})}),this.sendResult({id:a,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(u){this.client.logger.error(u)}},this.onSessionRequest=async(r,i)=>{const{id:a,params:u}=i;try{this.isValidRequest(nr({topic:r},u));const p=di(JSON.stringify(Zi("wc_sessionRequest",u,a))),y=this.client.session.get(r),w=await this.getVerifyContext(p,y.peer.metadata),d={id:a,topic:r,params:u,verifyContext:w};await this.setPendingSessionRequest(d),this.addSessionRequestToSessionRequestQueue(d),this.processSessionRequestQueue()}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionRequestResponse=(r,i)=>{const{id:a}=i;Dn(i)?this.events.emit(Re("session_request",a),{result:i.result}):an(i)&&this.events.emit(Re("session_request",a),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{const{id:a,params:u}=i;try{const p=`${r}_session_event_${u.event.name}`,y=Do.get(p);if(y&&this.isRequestOutOfSync(y,a)){this.client.logger.info(`Discarding out of sync request - ${a}`);return}this.isValidEmit(nr({topic:r},u)),this.client.events.emit("session_event",{id:a,topic:r,params:u}),Do.set(p,a)}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Vr.idle,this.processSessionRequestQueue()},nt.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Vr.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Vr.active,this.client.events.emit("session_request",r)}catch(i){this.client.logger.error(i)}},this.onPairingCreated=r=>{if(r.active)return;const i=this.client.proposal.getAll().find(a=>a.pairingTopic===r.topic);i&&this.onSessionProposeRequest(r.topic,Zi("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id))},this.isValidConnect=async r=>{if(!hr(r)){const{message:w}=Z("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(w)}const{pairingTopic:i,requiredNamespaces:a,optionalNamespaces:u,sessionProperties:p,relays:y}=r;if(bn(i)||await this.isValidPairingTopic(i),!p3(y,!0)){const{message:w}=Z("MISSING_OR_INVALID",`connect() relays: ${y}`);throw new Error(w)}!bn(a)&&Eo(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!bn(u)&&Eo(u)!==0&&this.validateNamespaces(u,"optionalNamespaces"),bn(p)||this.validateSessionProps(p,"sessionProperties")},this.validateNamespaces=(r,i)=>{const a=f3(r,"connect()",i);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!hr(r))throw new Error(Z("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:i,namespaces:a,relayProtocol:u,sessionProperties:p}=r;await this.isValidProposalId(i);const y=this.client.proposal.get(i),w=xc(a,"approve()");if(w)throw new Error(w.message);const d=Cp(y.requiredNamespaces,a,"approve()");if(d)throw new Error(d.message);if(!fi(u,!0)){const{message:_}=Z("MISSING_OR_INVALID",`approve() relayProtocol: ${u}`);throw new Error(_)}bn(p)||this.validateSessionProps(p,"sessionProperties")},this.isValidReject=async r=>{if(!hr(r)){const{message:u}=Z("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(u)}const{id:i,reason:a}=r;if(await this.isValidProposalId(i),!d3(a)){const{message:u}=Z("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(u)}},this.isValidSessionSettleRequest=r=>{if(!hr(r)){const{message:d}=Z("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(d)}const{relay:i,controller:a,namespaces:u,expiry:p}=r;if(!g3(i)){const{message:d}=Z("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const y=y3(a,"onSessionSettleRequest()");if(y)throw new Error(y.message);const w=xc(u,"onSessionSettleRequest()");if(w)throw new Error(w.message);if(En(p)){const{message:d}=Z("EXPIRED","onSessionSettleRequest()");throw new Error(d)}},this.isValidUpdate=async r=>{if(!hr(r)){const{message:w}=Z("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(w)}const{topic:i,namespaces:a}=r;await this.isValidSessionTopic(i);const u=this.client.session.get(i),p=xc(a,"update()");if(p)throw new Error(p.message);const y=Cp(u.requiredNamespaces,a,"update()");if(y)throw new Error(y.message)},this.isValidExtend=async r=>{if(!hr(r)){const{message:a}=Z("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:i}=r;await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{if(!hr(r)){const{message:w}=Z("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(w)}const{topic:i,request:a,chainId:u,expiry:p}=r;await this.isValidSessionTopic(i);const{namespaces:y}=this.client.session.get(i);if(!Op(y,u)){const{message:w}=Z("MISSING_OR_INVALID",`request() chainId: ${u}`);throw new Error(w)}if(!v3(a)){const{message:w}=Z("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(w)}if(!m3(y,u,a.method)){const{message:w}=Z("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(w)}if(p&&!w3(p,Yo)){const{message:w}=Z("MISSING_OR_INVALID",`request() expiry: ${p}. Expiry must be a number (in seconds) between ${Yo.min} and ${Yo.max}`);throw new Error(w)}},this.isValidRespond=async r=>{var i;if(!hr(r)){const{message:p}=Z("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(p)}const{topic:a,response:u}=r;try{await this.isValidSessionTopic(a)}catch(p){throw(i=r==null?void 0:r.response)!=null&&i.id&&this.cleanupAfterResponse(r),p}if(!_3(u)){const{message:p}=Z("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(u)}`);throw new Error(p)}},this.isValidPing=async r=>{if(!hr(r)){const{message:a}=Z("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{if(!hr(r)){const{message:y}=Z("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(y)}const{topic:i,event:a,chainId:u}=r;await this.isValidSessionTopic(i);const{namespaces:p}=this.client.session.get(i);if(!Op(p,u)){const{message:y}=Z("MISSING_OR_INVALID",`emit() chainId: ${u}`);throw new Error(y)}if(!b3(a)){const{message:y}=Z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(y)}if(!E3(p,u,a.name)){const{message:y}=Z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(y)}},this.isValidDisconnect=async r=>{if(!hr(r)){const{message:a}=Z("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(r,i)=>{const a={verified:{verifyUrl:i.verifyUrl||Vn,validation:"UNKNOWN",origin:i.url||""}};try{const u=await this.client.core.verify.resolve({attestationId:r,verifyUrl:i.verifyUrl});u&&(a.verified.origin=u.origin,a.verified.isScam=u.isScam,a.verified.validation=u.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.info(u)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(a=>{if(!fi(a,!1)){const{message:u}=Z("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(u)}})}}async isInitialized(){if(!this.initialized){const{message:n}=Z("NOT_INITIALIZED",this.name);throw new Error(n)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ve.message,async n=>{const{topic:r,message:i}=n;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;const a=await this.client.core.crypto.decode(r,i);try{Tc(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Rc(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a})}catch(u){this.client.logger.error(u)}})}registerExpirerEvents(){this.client.core.expirer.on(vr.expired,async n=>{const{topic:r,id:i}=Dp(n.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,Z("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(Di.create,n=>this.onPairingCreated(n))}isValidPairingTopic(n){if(!fi(n,!1)){const{message:r}=Z("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(n)){const{message:r}=Z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(r)}if(En(this.client.core.pairing.pairings.get(n).expiry)){const{message:r}=Z("EXPIRED",`pairing topic: ${n}`);throw new Error(r)}}async isValidSessionTopic(n){if(!fi(n,!1)){const{message:r}=Z("MISSING_OR_INVALID",`session topic should be a string: ${n}`);throw new Error(r)}if(!this.client.session.keys.includes(n)){const{message:r}=Z("NO_MATCHING_KEY",`session topic doesn't exist: ${n}`);throw new Error(r)}if(En(this.client.session.get(n).expiry)){await this.deleteSession(n);const{message:r}=Z("EXPIRED",`session topic: ${n}`);throw new Error(r)}}async isValidSessionOrPairingTopic(n){if(this.client.session.keys.includes(n))await this.isValidSessionTopic(n);else if(this.client.core.pairing.pairings.keys.includes(n))this.isValidPairingTopic(n);else if(fi(n,!1)){const{message:r}=Z("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${n}`);throw new Error(r)}else{const{message:r}=Z("MISSING_OR_INVALID",`session or pairing topic should be a string: ${n}`);throw new Error(r)}}async isValidProposalId(n){if(!D3(n)){const{message:r}=Z("MISSING_OR_INVALID",`proposal id should be a number: ${n}`);throw new Error(r)}if(!this.client.proposal.keys.includes(n)){const{message:r}=Z("NO_MATCHING_KEY",`proposal id doesn't exist: ${n}`);throw new Error(r)}if(En(this.client.proposal.get(n).expiry)){await this.deleteProposal(n);const{message:r}=Z("EXPIRED",`proposal id: ${n}`);throw new Error(r)}}}class Pv extends cs{constructor(n,r){super(n,r,dv,Wo),this.core=n,this.logger=r}}class Sv extends cs{constructor(n,r){super(n,r,gv,Wo),this.core=n,this.logger=r}}class Cv extends cs{constructor(n,r){super(n,r,vv,Wo,i=>i.id),this.core=n,this.logger=r}}let Ov=class Tp extends gd{constructor(n){super(n),this.protocol=Gu,this.version=Wu,this.name=Bo.name,this.events=new Kr.EventEmitter,this.on=(i,a)=>this.events.on(i,a),this.once=(i,a)=>this.events.once(i,a),this.off=(i,a)=>this.events.off(i,a),this.removeListener=(i,a)=>this.events.removeListener(i,a),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(a){throw this.logger.error(a.message),a}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(a){throw this.logger.error(a.message),a}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(a){throw this.logger.error(a.message),a}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(a){throw this.logger.error(a.message),a}},this.update=async i=>{try{return await this.engine.update(i)}catch(a){throw this.logger.error(a.message),a}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(a){throw this.logger.error(a.message),a}},this.request=async i=>{try{return await this.engine.request(i)}catch(a){throw this.logger.error(a.message),a}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(a){throw this.logger.error(a.message),a}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(a){throw this.logger.error(a.message),a}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(a){throw this.logger.error(a.message),a}},this.find=i=>{try{return this.engine.find(i)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=(n==null?void 0:n.name)||Bo.name,this.metadata=(n==null?void 0:n.metadata)||a3();const r=typeof(n==null?void 0:n.logger)<"u"&&typeof(n==null?void 0:n.logger)!="string"?n.logger:It.pino(It.getDefaultLoggerOptions({level:(n==null?void 0:n.logger)||Bo.logger}));this.core=(n==null?void 0:n.core)||new fv(n),this.logger=It.generateChildLogger(r,this.name),this.session=new Sv(this.core,this.logger),this.proposal=new Pv(this.core,this.logger),this.pendingRequest=new Cv(this.core,this.logger),this.engine=new Iv(this)}static async init(n){const r=new Tp(n);return await r.initialize(),r}get context(){return It.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(n){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(n.message),n}}};const Ju="error",xv="wss://relay.walletconnect.com",Av="wc",Nv="universal_provider",th=`${Av}@2:${Nv}:`,Tv="https://rpc.walletconnect.com/v1/",Gr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qo={exports:{}};(function(o,n){(function(){var r,i="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",y="Invalid `variable` option passed into `_.template`",w="__lodash_hash_undefined__",d=500,_="__lodash_placeholder__",C=1,S=2,z=4,T=1,F=2,et=1,gt=2,ht=4,ct=8,lt=16,pt=32,j=64,H=128,B=256,_t=512,rt=30,yt="...",$t=800,Bt=16,A=1,$=2,Lt=3,zt=1/0,Y=9007199254740991,V=17976931348623157e292,K=0/0,G=4294967295,ue=G-1,Ht=G>>>1,zr=[["ary",H],["bind",et],["bindKey",gt],["curry",ct],["curryRight",lt],["flip",_t],["partial",pt],["partialRight",j],["rearg",B]],bt="[object Arguments]",De="[object Array]",R="[object AsyncFunction]",N="[object Boolean]",O="[object Date]",h="[object DOMException]",E="[object Error]",J="[object Function]",at="[object GeneratorFunction]",mt="[object Map]",xt="[object Number]",Nt="[object Null]",Pt="[object Object]",Ie="[object Promise]",me="[object Proxy]",se="[object RegExp]",Rt="[object Set]",Qt="[object String]",Zt="[object Symbol]",oe="[object Undefined]",kt="[object WeakMap]",Xt="[object WeakSet]",At="[object ArrayBuffer]",Kt="[object DataView]",he="[object Float32Array]",qt="[object Float64Array]",Pe="[object Int8Array]",je="[object Int16Array]",He="[object Int32Array]",Ke="[object Uint8Array]",Ue="[object Uint8ClampedArray]",Qe="[object Uint16Array]",ir="[object Uint32Array]",qr=/\b__p \+= '';/g,Ze=/\b(__p \+=) '' \+/g,Wr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hn=/&(?:amp|lt|gt|quot|#39);/g,xn=/[&<>"']/g,le=RegExp(hn.source),re=RegExp(xn.source),pe=/<%-([\s\S]+?)%>/g,fe=/<%([\s\S]+?)%>/g,ae=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Se=/^\w*$/,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,de=/[\\^$.*+?()[\]{}|]/g,Oe=RegExp(de.source),ge=/^\s+/,we=/\s/,ye=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yt=/\{\n\/\* \[wrapped with (.+)\] \*/,xe=/,? & /,Ae=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ra=/[()=,{}\[\]\/\s]/,na=/\\(\\)?/g,ia=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mr=/\w*$/,sa=/^[-+]0x[0-9a-f]+$/i,oa=/^0b[01]+$/i,aa=/^\[object .+?Constructor\]$/,ca=/^0o[0-7]+$/i,ua=/^(?:0|[1-9]\d*)$/,Br=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gn=/($^)/,ha=/['\n\r\u2028\u2029\\]/g,Wn="\uD800-\uDFFF",la="\\u0300-\\u036f",pa="\\ufe20-\\ufe2f",Bn="\\u20d0-\\u20ff",fs=la+pa+Bn,ds="\\u2700-\\u27bf",Or="a-z\\xdf-\\xf6\\xf8-\\xff",fa="\\xac\\xb1\\xd7\\xf7",da="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ga="\\u2000-\\u206f",ya=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gs="A-Z\\xc0-\\xd6\\xd8-\\xde",ys="\\ufe0e\\ufe0f",An=fa+da+ga+ya,xi="['\u2019]",Nn="["+Wn+"]",Ai="["+An+"]",Tn="["+fs+"]",vs="\\d+",va="["+ds+"]",ms="["+Or+"]",ws="[^"+Wn+An+vs+ds+Or+gs+"]",Yn="\uD83C[\uDFFB-\uDFFF]",ma="(?:"+Tn+"|"+Yn+")",_s="[^"+Wn+"]",Qn="(?:\uD83C[\uDDE6-\uDDFF]){2}",ln="[\uD800-\uDBFF][\uDC00-\uDFFF]",lr="["+gs+"]",bs="\\u200d",Es="(?:"+ms+"|"+ws+")",Ur="(?:"+lr+"|"+ws+")",Ds="(?:"+xi+"(?:d|ll|m|re|s|t|ve))?",Is="(?:"+xi+"(?:D|LL|M|RE|S|T|VE))?",Ps=ma+"?",Ss="["+ys+"]?",wa="(?:"+bs+"(?:"+[_s,Qn,ln].join("|")+")"+Ss+Ps+")*",Yr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Cs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Os=Ss+Ps+wa,Zn="(?:"+[va,Qn,ln].join("|")+")"+Os,_a="(?:"+[_s+Tn+"?",Tn,Qn,ln,Nn].join("|")+")",Ni=RegExp(xi,"g"),ba=RegExp(Tn,"g"),Xn=RegExp(Yn+"(?="+Yn+")|"+_a+Os,"g"),xs=RegExp([lr+"?"+ms+"+"+Ds+"(?="+[Ai,lr,"$"].join("|")+")",Ur+"+"+Is+"(?="+[Ai,lr+Es,"$"].join("|")+")",lr+"?"+Es+"+"+Ds,lr+"+"+Is,Cs,Yr,vs,Zn].join("|"),"g"),As=RegExp("["+bs+Wn+fs+ys+"]"),Rn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ns=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ea=-1,Ft={};Ft[he]=Ft[qt]=Ft[Pe]=Ft[je]=Ft[He]=Ft[Ke]=Ft[Ue]=Ft[Qe]=Ft[ir]=!0,Ft[bt]=Ft[De]=Ft[At]=Ft[N]=Ft[Kt]=Ft[O]=Ft[E]=Ft[J]=Ft[mt]=Ft[xt]=Ft[Pt]=Ft[se]=Ft[Rt]=Ft[Qt]=Ft[kt]=!1;var Mt={};Mt[bt]=Mt[De]=Mt[At]=Mt[Kt]=Mt[N]=Mt[O]=Mt[he]=Mt[qt]=Mt[Pe]=Mt[je]=Mt[He]=Mt[mt]=Mt[xt]=Mt[Pt]=Mt[se]=Mt[Rt]=Mt[Qt]=Mt[Zt]=Mt[Ke]=Mt[Ue]=Mt[Qe]=Mt[ir]=!0,Mt[E]=Mt[J]=Mt[kt]=!1;var v={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},k={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Q={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vt=parseFloat,dt=parseInt,Jt=typeof Ci=="object"&&Ci&&Ci.Object===Object&&Ci,Ne=typeof self=="object"&&self&&self.Object===Object&&self,Ct=Jt||Ne||Function("return this")(),Gt=n&&!n.nodeType&&n,_e=Gt&&!0&&o&&!o.nodeType&&o,sr=_e&&_e.exports===Gt,Te=sr&&Jt.process,te=function(){try{var D=_e&&_e.require&&_e.require("util").types;return D||Te&&Te.binding&&Te.binding("util")}catch{}}(),Xe=te&&te.isArrayBuffer,xr=te&&te.isDate,wr=te&&te.isMap,$r=te&&te.isRegExp,Ti=te&&te.isSet,jn=te&&te.isTypedArray;function $e(D,L,x){switch(x.length){case 0:return D.call(L);case 1:return D.call(L,x[0]);case 2:return D.call(L,x[0],x[1]);case 3:return D.call(L,x[0],x[1],x[2])}return D.apply(L,x)}function cm(D,L,x,X){for(var ut=-1,Tt=D==null?0:D.length;++ut<Tt;){var Le=D[ut];L(X,Le,x(Le),D)}return X}function _r(D,L){for(var x=-1,X=D==null?0:D.length;++x<X&&L(D[x],x,D)!==!1;);return D}function um(D,L){for(var x=D==null?0:D.length;x--&&L(D[x],x,D)!==!1;);return D}function yh(D,L){for(var x=-1,X=D==null?0:D.length;++x<X;)if(!L(D[x],x,D))return!1;return!0}function pn(D,L){for(var x=-1,X=D==null?0:D.length,ut=0,Tt=[];++x<X;){var Le=D[x];L(Le,x,D)&&(Tt[ut++]=Le)}return Tt}function Ts(D,L){var x=D==null?0:D.length;return!!x&&Jn(D,L,0)>-1}function Da(D,L,x){for(var X=-1,ut=D==null?0:D.length;++X<ut;)if(x(L,D[X]))return!0;return!1}function ie(D,L){for(var x=-1,X=D==null?0:D.length,ut=Array(X);++x<X;)ut[x]=L(D[x],x,D);return ut}function fn(D,L){for(var x=-1,X=L.length,ut=D.length;++x<X;)D[ut+x]=L[x];return D}function Ia(D,L,x,X){var ut=-1,Tt=D==null?0:D.length;for(X&&Tt&&(x=D[++ut]);++ut<Tt;)x=L(x,D[ut],ut,D);return x}function hm(D,L,x,X){var ut=D==null?0:D.length;for(X&&ut&&(x=D[--ut]);ut--;)x=L(x,D[ut],ut,D);return x}function Pa(D,L){for(var x=-1,X=D==null?0:D.length;++x<X;)if(L(D[x],x,D))return!0;return!1}var lm=Sa("length");function pm(D){return D.split("")}function fm(D){return D.match(Ae)||[]}function vh(D,L,x){var X;return x(D,function(ut,Tt,Le){if(L(ut,Tt,Le))return X=Tt,!1}),X}function Rs(D,L,x,X){for(var ut=D.length,Tt=x+(X?1:-1);X?Tt--:++Tt<ut;)if(L(D[Tt],Tt,D))return Tt;return-1}function Jn(D,L,x){return L===L?Pm(D,L,x):Rs(D,mh,x)}function dm(D,L,x,X){for(var ut=x-1,Tt=D.length;++ut<Tt;)if(X(D[ut],L))return ut;return-1}function mh(D){return D!==D}function wh(D,L){var x=D==null?0:D.length;return x?Oa(D,L)/x:K}function Sa(D){return function(L){return L==null?r:L[D]}}function Ca(D){return function(L){return D==null?r:D[L]}}function _h(D,L,x,X,ut){return ut(D,function(Tt,Le,Wt){x=X?(X=!1,Tt):L(x,Tt,Le,Wt)}),x}function gm(D,L){var x=D.length;for(D.sort(L);x--;)D[x]=D[x].value;return D}function Oa(D,L){for(var x,X=-1,ut=D.length;++X<ut;){var Tt=L(D[X]);Tt!==r&&(x=x===r?Tt:x+Tt)}return x}function xa(D,L){for(var x=-1,X=Array(D);++x<D;)X[x]=L(x);return X}function ym(D,L){return ie(L,function(x){return[x,D[x]]})}function bh(D){return D&&D.slice(0,Ph(D)+1).replace(ge,"")}function pr(D){return function(L){return D(L)}}function Aa(D,L){return ie(L,function(x){return D[x]})}function Ri(D,L){return D.has(L)}function Eh(D,L){for(var x=-1,X=D.length;++x<X&&Jn(L,D[x],0)>-1;);return x}function Dh(D,L){for(var x=D.length;x--&&Jn(L,D[x],0)>-1;);return x}function vm(D,L){for(var x=D.length,X=0;x--;)D[x]===L&&++X;return X}var mm=Ca(v),wm=Ca(I);function _m(D){return"\\"+Q[D]}function bm(D,L){return D==null?r:D[L]}function ti(D){return As.test(D)}function Em(D){return Rn.test(D)}function Dm(D){for(var L,x=[];!(L=D.next()).done;)x.push(L.value);return x}function Na(D){var L=-1,x=Array(D.size);return D.forEach(function(X,ut){x[++L]=[ut,X]}),x}function Ih(D,L){return function(x){return D(L(x))}}function dn(D,L){for(var x=-1,X=D.length,ut=0,Tt=[];++x<X;){var Le=D[x];(Le===L||Le===_)&&(D[x]=_,Tt[ut++]=x)}return Tt}function js(D){var L=-1,x=Array(D.size);return D.forEach(function(X){x[++L]=X}),x}function Im(D){var L=-1,x=Array(D.size);return D.forEach(function(X){x[++L]=[X,X]}),x}function Pm(D,L,x){for(var X=x-1,ut=D.length;++X<ut;)if(D[X]===L)return X;return-1}function Sm(D,L,x){for(var X=x+1;X--;)if(D[X]===L)return X;return X}function ei(D){return ti(D)?Om(D):lm(D)}function Ar(D){return ti(D)?xm(D):pm(D)}function Ph(D){for(var L=D.length;L--&&we.test(D.charAt(L)););return L}var Cm=Ca(k);function Om(D){for(var L=Xn.lastIndex=0;Xn.test(D);)++L;return L}function xm(D){return D.match(Xn)||[]}function Am(D){return D.match(xs)||[]}var Nm=function D(L){L=L==null?Ct:ri.defaults(Ct.Object(),L,ri.pick(Ct,Ns));var x=L.Array,X=L.Date,ut=L.Error,Tt=L.Function,Le=L.Math,Wt=L.Object,Ta=L.RegExp,Tm=L.String,br=L.TypeError,Ls=x.prototype,Rm=Tt.prototype,ni=Wt.prototype,zs=L["__core-js_shared__"],qs=Rm.toString,Ut=ni.hasOwnProperty,jm=0,Sh=function(){var t=/[^.]+$/.exec(zs&&zs.keys&&zs.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Us=ni.toString,Lm=qs.call(Wt),zm=Ct._,qm=Ta("^"+qs.call(Ut).replace(de,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$s=sr?L.Buffer:r,gn=L.Symbol,ks=L.Uint8Array,Ch=$s?$s.allocUnsafe:r,Ms=Ih(Wt.getPrototypeOf,Wt),Oh=Wt.create,xh=ni.propertyIsEnumerable,Hs=Ls.splice,Ah=gn?gn.isConcatSpreadable:r,ji=gn?gn.iterator:r,Ln=gn?gn.toStringTag:r,Ks=function(){try{var t=kn(Wt,"defineProperty");return t({},"",{}),t}catch{}}(),Um=L.clearTimeout!==Ct.clearTimeout&&L.clearTimeout,$m=X&&X.now!==Ct.Date.now&&X.now,km=L.setTimeout!==Ct.setTimeout&&L.setTimeout,Fs=Le.ceil,Vs=Le.floor,Ra=Wt.getOwnPropertySymbols,Mm=$s?$s.isBuffer:r,Nh=L.isFinite,Hm=Ls.join,Km=Ih(Wt.keys,Wt),ze=Le.max,Ge=Le.min,Fm=X.now,Vm=L.parseInt,Th=Le.random,Gm=Ls.reverse,ja=kn(L,"DataView"),Li=kn(L,"Map"),La=kn(L,"Promise"),ii=kn(L,"Set"),zi=kn(L,"WeakMap"),qi=kn(Wt,"create"),Gs=zi&&new zi,si={},Wm=Mn(ja),Bm=Mn(Li),Ym=Mn(La),Qm=Mn(ii),Zm=Mn(zi),Ws=gn?gn.prototype:r,Ui=Ws?Ws.valueOf:r,Rh=Ws?Ws.toString:r;function f(t){if(ve(t)&&!ft(t)&&!(t instanceof St)){if(t instanceof Er)return t;if(Ut.call(t,"__wrapped__"))return jl(t)}return new Er(t)}var oi=function(){function t(){}return function(e){if(!ce(e))return{};if(Oh)return Oh(e);t.prototype=e;var s=new t;return t.prototype=r,s}}();function Bs(){}function Er(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}f.templateSettings={escape:pe,evaluate:fe,interpolate:ae,variable:"",imports:{_:f}},f.prototype=Bs.prototype,f.prototype.constructor=f,Er.prototype=oi(Bs.prototype),Er.prototype.constructor=Er;function St(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function Xm(){var t=new St(this.__wrapped__);return t.__actions__=or(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=or(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=or(this.__views__),t}function Jm(){if(this.__filtered__){var t=new St(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function tw(){var t=this.__wrapped__.value(),e=this.__dir__,s=ft(t),c=e<0,l=s?t.length:0,g=p_(0,l,this.__views__),m=g.start,b=g.end,P=b-m,q=c?b:m-1,U=this.__iteratees__,M=U.length,W=0,tt=Ge(P,this.__takeCount__);if(!s||!c&&l==P&&tt==P)return nl(t,this.__actions__);var st=[];t:for(;P--&&W<tt;){q+=e;for(var wt=-1,ot=t[q];++wt<M;){var Dt=U[wt],Ot=Dt.iteratee,gr=Dt.type,er=Ot(ot);if(gr==$)ot=er;else if(!er){if(gr==A)continue t;break t}}st[W++]=ot}return st}St.prototype=oi(Bs.prototype),St.prototype.constructor=St;function zn(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var c=t[e];this.set(c[0],c[1])}}function ew(){this.__data__=qi?qi(null):{},this.size=0}function rw(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function nw(t){var e=this.__data__;if(qi){var s=e[t];return s===w?r:s}return Ut.call(e,t)?e[t]:r}function iw(t){var e=this.__data__;return qi?e[t]!==r:Ut.call(e,t)}function sw(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=qi&&e===r?w:e,this}zn.prototype.clear=ew,zn.prototype.delete=rw,zn.prototype.get=nw,zn.prototype.has=iw,zn.prototype.set=sw;function Qr(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var c=t[e];this.set(c[0],c[1])}}function ow(){this.__data__=[],this.size=0}function aw(t){var e=this.__data__,s=Ys(e,t);if(s<0)return!1;var c=e.length-1;return s==c?e.pop():Hs.call(e,s,1),--this.size,!0}function cw(t){var e=this.__data__,s=Ys(e,t);return s<0?r:e[s][1]}function uw(t){return Ys(this.__data__,t)>-1}function hw(t,e){var s=this.__data__,c=Ys(s,t);return c<0?(++this.size,s.push([t,e])):s[c][1]=e,this}Qr.prototype.clear=ow,Qr.prototype.delete=aw,Qr.prototype.get=cw,Qr.prototype.has=uw,Qr.prototype.set=hw;function Zr(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var c=t[e];this.set(c[0],c[1])}}function lw(){this.size=0,this.__data__={hash:new zn,map:new(Li||Qr),string:new zn}}function pw(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e}function fw(t){return ao(this,t).get(t)}function dw(t){return ao(this,t).has(t)}function gw(t,e){var s=ao(this,t),c=s.size;return s.set(t,e),this.size+=s.size==c?0:1,this}Zr.prototype.clear=lw,Zr.prototype.delete=pw,Zr.prototype.get=fw,Zr.prototype.has=dw,Zr.prototype.set=gw;function qn(t){var e=-1,s=t==null?0:t.length;for(this.__data__=new Zr;++e<s;)this.add(t[e])}function yw(t){return this.__data__.set(t,w),this}function vw(t){return this.__data__.has(t)}qn.prototype.add=qn.prototype.push=yw,qn.prototype.has=vw;function Nr(t){var e=this.__data__=new Qr(t);this.size=e.size}function mw(){this.__data__=new Qr,this.size=0}function ww(t){var e=this.__data__,s=e.delete(t);return this.size=e.size,s}function _w(t){return this.__data__.get(t)}function bw(t){return this.__data__.has(t)}function Ew(t,e){var s=this.__data__;if(s instanceof Qr){var c=s.__data__;if(!Li||c.length<a-1)return c.push([t,e]),this.size=++s.size,this;s=this.__data__=new Zr(c)}return s.set(t,e),this.size=s.size,this}Nr.prototype.clear=mw,Nr.prototype.delete=ww,Nr.prototype.get=_w,Nr.prototype.has=bw,Nr.prototype.set=Ew;function jh(t,e){var s=ft(t),c=!s&&Hn(t),l=!s&&!c&&_n(t),g=!s&&!c&&!l&&hi(t),m=s||c||l||g,b=m?xa(t.length,Tm):[],P=b.length;for(var q in t)(e||Ut.call(t,q))&&!(m&&(q=="length"||l&&(q=="offset"||q=="parent")||g&&(q=="buffer"||q=="byteLength"||q=="byteOffset")||en(q,P)))&&b.push(q);return b}function Lh(t){var e=t.length;return e?t[Ga(0,e-1)]:r}function Dw(t,e){return co(or(t),Un(e,0,t.length))}function Iw(t){return co(or(t))}function za(t,e,s){(s!==r&&!Tr(t[e],s)||s===r&&!(e in t))&&Xr(t,e,s)}function $i(t,e,s){var c=t[e];(!(Ut.call(t,e)&&Tr(c,s))||s===r&&!(e in t))&&Xr(t,e,s)}function Ys(t,e){for(var s=t.length;s--;)if(Tr(t[s][0],e))return s;return-1}function Pw(t,e,s,c){return yn(t,function(l,g,m){e(c,l,s(l),m)}),c}function zh(t,e){return t&&Mr(e,ke(e),t)}function Sw(t,e){return t&&Mr(e,cr(e),t)}function Xr(t,e,s){e=="__proto__"&&Ks?Ks(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s}function qa(t,e){for(var s=-1,c=e.length,l=x(c),g=t==null;++s<c;)l[s]=g?r:vc(t,e[s]);return l}function Un(t,e,s){return t===t&&(s!==r&&(t=t<=s?t:s),e!==r&&(t=t>=e?t:e)),t}function Dr(t,e,s,c,l,g){var m,b=e&C,P=e&S,q=e&z;if(s&&(m=l?s(t,c,l,g):s(t)),m!==r)return m;if(!ce(t))return t;var U=ft(t);if(U){if(m=d_(t),!b)return or(t,m)}else{var M=We(t),W=M==J||M==at;if(_n(t))return ol(t,b);if(M==Pt||M==bt||W&&!l){if(m=P||W?{}:Pl(t),!b)return P?n_(t,Sw(m,t)):r_(t,zh(m,t))}else{if(!Mt[M])return l?t:{};m=g_(t,M,b)}}g||(g=new Nr);var tt=g.get(t);if(tt)return tt;g.set(t,m),tp(t)?t.forEach(function(ot){m.add(Dr(ot,e,s,ot,t,g))}):Xl(t)&&t.forEach(function(ot,Dt){m.set(Dt,Dr(ot,e,s,Dt,t,g))});var st=q?P?nc:rc:P?cr:ke,wt=U?r:st(t);return _r(wt||t,function(ot,Dt){wt&&(Dt=ot,ot=t[Dt]),$i(m,Dt,Dr(ot,e,s,Dt,t,g))}),m}function Cw(t){var e=ke(t);return function(s){return qh(s,t,e)}}function qh(t,e,s){var c=s.length;if(t==null)return!c;for(t=Wt(t);c--;){var l=s[c],g=e[l],m=t[l];if(m===r&&!(l in t)||!g(m))return!1}return!0}function Uh(t,e,s){if(typeof t!="function")throw new br(p);return Gi(function(){t.apply(r,s)},e)}function ki(t,e,s,c){var l=-1,g=Ts,m=!0,b=t.length,P=[],q=e.length;if(!b)return P;s&&(e=ie(e,pr(s))),c?(g=Da,m=!1):e.length>=a&&(g=Ri,m=!1,e=new qn(e));t:for(;++l<b;){var U=t[l],M=s==null?U:s(U);if(U=c||U!==0?U:0,m&&M===M){for(var W=q;W--;)if(e[W]===M)continue t;P.push(U)}else g(e,M,c)||P.push(U)}return P}var yn=ll(kr),$h=ll($a,!0);function Ow(t,e){var s=!0;return yn(t,function(c,l,g){return s=!!e(c,l,g),s}),s}function Qs(t,e,s){for(var c=-1,l=t.length;++c<l;){var g=t[c],m=e(g);if(m!=null&&(b===r?m===m&&!dr(m):s(m,b)))var b=m,P=g}return P}function xw(t,e,s,c){var l=t.length;for(s=vt(s),s<0&&(s=-s>l?0:l+s),c=c===r||c>l?l:vt(c),c<0&&(c+=l),c=s>c?0:rp(c);s<c;)t[s++]=e;return t}function kh(t,e){var s=[];return yn(t,function(c,l,g){e(c,l,g)&&s.push(c)}),s}function Fe(t,e,s,c,l){var g=-1,m=t.length;for(s||(s=v_),l||(l=[]);++g<m;){var b=t[g];e>0&&s(b)?e>1?Fe(b,e-1,s,c,l):fn(l,b):c||(l[l.length]=b)}return l}var Ua=pl(),Mh=pl(!0);function kr(t,e){return t&&Ua(t,e,ke)}function $a(t,e){return t&&Mh(t,e,ke)}function Zs(t,e){return pn(e,function(s){return rn(t[s])})}function $n(t,e){e=mn(e,t);for(var s=0,c=e.length;t!=null&&s<c;)t=t[Hr(e[s++])];return s&&s==c?t:r}function Hh(t,e,s){var c=e(t);return ft(t)?c:fn(c,s(t))}function Je(t){return t==null?t===r?oe:Nt:Ln&&Ln in Wt(t)?l_(t):I_(t)}function ka(t,e){return t>e}function Aw(t,e){return t!=null&&Ut.call(t,e)}function Nw(t,e){return t!=null&&e in Wt(t)}function Tw(t,e,s){return t>=Ge(e,s)&&t<ze(e,s)}function Ma(t,e,s){for(var c=s?Da:Ts,l=t[0].length,g=t.length,m=g,b=x(g),P=1/0,q=[];m--;){var U=t[m];m&&e&&(U=ie(U,pr(e))),P=Ge(U.length,P),b[m]=!s&&(e||l>=120&&U.length>=120)?new qn(m&&U):r}U=t[0];var M=-1,W=b[0];t:for(;++M<l&&q.length<P;){var tt=U[M],st=e?e(tt):tt;if(tt=s||tt!==0?tt:0,!(W?Ri(W,st):c(q,st,s))){for(m=g;--m;){var wt=b[m];if(!(wt?Ri(wt,st):c(t[m],st,s)))continue t}W&&W.push(st),q.push(tt)}}return q}function Rw(t,e,s,c){return kr(t,function(l,g,m){e(c,s(l),g,m)}),c}function Mi(t,e,s){e=mn(e,t),t=xl(t,e);var c=t==null?t:t[Hr(Pr(e))];return c==null?r:$e(c,t,s)}function Kh(t){return ve(t)&&Je(t)==bt}function jw(t){return ve(t)&&Je(t)==At}function Lw(t){return ve(t)&&Je(t)==O}function Hi(t,e,s,c,l){return t===e?!0:t==null||e==null||!ve(t)&&!ve(e)?t!==t&&e!==e:zw(t,e,s,c,Hi,l)}function zw(t,e,s,c,l,g){var m=ft(t),b=ft(e),P=m?De:We(t),q=b?De:We(e);P=P==bt?Pt:P,q=q==bt?Pt:q;var U=P==Pt,M=q==Pt,W=P==q;if(W&&_n(t)){if(!_n(e))return!1;m=!0,U=!1}if(W&&!U)return g||(g=new Nr),m||hi(t)?El(t,e,s,c,l,g):u_(t,e,P,s,c,l,g);if(!(s&T)){var tt=U&&Ut.call(t,"__wrapped__"),st=M&&Ut.call(e,"__wrapped__");if(tt||st){var wt=tt?t.value():t,ot=st?e.value():e;return g||(g=new Nr),l(wt,ot,s,c,g)}}return W?(g||(g=new Nr),h_(t,e,s,c,l,g)):!1}function qw(t){return ve(t)&&We(t)==mt}function Ha(t,e,s,c){var l=s.length,g=l,m=!c;if(t==null)return!g;for(t=Wt(t);l--;){var b=s[l];if(m&&b[2]?b[1]!==t[b[0]]:!(b[0]in t))return!1}for(;++l<g;){b=s[l];var P=b[0],q=t[P],U=b[1];if(m&&b[2]){if(q===r&&!(P in t))return!1}else{var M=new Nr;if(c)var W=c(q,U,P,t,e,M);if(!(W===r?Hi(U,q,T|F,c,M):W))return!1}}return!0}function Fh(t){if(!ce(t)||w_(t))return!1;var e=rn(t)?qm:aa;return e.test(Mn(t))}function Uw(t){return ve(t)&&Je(t)==se}function $w(t){return ve(t)&&We(t)==Rt}function kw(t){return ve(t)&&go(t.length)&&!!Ft[Je(t)]}function Vh(t){return typeof t=="function"?t:t==null?ur:typeof t=="object"?ft(t)?Bh(t[0],t[1]):Wh(t):fp(t)}function Ka(t){if(!Vi(t))return Km(t);var e=[];for(var s in Wt(t))Ut.call(t,s)&&s!="constructor"&&e.push(s);return e}function Mw(t){if(!ce(t))return D_(t);var e=Vi(t),s=[];for(var c in t)c=="constructor"&&(e||!Ut.call(t,c))||s.push(c);return s}function Fa(t,e){return t<e}function Gh(t,e){var s=-1,c=ar(t)?x(t.length):[];return yn(t,function(l,g,m){c[++s]=e(l,g,m)}),c}function Wh(t){var e=sc(t);return e.length==1&&e[0][2]?Cl(e[0][0],e[0][1]):function(s){return s===t||Ha(s,t,e)}}function Bh(t,e){return ac(t)&&Sl(e)?Cl(Hr(t),e):function(s){var c=vc(s,t);return c===r&&c===e?mc(s,t):Hi(e,c,T|F)}}function Xs(t,e,s,c,l){t!==e&&Ua(e,function(g,m){if(l||(l=new Nr),ce(g))Hw(t,e,m,s,Xs,c,l);else{var b=c?c(uc(t,m),g,m+"",t,e,l):r;b===r&&(b=g),za(t,m,b)}},cr)}function Hw(t,e,s,c,l,g,m){var b=uc(t,s),P=uc(e,s),q=m.get(P);if(q){za(t,s,q);return}var U=g?g(b,P,s+"",t,e,m):r,M=U===r;if(M){var W=ft(P),tt=!W&&_n(P),st=!W&&!tt&&hi(P);U=P,W||tt||st?ft(b)?U=b:be(b)?U=or(b):tt?(M=!1,U=ol(P,!0)):st?(M=!1,U=al(P,!0)):U=[]:Wi(P)||Hn(P)?(U=b,Hn(b)?U=np(b):(!ce(b)||rn(b))&&(U=Pl(P))):M=!1}M&&(m.set(P,U),l(U,P,c,g,m),m.delete(P)),za(t,s,U)}function Yh(t,e){var s=t.length;if(s)return e+=e<0?s:0,en(e,s)?t[e]:r}function Qh(t,e,s){e.length?e=ie(e,function(g){return ft(g)?function(m){return $n(m,g.length===1?g[0]:g)}:g}):e=[ur];var c=-1;e=ie(e,pr(it()));var l=Gh(t,function(g,m,b){var P=ie(e,function(q){return q(g)});return{criteria:P,index:++c,value:g}});return gm(l,function(g,m){return e_(g,m,s)})}function Kw(t,e){return Zh(t,e,function(s,c){return mc(t,c)})}function Zh(t,e,s){for(var c=-1,l=e.length,g={};++c<l;){var m=e[c],b=$n(t,m);s(b,m)&&Ki(g,mn(m,t),b)}return g}function Fw(t){return function(e){return $n(e,t)}}function Va(t,e,s,c){var l=c?dm:Jn,g=-1,m=e.length,b=t;for(t===e&&(e=or(e)),s&&(b=ie(t,pr(s)));++g<m;)for(var P=0,q=e[g],U=s?s(q):q;(P=l(b,U,P,c))>-1;)b!==t&&Hs.call(b,P,1),Hs.call(t,P,1);return t}function Xh(t,e){for(var s=t?e.length:0,c=s-1;s--;){var l=e[s];if(s==c||l!==g){var g=l;en(l)?Hs.call(t,l,1):Ya(t,l)}}return t}function Ga(t,e){return t+Vs(Th()*(e-t+1))}function Vw(t,e,s,c){for(var l=-1,g=ze(Fs((e-t)/(s||1)),0),m=x(g);g--;)m[c?g:++l]=t,t+=s;return m}function Wa(t,e){var s="";if(!t||e<1||e>Y)return s;do e%2&&(s+=t),e=Vs(e/2),e&&(t+=t);while(e);return s}function Et(t,e){return hc(Ol(t,e,ur),t+"")}function Gw(t){return Lh(li(t))}function Ww(t,e){var s=li(t);return co(s,Un(e,0,s.length))}function Ki(t,e,s,c){if(!ce(t))return t;e=mn(e,t);for(var l=-1,g=e.length,m=g-1,b=t;b!=null&&++l<g;){var P=Hr(e[l]),q=s;if(P==="__proto__"||P==="constructor"||P==="prototype")return t;if(l!=m){var U=b[P];q=c?c(U,P,b):r,q===r&&(q=ce(U)?U:en(e[l+1])?[]:{})}$i(b,P,q),b=b[P]}return t}var Jh=Gs?function(t,e){return Gs.set(t,e),t}:ur,Bw=Ks?function(t,e){return Ks(t,"toString",{configurable:!0,enumerable:!1,value:_c(e),writable:!0})}:ur;function Yw(t){return co(li(t))}function Ir(t,e,s){var c=-1,l=t.length;e<0&&(e=-e>l?0:l+e),s=s>l?l:s,s<0&&(s+=l),l=e>s?0:s-e>>>0,e>>>=0;for(var g=x(l);++c<l;)g[c]=t[c+e];return g}function Qw(t,e){var s;return yn(t,function(c,l,g){return s=e(c,l,g),!s}),!!s}function Js(t,e,s){var c=0,l=t==null?c:t.length;if(typeof e=="number"&&e===e&&l<=Ht){for(;c<l;){var g=c+l>>>1,m=t[g];m!==null&&!dr(m)&&(s?m<=e:m<e)?c=g+1:l=g}return l}return Ba(t,e,ur,s)}function Ba(t,e,s,c){var l=0,g=t==null?0:t.length;if(g===0)return 0;e=s(e);for(var m=e!==e,b=e===null,P=dr(e),q=e===r;l<g;){var U=Vs((l+g)/2),M=s(t[U]),W=M!==r,tt=M===null,st=M===M,wt=dr(M);if(m)var ot=c||st;else q?ot=st&&(c||W):b?ot=st&&W&&(c||!tt):P?ot=st&&W&&!tt&&(c||!wt):tt||wt?ot=!1:ot=c?M<=e:M<e;ot?l=U+1:g=U}return Ge(g,ue)}function tl(t,e){for(var s=-1,c=t.length,l=0,g=[];++s<c;){var m=t[s],b=e?e(m):m;if(!s||!Tr(b,P)){var P=b;g[l++]=m===0?0:m}}return g}function el(t){return typeof t=="number"?t:dr(t)?K:+t}function fr(t){if(typeof t=="string")return t;if(ft(t))return ie(t,fr)+"";if(dr(t))return Rh?Rh.call(t):"";var e=t+"";return e=="0"&&1/t==-zt?"-0":e}function vn(t,e,s){var c=-1,l=Ts,g=t.length,m=!0,b=[],P=b;if(s)m=!1,l=Da;else if(g>=a){var q=e?null:a_(t);if(q)return js(q);m=!1,l=Ri,P=new qn}else P=e?[]:b;t:for(;++c<g;){var U=t[c],M=e?e(U):U;if(U=s||U!==0?U:0,m&&M===M){for(var W=P.length;W--;)if(P[W]===M)continue t;e&&P.push(M),b.push(U)}else l(P,M,s)||(P!==b&&P.push(M),b.push(U))}return b}function Ya(t,e){return e=mn(e,t),t=xl(t,e),t==null||delete t[Hr(Pr(e))]}function rl(t,e,s,c){return Ki(t,e,s($n(t,e)),c)}function to(t,e,s,c){for(var l=t.length,g=c?l:-1;(c?g--:++g<l)&&e(t[g],g,t););return s?Ir(t,c?0:g,c?g+1:l):Ir(t,c?g+1:0,c?l:g)}function nl(t,e){var s=t;return s instanceof St&&(s=s.value()),Ia(e,function(c,l){return l.func.apply(l.thisArg,fn([c],l.args))},s)}function Qa(t,e,s){var c=t.length;if(c<2)return c?vn(t[0]):[];for(var l=-1,g=x(c);++l<c;)for(var m=t[l],b=-1;++b<c;)b!=l&&(g[l]=ki(g[l]||m,t[b],e,s));return vn(Fe(g,1),e,s)}function il(t,e,s){for(var c=-1,l=t.length,g=e.length,m={};++c<l;){var b=c<g?e[c]:r;s(m,t[c],b)}return m}function Za(t){return be(t)?t:[]}function Xa(t){return typeof t=="function"?t:ur}function mn(t,e){return ft(t)?t:ac(t,e)?[t]:Rl(jt(t))}var Zw=Et;function wn(t,e,s){var c=t.length;return s=s===r?c:s,!e&&s>=c?t:Ir(t,e,s)}var sl=Um||function(t){return Ct.clearTimeout(t)};function ol(t,e){if(e)return t.slice();var s=t.length,c=Ch?Ch(s):new t.constructor(s);return t.copy(c),c}function Ja(t){var e=new t.constructor(t.byteLength);return new ks(e).set(new ks(t)),e}function Xw(t,e){var s=e?Ja(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.byteLength)}function Jw(t){var e=new t.constructor(t.source,mr.exec(t));return e.lastIndex=t.lastIndex,e}function t_(t){return Ui?Wt(Ui.call(t)):{}}function al(t,e){var s=e?Ja(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}function cl(t,e){if(t!==e){var s=t!==r,c=t===null,l=t===t,g=dr(t),m=e!==r,b=e===null,P=e===e,q=dr(e);if(!b&&!q&&!g&&t>e||g&&m&&P&&!b&&!q||c&&m&&P||!s&&P||!l)return 1;if(!c&&!g&&!q&&t<e||q&&s&&l&&!c&&!g||b&&s&&l||!m&&l||!P)return-1}return 0}function e_(t,e,s){for(var c=-1,l=t.criteria,g=e.criteria,m=l.length,b=s.length;++c<m;){var P=cl(l[c],g[c]);if(P){if(c>=b)return P;var q=s[c];return P*(q=="desc"?-1:1)}}return t.index-e.index}function ul(t,e,s,c){for(var l=-1,g=t.length,m=s.length,b=-1,P=e.length,q=ze(g-m,0),U=x(P+q),M=!c;++b<P;)U[b]=e[b];for(;++l<m;)(M||l<g)&&(U[s[l]]=t[l]);for(;q--;)U[b++]=t[l++];return U}function hl(t,e,s,c){for(var l=-1,g=t.length,m=-1,b=s.length,P=-1,q=e.length,U=ze(g-b,0),M=x(U+q),W=!c;++l<U;)M[l]=t[l];for(var tt=l;++P<q;)M[tt+P]=e[P];for(;++m<b;)(W||l<g)&&(M[tt+s[m]]=t[l++]);return M}function or(t,e){var s=-1,c=t.length;for(e||(e=x(c));++s<c;)e[s]=t[s];return e}function Mr(t,e,s,c){var l=!s;s||(s={});for(var g=-1,m=e.length;++g<m;){var b=e[g],P=c?c(s[b],t[b],b,s,t):r;P===r&&(P=t[b]),l?Xr(s,b,P):$i(s,b,P)}return s}function r_(t,e){return Mr(t,oc(t),e)}function n_(t,e){return Mr(t,Dl(t),e)}function eo(t,e){return function(s,c){var l=ft(s)?cm:Pw,g=e?e():{};return l(s,t,it(c,2),g)}}function ai(t){return Et(function(e,s){var c=-1,l=s.length,g=l>1?s[l-1]:r,m=l>2?s[2]:r;for(g=t.length>3&&typeof g=="function"?(l--,g):r,m&&tr(s[0],s[1],m)&&(g=l<3?r:g,l=1),e=Wt(e);++c<l;){var b=s[c];b&&t(e,b,c,g)}return e})}function ll(t,e){return function(s,c){if(s==null)return s;if(!ar(s))return t(s,c);for(var l=s.length,g=e?l:-1,m=Wt(s);(e?g--:++g<l)&&c(m[g],g,m)!==!1;);return s}}function pl(t){return function(e,s,c){for(var l=-1,g=Wt(e),m=c(e),b=m.length;b--;){var P=m[t?b:++l];if(s(g[P],P,g)===!1)break}return e}}function i_(t,e,s){var c=e&et,l=Fi(t);function g(){var m=this&&this!==Ct&&this instanceof g?l:t;return m.apply(c?s:this,arguments)}return g}function fl(t){return function(e){e=jt(e);var s=ti(e)?Ar(e):r,c=s?s[0]:e.charAt(0),l=s?wn(s,1).join(""):e.slice(1);return c[t]()+l}}function ci(t){return function(e){return Ia(lp(hp(e).replace(Ni,"")),t,"")}}function Fi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var s=oi(t.prototype),c=t.apply(s,e);return ce(c)?c:s}}function s_(t,e,s){var c=Fi(t);function l(){for(var g=arguments.length,m=x(g),b=g,P=ui(l);b--;)m[b]=arguments[b];var q=g<3&&m[0]!==P&&m[g-1]!==P?[]:dn(m,P);if(g-=q.length,g<s)return ml(t,e,ro,l.placeholder,r,m,q,r,r,s-g);var U=this&&this!==Ct&&this instanceof l?c:t;return $e(U,this,m)}return l}function dl(t){return function(e,s,c){var l=Wt(e);if(!ar(e)){var g=it(s,3);e=ke(e),s=function(b){return g(l[b],b,l)}}var m=t(e,s,c);return m>-1?l[g?e[m]:m]:r}}function gl(t){return tn(function(e){var s=e.length,c=s,l=Er.prototype.thru;for(t&&e.reverse();c--;){var g=e[c];if(typeof g!="function")throw new br(p);if(l&&!m&&oo(g)=="wrapper")var m=new Er([],!0)}for(c=m?c:s;++c<s;){g=e[c];var b=oo(g),P=b=="wrapper"?ic(g):r;P&&cc(P[0])&&P[1]==(H|ct|pt|B)&&!P[4].length&&P[9]==1?m=m[oo(P[0])].apply(m,P[3]):m=g.length==1&&cc(g)?m[b]():m.thru(g)}return function(){var q=arguments,U=q[0];if(m&&q.length==1&&ft(U))return m.plant(U).value();for(var M=0,W=s?e[M].apply(this,q):U;++M<s;)W=e[M].call(this,W);return W}})}function ro(t,e,s,c,l,g,m,b,P,q){var U=e&H,M=e&et,W=e&gt,tt=e&(ct|lt),st=e&_t,wt=W?r:Fi(t);function ot(){for(var Dt=arguments.length,Ot=x(Dt),gr=Dt;gr--;)Ot[gr]=arguments[gr];if(tt)var er=ui(ot),yr=vm(Ot,er);if(c&&(Ot=ul(Ot,c,l,tt)),g&&(Ot=hl(Ot,g,m,tt)),Dt-=yr,tt&&Dt<q){var Ee=dn(Ot,er);return ml(t,e,ro,ot.placeholder,s,Ot,Ee,b,P,q-Dt)}var Rr=M?s:this,sn=W?Rr[t]:t;return Dt=Ot.length,b?Ot=P_(Ot,b):st&&Dt>1&&Ot.reverse(),U&&P<Dt&&(Ot.length=P),this&&this!==Ct&&this instanceof ot&&(sn=wt||Fi(sn)),sn.apply(Rr,Ot)}return ot}function yl(t,e){return function(s,c){return Rw(s,t,e(c),{})}}function no(t,e){return function(s,c){var l;if(s===r&&c===r)return e;if(s!==r&&(l=s),c!==r){if(l===r)return c;typeof s=="string"||typeof c=="string"?(s=fr(s),c=fr(c)):(s=el(s),c=el(c)),l=t(s,c)}return l}}function tc(t){return tn(function(e){return e=ie(e,pr(it())),Et(function(s){var c=this;return t(e,function(l){return $e(l,c,s)})})})}function io(t,e){e=e===r?" ":fr(e);var s=e.length;if(s<2)return s?Wa(e,t):e;var c=Wa(e,Fs(t/ei(e)));return ti(e)?wn(Ar(c),0,t).join(""):c.slice(0,t)}function o_(t,e,s,c){var l=e&et,g=Fi(t);function m(){for(var b=-1,P=arguments.length,q=-1,U=c.length,M=x(U+P),W=this&&this!==Ct&&this instanceof m?g:t;++q<U;)M[q]=c[q];for(;P--;)M[q++]=arguments[++b];return $e(W,l?s:this,M)}return m}function vl(t){return function(e,s,c){return c&&typeof c!="number"&&tr(e,s,c)&&(s=c=r),e=nn(e),s===r?(s=e,e=0):s=nn(s),c=c===r?e<s?1:-1:nn(c),Vw(e,s,c,t)}}function so(t){return function(e,s){return typeof e=="string"&&typeof s=="string"||(e=Sr(e),s=Sr(s)),t(e,s)}}function ml(t,e,s,c,l,g,m,b,P,q){var U=e&ct,M=U?m:r,W=U?r:m,tt=U?g:r,st=U?r:g;e|=U?pt:j,e&=~(U?j:pt),e&ht||(e&=~(et|gt));var wt=[t,e,l,tt,M,st,W,b,P,q],ot=s.apply(r,wt);return cc(t)&&Al(ot,wt),ot.placeholder=c,Nl(ot,t,e)}function ec(t){var e=Le[t];return function(s,c){if(s=Sr(s),c=c==null?0:Ge(vt(c),292),c&&Nh(s)){var l=(jt(s)+"e").split("e"),g=e(l[0]+"e"+(+l[1]+c));return l=(jt(g)+"e").split("e"),+(l[0]+"e"+(+l[1]-c))}return e(s)}}var a_=ii&&1/js(new ii([,-0]))[1]==zt?function(t){return new ii(t)}:Dc;function wl(t){return function(e){var s=We(e);return s==mt?Na(e):s==Rt?Im(e):ym(e,t(e))}}function Jr(t,e,s,c,l,g,m,b){var P=e&gt;if(!P&&typeof t!="function")throw new br(p);var q=c?c.length:0;if(q||(e&=~(pt|j),c=l=r),m=m===r?m:ze(vt(m),0),b=b===r?b:vt(b),q-=l?l.length:0,e&j){var U=c,M=l;c=l=r}var W=P?r:ic(t),tt=[t,e,s,c,l,U,M,g,m,b];if(W&&E_(tt,W),t=tt[0],e=tt[1],s=tt[2],c=tt[3],l=tt[4],b=tt[9]=tt[9]===r?P?0:t.length:ze(tt[9]-q,0),!b&&e&(ct|lt)&&(e&=~(ct|lt)),!e||e==et)var st=i_(t,e,s);else e==ct||e==lt?st=s_(t,e,b):(e==pt||e==(et|pt))&&!l.length?st=o_(t,e,s,c):st=ro.apply(r,tt);var wt=W?Jh:Al;return Nl(wt(st,tt),t,e)}function _l(t,e,s,c){return t===r||Tr(t,ni[s])&&!Ut.call(c,s)?e:t}function bl(t,e,s,c,l,g){return ce(t)&&ce(e)&&(g.set(e,t),Xs(t,e,r,bl,g),g.delete(e)),t}function c_(t){return Wi(t)?r:t}function El(t,e,s,c,l,g){var m=s&T,b=t.length,P=e.length;if(b!=P&&!(m&&P>b))return!1;var q=g.get(t),U=g.get(e);if(q&&U)return q==e&&U==t;var M=-1,W=!0,tt=s&F?new qn:r;for(g.set(t,e),g.set(e,t);++M<b;){var st=t[M],wt=e[M];if(c)var ot=m?c(wt,st,M,e,t,g):c(st,wt,M,t,e,g);if(ot!==r){if(ot)continue;W=!1;break}if(tt){if(!Pa(e,function(Dt,Ot){if(!Ri(tt,Ot)&&(st===Dt||l(st,Dt,s,c,g)))return tt.push(Ot)})){W=!1;break}}else if(!(st===wt||l(st,wt,s,c,g))){W=!1;break}}return g.delete(t),g.delete(e),W}function u_(t,e,s,c,l,g,m){switch(s){case Kt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case At:return!(t.byteLength!=e.byteLength||!g(new ks(t),new ks(e)));case N:case O:case xt:return Tr(+t,+e);case E:return t.name==e.name&&t.message==e.message;case se:case Qt:return t==e+"";case mt:var b=Na;case Rt:var P=c&T;if(b||(b=js),t.size!=e.size&&!P)return!1;var q=m.get(t);if(q)return q==e;c|=F,m.set(t,e);var U=El(b(t),b(e),c,l,g,m);return m.delete(t),U;case Zt:if(Ui)return Ui.call(t)==Ui.call(e)}return!1}function h_(t,e,s,c,l,g){var m=s&T,b=rc(t),P=b.length,q=rc(e),U=q.length;if(P!=U&&!m)return!1;for(var M=P;M--;){var W=b[M];if(!(m?W in e:Ut.call(e,W)))return!1}var tt=g.get(t),st=g.get(e);if(tt&&st)return tt==e&&st==t;var wt=!0;g.set(t,e),g.set(e,t);for(var ot=m;++M<P;){W=b[M];var Dt=t[W],Ot=e[W];if(c)var gr=m?c(Ot,Dt,W,e,t,g):c(Dt,Ot,W,t,e,g);if(!(gr===r?Dt===Ot||l(Dt,Ot,s,c,g):gr)){wt=!1;break}ot||(ot=W=="constructor")}if(wt&&!ot){var er=t.constructor,yr=e.constructor;er!=yr&&"constructor"in t&&"constructor"in e&&!(typeof er=="function"&&er instanceof er&&typeof yr=="function"&&yr instanceof yr)&&(wt=!1)}return g.delete(t),g.delete(e),wt}function tn(t){return hc(Ol(t,r,ql),t+"")}function rc(t){return Hh(t,ke,oc)}function nc(t){return Hh(t,cr,Dl)}var ic=Gs?function(t){return Gs.get(t)}:Dc;function oo(t){for(var e=t.name+"",s=si[e],c=Ut.call(si,e)?s.length:0;c--;){var l=s[c],g=l.func;if(g==null||g==t)return l.name}return e}function ui(t){var e=Ut.call(f,"placeholder")?f:t;return e.placeholder}function it(){var t=f.iteratee||bc;return t=t===bc?Vh:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var s=t.__data__;return m_(e)?s[typeof e=="string"?"string":"hash"]:s.map}function sc(t){for(var e=ke(t),s=e.length;s--;){var c=e[s],l=t[c];e[s]=[c,l,Sl(l)]}return e}function kn(t,e){var s=bm(t,e);return Fh(s)?s:r}function l_(t){var e=Ut.call(t,Ln),s=t[Ln];try{t[Ln]=r;var c=!0}catch{}var l=Us.call(t);return c&&(e?t[Ln]=s:delete t[Ln]),l}var oc=Ra?function(t){return t==null?[]:(t=Wt(t),pn(Ra(t),function(e){return xh.call(t,e)}))}:Ic,Dl=Ra?function(t){for(var e=[];t;)fn(e,oc(t)),t=Ms(t);return e}:Ic,We=Je;(ja&&We(new ja(new ArrayBuffer(1)))!=Kt||Li&&We(new Li)!=mt||La&&We(La.resolve())!=Ie||ii&&We(new ii)!=Rt||zi&&We(new zi)!=kt)&&(We=function(t){var e=Je(t),s=e==Pt?t.constructor:r,c=s?Mn(s):"";if(c)switch(c){case Wm:return Kt;case Bm:return mt;case Ym:return Ie;case Qm:return Rt;case Zm:return kt}return e});function p_(t,e,s){for(var c=-1,l=s.length;++c<l;){var g=s[c],m=g.size;switch(g.type){case"drop":t+=m;break;case"dropRight":e-=m;break;case"take":e=Ge(e,t+m);break;case"takeRight":t=ze(t,e-m);break}}return{start:t,end:e}}function f_(t){var e=t.match(Yt);return e?e[1].split(xe):[]}function Il(t,e,s){e=mn(e,t);for(var c=-1,l=e.length,g=!1;++c<l;){var m=Hr(e[c]);if(!(g=t!=null&&s(t,m)))break;t=t[m]}return g||++c!=l?g:(l=t==null?0:t.length,!!l&&go(l)&&en(m,l)&&(ft(t)||Hn(t)))}function d_(t){var e=t.length,s=new t.constructor(e);return e&&typeof t[0]=="string"&&Ut.call(t,"index")&&(s.index=t.index,s.input=t.input),s}function Pl(t){return typeof t.constructor=="function"&&!Vi(t)?oi(Ms(t)):{}}function g_(t,e,s){var c=t.constructor;switch(e){case At:return Ja(t);case N:case O:return new c(+t);case Kt:return Xw(t,s);case he:case qt:case Pe:case je:case He:case Ke:case Ue:case Qe:case ir:return al(t,s);case mt:return new c;case xt:case Qt:return new c(t);case se:return Jw(t);case Rt:return new c;case Zt:return t_(t)}}function y_(t,e){var s=e.length;if(!s)return t;var c=s-1;return e[c]=(s>1?"& ":"")+e[c],e=e.join(s>2?", ":" "),t.replace(ye,`{
/* [wrapped with `+e+`] */
`)}function v_(t){return ft(t)||Hn(t)||!!(Ah&&t&&t[Ah])}function en(t,e){var s=typeof t;return e=e??Y,!!e&&(s=="number"||s!="symbol"&&ua.test(t))&&t>-1&&t%1==0&&t<e}function tr(t,e,s){if(!ce(s))return!1;var c=typeof e;return(c=="number"?ar(s)&&en(e,s.length):c=="string"&&e in s)?Tr(s[e],t):!1}function ac(t,e){if(ft(t))return!1;var s=typeof t;return s=="number"||s=="symbol"||s=="boolean"||t==null||dr(t)?!0:Se.test(t)||!ne.test(t)||e!=null&&t in Wt(e)}function m_(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function cc(t){var e=oo(t),s=f[e];if(typeof s!="function"||!(e in St.prototype))return!1;if(t===s)return!0;var c=ic(s);return!!c&&t===c[0]}function w_(t){return!!Sh&&Sh in t}var __=zs?rn:Pc;function Vi(t){var e=t&&t.constructor,s=typeof e=="function"&&e.prototype||ni;return t===s}function Sl(t){return t===t&&!ce(t)}function Cl(t,e){return function(s){return s==null?!1:s[t]===e&&(e!==r||t in Wt(s))}}function b_(t){var e=po(t,function(c){return s.size===d&&s.clear(),c}),s=e.cache;return e}function E_(t,e){var s=t[1],c=e[1],l=s|c,g=l<(et|gt|H),m=c==H&&s==ct||c==H&&s==B&&t[7].length<=e[8]||c==(H|B)&&e[7].length<=e[8]&&s==ct;if(!(g||m))return t;c&et&&(t[2]=e[2],l|=s&et?0:ht);var b=e[3];if(b){var P=t[3];t[3]=P?ul(P,b,e[4]):b,t[4]=P?dn(t[3],_):e[4]}return b=e[5],b&&(P=t[5],t[5]=P?hl(P,b,e[6]):b,t[6]=P?dn(t[5],_):e[6]),b=e[7],b&&(t[7]=b),c&H&&(t[8]=t[8]==null?e[8]:Ge(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=l,t}function D_(t){var e=[];if(t!=null)for(var s in Wt(t))e.push(s);return e}function I_(t){return Us.call(t)}function Ol(t,e,s){return e=ze(e===r?t.length-1:e,0),function(){for(var c=arguments,l=-1,g=ze(c.length-e,0),m=x(g);++l<g;)m[l]=c[e+l];l=-1;for(var b=x(e+1);++l<e;)b[l]=c[l];return b[e]=s(m),$e(t,this,b)}}function xl(t,e){return e.length<2?t:$n(t,Ir(e,0,-1))}function P_(t,e){for(var s=t.length,c=Ge(e.length,s),l=or(t);c--;){var g=e[c];t[c]=en(g,s)?l[g]:r}return t}function uc(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Al=Tl(Jh),Gi=km||function(t,e){return Ct.setTimeout(t,e)},hc=Tl(Bw);function Nl(t,e,s){var c=e+"";return hc(t,y_(c,S_(f_(c),s)))}function Tl(t){var e=0,s=0;return function(){var c=Fm(),l=Bt-(c-s);if(s=c,l>0){if(++e>=$t)return arguments[0]}else e=0;return t.apply(r,arguments)}}function co(t,e){var s=-1,c=t.length,l=c-1;for(e=e===r?c:e;++s<e;){var g=Ga(s,l),m=t[g];t[g]=t[s],t[s]=m}return t.length=e,t}var Rl=b_(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Ce,function(s,c,l,g){e.push(l?g.replace(na,"$1"):c||s)}),e});function Hr(t){if(typeof t=="string"||dr(t))return t;var e=t+"";return e=="0"&&1/t==-zt?"-0":e}function Mn(t){if(t!=null){try{return qs.call(t)}catch{}try{return t+""}catch{}}return""}function S_(t,e){return _r(zr,function(s){var c="_."+s[0];e&s[1]&&!Ts(t,c)&&t.push(c)}),t.sort()}function jl(t){if(t instanceof St)return t.clone();var e=new Er(t.__wrapped__,t.__chain__);return e.__actions__=or(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function C_(t,e,s){(s?tr(t,e,s):e===r)?e=1:e=ze(vt(e),0);var c=t==null?0:t.length;if(!c||e<1)return[];for(var l=0,g=0,m=x(Fs(c/e));l<c;)m[g++]=Ir(t,l,l+=e);return m}function O_(t){for(var e=-1,s=t==null?0:t.length,c=0,l=[];++e<s;){var g=t[e];g&&(l[c++]=g)}return l}function x_(){var t=arguments.length;if(!t)return[];for(var e=x(t-1),s=arguments[0],c=t;c--;)e[c-1]=arguments[c];return fn(ft(s)?or(s):[s],Fe(e,1))}var A_=Et(function(t,e){return be(t)?ki(t,Fe(e,1,be,!0)):[]}),N_=Et(function(t,e){var s=Pr(e);return be(s)&&(s=r),be(t)?ki(t,Fe(e,1,be,!0),it(s,2)):[]}),T_=Et(function(t,e){var s=Pr(e);return be(s)&&(s=r),be(t)?ki(t,Fe(e,1,be,!0),r,s):[]});function R_(t,e,s){var c=t==null?0:t.length;return c?(e=s||e===r?1:vt(e),Ir(t,e<0?0:e,c)):[]}function j_(t,e,s){var c=t==null?0:t.length;return c?(e=s||e===r?1:vt(e),e=c-e,Ir(t,0,e<0?0:e)):[]}function L_(t,e){return t&&t.length?to(t,it(e,3),!0,!0):[]}function z_(t,e){return t&&t.length?to(t,it(e,3),!0):[]}function q_(t,e,s,c){var l=t==null?0:t.length;return l?(s&&typeof s!="number"&&tr(t,e,s)&&(s=0,c=l),xw(t,e,s,c)):[]}function Ll(t,e,s){var c=t==null?0:t.length;if(!c)return-1;var l=s==null?0:vt(s);return l<0&&(l=ze(c+l,0)),Rs(t,it(e,3),l)}function zl(t,e,s){var c=t==null?0:t.length;if(!c)return-1;var l=c-1;return s!==r&&(l=vt(s),l=s<0?ze(c+l,0):Ge(l,c-1)),Rs(t,it(e,3),l,!0)}function ql(t){var e=t==null?0:t.length;return e?Fe(t,1):[]}function U_(t){var e=t==null?0:t.length;return e?Fe(t,zt):[]}function $_(t,e){var s=t==null?0:t.length;return s?(e=e===r?1:vt(e),Fe(t,e)):[]}function k_(t){for(var e=-1,s=t==null?0:t.length,c={};++e<s;){var l=t[e];c[l[0]]=l[1]}return c}function Ul(t){return t&&t.length?t[0]:r}function M_(t,e,s){var c=t==null?0:t.length;if(!c)return-1;var l=s==null?0:vt(s);return l<0&&(l=ze(c+l,0)),Jn(t,e,l)}function H_(t){var e=t==null?0:t.length;return e?Ir(t,0,-1):[]}var K_=Et(function(t){var e=ie(t,Za);return e.length&&e[0]===t[0]?Ma(e):[]}),F_=Et(function(t){var e=Pr(t),s=ie(t,Za);return e===Pr(s)?e=r:s.pop(),s.length&&s[0]===t[0]?Ma(s,it(e,2)):[]}),V_=Et(function(t){var e=Pr(t),s=ie(t,Za);return e=typeof e=="function"?e:r,e&&s.pop(),s.length&&s[0]===t[0]?Ma(s,r,e):[]});function G_(t,e){return t==null?"":Hm.call(t,e)}function Pr(t){var e=t==null?0:t.length;return e?t[e-1]:r}function W_(t,e,s){var c=t==null?0:t.length;if(!c)return-1;var l=c;return s!==r&&(l=vt(s),l=l<0?ze(c+l,0):Ge(l,c-1)),e===e?Sm(t,e,l):Rs(t,mh,l,!0)}function B_(t,e){return t&&t.length?Yh(t,vt(e)):r}var Y_=Et($l);function $l(t,e){return t&&t.length&&e&&e.length?Va(t,e):t}function Q_(t,e,s){return t&&t.length&&e&&e.length?Va(t,e,it(s,2)):t}function Z_(t,e,s){return t&&t.length&&e&&e.length?Va(t,e,r,s):t}var X_=tn(function(t,e){var s=t==null?0:t.length,c=qa(t,e);return Xh(t,ie(e,function(l){return en(l,s)?+l:l}).sort(cl)),c});function J_(t,e){var s=[];if(!(t&&t.length))return s;var c=-1,l=[],g=t.length;for(e=it(e,3);++c<g;){var m=t[c];e(m,c,t)&&(s.push(m),l.push(c))}return Xh(t,l),s}function lc(t){return t==null?t:Gm.call(t)}function t0(t,e,s){var c=t==null?0:t.length;return c?(s&&typeof s!="number"&&tr(t,e,s)?(e=0,s=c):(e=e==null?0:vt(e),s=s===r?c:vt(s)),Ir(t,e,s)):[]}function e0(t,e){return Js(t,e)}function r0(t,e,s){return Ba(t,e,it(s,2))}function n0(t,e){var s=t==null?0:t.length;if(s){var c=Js(t,e);if(c<s&&Tr(t[c],e))return c}return-1}function i0(t,e){return Js(t,e,!0)}function s0(t,e,s){return Ba(t,e,it(s,2),!0)}function o0(t,e){var s=t==null?0:t.length;if(s){var c=Js(t,e,!0)-1;if(Tr(t[c],e))return c}return-1}function a0(t){return t&&t.length?tl(t):[]}function c0(t,e){return t&&t.length?tl(t,it(e,2)):[]}function u0(t){var e=t==null?0:t.length;return e?Ir(t,1,e):[]}function h0(t,e,s){return t&&t.length?(e=s||e===r?1:vt(e),Ir(t,0,e<0?0:e)):[]}function l0(t,e,s){var c=t==null?0:t.length;return c?(e=s||e===r?1:vt(e),e=c-e,Ir(t,e<0?0:e,c)):[]}function p0(t,e){return t&&t.length?to(t,it(e,3),!1,!0):[]}function f0(t,e){return t&&t.length?to(t,it(e,3)):[]}var d0=Et(function(t){return vn(Fe(t,1,be,!0))}),g0=Et(function(t){var e=Pr(t);return be(e)&&(e=r),vn(Fe(t,1,be,!0),it(e,2))}),y0=Et(function(t){var e=Pr(t);return e=typeof e=="function"?e:r,vn(Fe(t,1,be,!0),r,e)});function v0(t){return t&&t.length?vn(t):[]}function m0(t,e){return t&&t.length?vn(t,it(e,2)):[]}function w0(t,e){return e=typeof e=="function"?e:r,t&&t.length?vn(t,r,e):[]}function pc(t){if(!(t&&t.length))return[];var e=0;return t=pn(t,function(s){if(be(s))return e=ze(s.length,e),!0}),xa(e,function(s){return ie(t,Sa(s))})}function kl(t,e){if(!(t&&t.length))return[];var s=pc(t);return e==null?s:ie(s,function(c){return $e(e,r,c)})}var _0=Et(function(t,e){return be(t)?ki(t,e):[]}),b0=Et(function(t){return Qa(pn(t,be))}),E0=Et(function(t){var e=Pr(t);return be(e)&&(e=r),Qa(pn(t,be),it(e,2))}),D0=Et(function(t){var e=Pr(t);return e=typeof e=="function"?e:r,Qa(pn(t,be),r,e)}),I0=Et(pc);function P0(t,e){return il(t||[],e||[],$i)}function S0(t,e){return il(t||[],e||[],Ki)}var C0=Et(function(t){var e=t.length,s=e>1?t[e-1]:r;return s=typeof s=="function"?(t.pop(),s):r,kl(t,s)});function Ml(t){var e=f(t);return e.__chain__=!0,e}function O0(t,e){return e(t),t}function uo(t,e){return e(t)}var x0=tn(function(t){var e=t.length,s=e?t[0]:0,c=this.__wrapped__,l=function(g){return qa(g,t)};return e>1||this.__actions__.length||!(c instanceof St)||!en(s)?this.thru(l):(c=c.slice(s,+s+(e?1:0)),c.__actions__.push({func:uo,args:[l],thisArg:r}),new Er(c,this.__chain__).thru(function(g){return e&&!g.length&&g.push(r),g}))});function A0(){return Ml(this)}function N0(){return new Er(this.value(),this.__chain__)}function T0(){this.__values__===r&&(this.__values__=ep(this.value()));var t=this.__index__>=this.__values__.length,e=t?r:this.__values__[this.__index__++];return{done:t,value:e}}function R0(){return this}function j0(t){for(var e,s=this;s instanceof Bs;){var c=jl(s);c.__index__=0,c.__values__=r,e?l.__wrapped__=c:e=c;var l=c;s=s.__wrapped__}return l.__wrapped__=t,e}function L0(){var t=this.__wrapped__;if(t instanceof St){var e=t;return this.__actions__.length&&(e=new St(this)),e=e.reverse(),e.__actions__.push({func:uo,args:[lc],thisArg:r}),new Er(e,this.__chain__)}return this.thru(lc)}function z0(){return nl(this.__wrapped__,this.__actions__)}var q0=eo(function(t,e,s){Ut.call(t,s)?++t[s]:Xr(t,s,1)});function U0(t,e,s){var c=ft(t)?yh:Ow;return s&&tr(t,e,s)&&(e=r),c(t,it(e,3))}function $0(t,e){var s=ft(t)?pn:kh;return s(t,it(e,3))}var k0=dl(Ll),M0=dl(zl);function H0(t,e){return Fe(ho(t,e),1)}function K0(t,e){return Fe(ho(t,e),zt)}function F0(t,e,s){return s=s===r?1:vt(s),Fe(ho(t,e),s)}function Hl(t,e){var s=ft(t)?_r:yn;return s(t,it(e,3))}function Kl(t,e){var s=ft(t)?um:$h;return s(t,it(e,3))}var V0=eo(function(t,e,s){Ut.call(t,s)?t[s].push(e):Xr(t,s,[e])});function G0(t,e,s,c){t=ar(t)?t:li(t),s=s&&!c?vt(s):0;var l=t.length;return s<0&&(s=ze(l+s,0)),yo(t)?s<=l&&t.indexOf(e,s)>-1:!!l&&Jn(t,e,s)>-1}var W0=Et(function(t,e,s){var c=-1,l=typeof e=="function",g=ar(t)?x(t.length):[];return yn(t,function(m){g[++c]=l?$e(e,m,s):Mi(m,e,s)}),g}),B0=eo(function(t,e,s){Xr(t,s,e)});function ho(t,e){var s=ft(t)?ie:Gh;return s(t,it(e,3))}function Y0(t,e,s,c){return t==null?[]:(ft(e)||(e=e==null?[]:[e]),s=c?r:s,ft(s)||(s=s==null?[]:[s]),Qh(t,e,s))}var Q0=eo(function(t,e,s){t[s?0:1].push(e)},function(){return[[],[]]});function Z0(t,e,s){var c=ft(t)?Ia:_h,l=arguments.length<3;return c(t,it(e,4),s,l,yn)}function X0(t,e,s){var c=ft(t)?hm:_h,l=arguments.length<3;return c(t,it(e,4),s,l,$h)}function J0(t,e){var s=ft(t)?pn:kh;return s(t,fo(it(e,3)))}function t1(t){var e=ft(t)?Lh:Gw;return e(t)}function e1(t,e,s){(s?tr(t,e,s):e===r)?e=1:e=vt(e);var c=ft(t)?Dw:Ww;return c(t,e)}function r1(t){var e=ft(t)?Iw:Yw;return e(t)}function n1(t){if(t==null)return 0;if(ar(t))return yo(t)?ei(t):t.length;var e=We(t);return e==mt||e==Rt?t.size:Ka(t).length}function i1(t,e,s){var c=ft(t)?Pa:Qw;return s&&tr(t,e,s)&&(e=r),c(t,it(e,3))}var s1=Et(function(t,e){if(t==null)return[];var s=e.length;return s>1&&tr(t,e[0],e[1])?e=[]:s>2&&tr(e[0],e[1],e[2])&&(e=[e[0]]),Qh(t,Fe(e,1),[])}),lo=$m||function(){return Ct.Date.now()};function o1(t,e){if(typeof e!="function")throw new br(p);return t=vt(t),function(){if(--t<1)return e.apply(this,arguments)}}function Fl(t,e,s){return e=s?r:e,e=t&&e==null?t.length:e,Jr(t,H,r,r,r,r,e)}function Vl(t,e){var s;if(typeof e!="function")throw new br(p);return t=vt(t),function(){return--t>0&&(s=e.apply(this,arguments)),t<=1&&(e=r),s}}var fc=Et(function(t,e,s){var c=et;if(s.length){var l=dn(s,ui(fc));c|=pt}return Jr(t,c,e,s,l)}),Gl=Et(function(t,e,s){var c=et|gt;if(s.length){var l=dn(s,ui(Gl));c|=pt}return Jr(e,c,t,s,l)});function Wl(t,e,s){e=s?r:e;var c=Jr(t,ct,r,r,r,r,r,e);return c.placeholder=Wl.placeholder,c}function Bl(t,e,s){e=s?r:e;var c=Jr(t,lt,r,r,r,r,r,e);return c.placeholder=Bl.placeholder,c}function Yl(t,e,s){var c,l,g,m,b,P,q=0,U=!1,M=!1,W=!0;if(typeof t!="function")throw new br(p);e=Sr(e)||0,ce(s)&&(U=!!s.leading,M="maxWait"in s,g=M?ze(Sr(s.maxWait)||0,e):g,W="trailing"in s?!!s.trailing:W);function tt(Ee){var Rr=c,sn=l;return c=l=r,q=Ee,m=t.apply(sn,Rr),m}function st(Ee){return q=Ee,b=Gi(Dt,e),U?tt(Ee):m}function wt(Ee){var Rr=Ee-P,sn=Ee-q,dp=e-Rr;return M?Ge(dp,g-sn):dp}function ot(Ee){var Rr=Ee-P,sn=Ee-q;return P===r||Rr>=e||Rr<0||M&&sn>=g}function Dt(){var Ee=lo();if(ot(Ee))return Ot(Ee);b=Gi(Dt,wt(Ee))}function Ot(Ee){return b=r,W&&c?tt(Ee):(c=l=r,m)}function gr(){b!==r&&sl(b),q=0,c=P=l=b=r}function er(){return b===r?m:Ot(lo())}function yr(){var Ee=lo(),Rr=ot(Ee);if(c=arguments,l=this,P=Ee,Rr){if(b===r)return st(P);if(M)return sl(b),b=Gi(Dt,e),tt(P)}return b===r&&(b=Gi(Dt,e)),m}return yr.cancel=gr,yr.flush=er,yr}var a1=Et(function(t,e){return Uh(t,1,e)}),c1=Et(function(t,e,s){return Uh(t,Sr(e)||0,s)});function u1(t){return Jr(t,_t)}function po(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new br(p);var s=function(){var c=arguments,l=e?e.apply(this,c):c[0],g=s.cache;if(g.has(l))return g.get(l);var m=t.apply(this,c);return s.cache=g.set(l,m)||g,m};return s.cache=new(po.Cache||Zr),s}po.Cache=Zr;function fo(t){if(typeof t!="function")throw new br(p);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function h1(t){return Vl(2,t)}var l1=Zw(function(t,e){e=e.length==1&&ft(e[0])?ie(e[0],pr(it())):ie(Fe(e,1),pr(it()));var s=e.length;return Et(function(c){for(var l=-1,g=Ge(c.length,s);++l<g;)c[l]=e[l].call(this,c[l]);return $e(t,this,c)})}),dc=Et(function(t,e){var s=dn(e,ui(dc));return Jr(t,pt,r,e,s)}),Ql=Et(function(t,e){var s=dn(e,ui(Ql));return Jr(t,j,r,e,s)}),p1=tn(function(t,e){return Jr(t,B,r,r,r,e)});function f1(t,e){if(typeof t!="function")throw new br(p);return e=e===r?e:vt(e),Et(t,e)}function d1(t,e){if(typeof t!="function")throw new br(p);return e=e==null?0:ze(vt(e),0),Et(function(s){var c=s[e],l=wn(s,0,e);return c&&fn(l,c),$e(t,this,l)})}function g1(t,e,s){var c=!0,l=!0;if(typeof t!="function")throw new br(p);return ce(s)&&(c="leading"in s?!!s.leading:c,l="trailing"in s?!!s.trailing:l),Yl(t,e,{leading:c,maxWait:e,trailing:l})}function y1(t){return Fl(t,1)}function v1(t,e){return dc(Xa(e),t)}function m1(){if(!arguments.length)return[];var t=arguments[0];return ft(t)?t:[t]}function w1(t){return Dr(t,z)}function _1(t,e){return e=typeof e=="function"?e:r,Dr(t,z,e)}function b1(t){return Dr(t,C|z)}function E1(t,e){return e=typeof e=="function"?e:r,Dr(t,C|z,e)}function D1(t,e){return e==null||qh(t,e,ke(e))}function Tr(t,e){return t===e||t!==t&&e!==e}var I1=so(ka),P1=so(function(t,e){return t>=e}),Hn=Kh(function(){return arguments}())?Kh:function(t){return ve(t)&&Ut.call(t,"callee")&&!xh.call(t,"callee")},ft=x.isArray,S1=Xe?pr(Xe):jw;function ar(t){return t!=null&&go(t.length)&&!rn(t)}function be(t){return ve(t)&&ar(t)}function C1(t){return t===!0||t===!1||ve(t)&&Je(t)==N}var _n=Mm||Pc,O1=xr?pr(xr):Lw;function x1(t){return ve(t)&&t.nodeType===1&&!Wi(t)}function A1(t){if(t==null)return!0;if(ar(t)&&(ft(t)||typeof t=="string"||typeof t.splice=="function"||_n(t)||hi(t)||Hn(t)))return!t.length;var e=We(t);if(e==mt||e==Rt)return!t.size;if(Vi(t))return!Ka(t).length;for(var s in t)if(Ut.call(t,s))return!1;return!0}function N1(t,e){return Hi(t,e)}function T1(t,e,s){s=typeof s=="function"?s:r;var c=s?s(t,e):r;return c===r?Hi(t,e,r,s):!!c}function gc(t){if(!ve(t))return!1;var e=Je(t);return e==E||e==h||typeof t.message=="string"&&typeof t.name=="string"&&!Wi(t)}function R1(t){return typeof t=="number"&&Nh(t)}function rn(t){if(!ce(t))return!1;var e=Je(t);return e==J||e==at||e==R||e==me}function Zl(t){return typeof t=="number"&&t==vt(t)}function go(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Y}function ce(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function ve(t){return t!=null&&typeof t=="object"}var Xl=wr?pr(wr):qw;function j1(t,e){return t===e||Ha(t,e,sc(e))}function L1(t,e,s){return s=typeof s=="function"?s:r,Ha(t,e,sc(e),s)}function z1(t){return Jl(t)&&t!=+t}function q1(t){if(__(t))throw new ut(u);return Fh(t)}function U1(t){return t===null}function $1(t){return t==null}function Jl(t){return typeof t=="number"||ve(t)&&Je(t)==xt}function Wi(t){if(!ve(t)||Je(t)!=Pt)return!1;var e=Ms(t);if(e===null)return!0;var s=Ut.call(e,"constructor")&&e.constructor;return typeof s=="function"&&s instanceof s&&qs.call(s)==Lm}var yc=$r?pr($r):Uw;function k1(t){return Zl(t)&&t>=-Y&&t<=Y}var tp=Ti?pr(Ti):$w;function yo(t){return typeof t=="string"||!ft(t)&&ve(t)&&Je(t)==Qt}function dr(t){return typeof t=="symbol"||ve(t)&&Je(t)==Zt}var hi=jn?pr(jn):kw;function M1(t){return t===r}function H1(t){return ve(t)&&We(t)==kt}function K1(t){return ve(t)&&Je(t)==Xt}var F1=so(Fa),V1=so(function(t,e){return t<=e});function ep(t){if(!t)return[];if(ar(t))return yo(t)?Ar(t):or(t);if(ji&&t[ji])return Dm(t[ji]());var e=We(t),s=e==mt?Na:e==Rt?js:li;return s(t)}function nn(t){if(!t)return t===0?t:0;if(t=Sr(t),t===zt||t===-zt){var e=t<0?-1:1;return e*V}return t===t?t:0}function vt(t){var e=nn(t),s=e%1;return e===e?s?e-s:e:0}function rp(t){return t?Un(vt(t),0,G):0}function Sr(t){if(typeof t=="number")return t;if(dr(t))return K;if(ce(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ce(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=bh(t);var s=oa.test(t);return s||ca.test(t)?dt(t.slice(2),s?2:8):sa.test(t)?K:+t}function np(t){return Mr(t,cr(t))}function G1(t){return t?Un(vt(t),-Y,Y):t===0?t:0}function jt(t){return t==null?"":fr(t)}var W1=ai(function(t,e){if(Vi(e)||ar(e)){Mr(e,ke(e),t);return}for(var s in e)Ut.call(e,s)&&$i(t,s,e[s])}),ip=ai(function(t,e){Mr(e,cr(e),t)}),vo=ai(function(t,e,s,c){Mr(e,cr(e),t,c)}),B1=ai(function(t,e,s,c){Mr(e,ke(e),t,c)}),Y1=tn(qa);function Q1(t,e){var s=oi(t);return e==null?s:zh(s,e)}var Z1=Et(function(t,e){t=Wt(t);var s=-1,c=e.length,l=c>2?e[2]:r;for(l&&tr(e[0],e[1],l)&&(c=1);++s<c;)for(var g=e[s],m=cr(g),b=-1,P=m.length;++b<P;){var q=m[b],U=t[q];(U===r||Tr(U,ni[q])&&!Ut.call(t,q))&&(t[q]=g[q])}return t}),X1=Et(function(t){return t.push(r,bl),$e(sp,r,t)});function J1(t,e){return vh(t,it(e,3),kr)}function tb(t,e){return vh(t,it(e,3),$a)}function eb(t,e){return t==null?t:Ua(t,it(e,3),cr)}function rb(t,e){return t==null?t:Mh(t,it(e,3),cr)}function nb(t,e){return t&&kr(t,it(e,3))}function ib(t,e){return t&&$a(t,it(e,3))}function sb(t){return t==null?[]:Zs(t,ke(t))}function ob(t){return t==null?[]:Zs(t,cr(t))}function vc(t,e,s){var c=t==null?r:$n(t,e);return c===r?s:c}function ab(t,e){return t!=null&&Il(t,e,Aw)}function mc(t,e){return t!=null&&Il(t,e,Nw)}var cb=yl(function(t,e,s){e!=null&&typeof e.toString!="function"&&(e=Us.call(e)),t[e]=s},_c(ur)),ub=yl(function(t,e,s){e!=null&&typeof e.toString!="function"&&(e=Us.call(e)),Ut.call(t,e)?t[e].push(s):t[e]=[s]},it),hb=Et(Mi);function ke(t){return ar(t)?jh(t):Ka(t)}function cr(t){return ar(t)?jh(t,!0):Mw(t)}function lb(t,e){var s={};return e=it(e,3),kr(t,function(c,l,g){Xr(s,e(c,l,g),c)}),s}function pb(t,e){var s={};return e=it(e,3),kr(t,function(c,l,g){Xr(s,l,e(c,l,g))}),s}var fb=ai(function(t,e,s){Xs(t,e,s)}),sp=ai(function(t,e,s,c){Xs(t,e,s,c)}),db=tn(function(t,e){var s={};if(t==null)return s;var c=!1;e=ie(e,function(g){return g=mn(g,t),c||(c=g.length>1),g}),Mr(t,nc(t),s),c&&(s=Dr(s,C|S|z,c_));for(var l=e.length;l--;)Ya(s,e[l]);return s});function gb(t,e){return op(t,fo(it(e)))}var yb=tn(function(t,e){return t==null?{}:Kw(t,e)});function op(t,e){if(t==null)return{};var s=ie(nc(t),function(c){return[c]});return e=it(e),Zh(t,s,function(c,l){return e(c,l[0])})}function vb(t,e,s){e=mn(e,t);var c=-1,l=e.length;for(l||(l=1,t=r);++c<l;){var g=t==null?r:t[Hr(e[c])];g===r&&(c=l,g=s),t=rn(g)?g.call(t):g}return t}function mb(t,e,s){return t==null?t:Ki(t,e,s)}function wb(t,e,s,c){return c=typeof c=="function"?c:r,t==null?t:Ki(t,e,s,c)}var ap=wl(ke),cp=wl(cr);function _b(t,e,s){var c=ft(t),l=c||_n(t)||hi(t);if(e=it(e,4),s==null){var g=t&&t.constructor;l?s=c?new g:[]:ce(t)?s=rn(g)?oi(Ms(t)):{}:s={}}return(l?_r:kr)(t,function(m,b,P){return e(s,m,b,P)}),s}function bb(t,e){return t==null?!0:Ya(t,e)}function Eb(t,e,s){return t==null?t:rl(t,e,Xa(s))}function Db(t,e,s,c){return c=typeof c=="function"?c:r,t==null?t:rl(t,e,Xa(s),c)}function li(t){return t==null?[]:Aa(t,ke(t))}function Ib(t){return t==null?[]:Aa(t,cr(t))}function Pb(t,e,s){return s===r&&(s=e,e=r),s!==r&&(s=Sr(s),s=s===s?s:0),e!==r&&(e=Sr(e),e=e===e?e:0),Un(Sr(t),e,s)}function Sb(t,e,s){return e=nn(e),s===r?(s=e,e=0):s=nn(s),t=Sr(t),Tw(t,e,s)}function Cb(t,e,s){if(s&&typeof s!="boolean"&&tr(t,e,s)&&(e=s=r),s===r&&(typeof e=="boolean"?(s=e,e=r):typeof t=="boolean"&&(s=t,t=r)),t===r&&e===r?(t=0,e=1):(t=nn(t),e===r?(e=t,t=0):e=nn(e)),t>e){var c=t;t=e,e=c}if(s||t%1||e%1){var l=Th();return Ge(t+l*(e-t+Vt("1e-"+((l+"").length-1))),e)}return Ga(t,e)}var Ob=ci(function(t,e,s){return e=e.toLowerCase(),t+(s?up(e):e)});function up(t){return wc(jt(t).toLowerCase())}function hp(t){return t=jt(t),t&&t.replace(Br,mm).replace(ba,"")}function xb(t,e,s){t=jt(t),e=fr(e);var c=t.length;s=s===r?c:Un(vt(s),0,c);var l=s;return s-=e.length,s>=0&&t.slice(s,l)==e}function Ab(t){return t=jt(t),t&&re.test(t)?t.replace(xn,wm):t}function Nb(t){return t=jt(t),t&&Oe.test(t)?t.replace(de,"\\$&"):t}var Tb=ci(function(t,e,s){return t+(s?"-":"")+e.toLowerCase()}),Rb=ci(function(t,e,s){return t+(s?" ":"")+e.toLowerCase()}),jb=fl("toLowerCase");function Lb(t,e,s){t=jt(t),e=vt(e);var c=e?ei(t):0;if(!e||c>=e)return t;var l=(e-c)/2;return io(Vs(l),s)+t+io(Fs(l),s)}function zb(t,e,s){t=jt(t),e=vt(e);var c=e?ei(t):0;return e&&c<e?t+io(e-c,s):t}function qb(t,e,s){t=jt(t),e=vt(e);var c=e?ei(t):0;return e&&c<e?io(e-c,s)+t:t}function Ub(t,e,s){return s||e==null?e=0:e&&(e=+e),Vm(jt(t).replace(ge,""),e||0)}function $b(t,e,s){return(s?tr(t,e,s):e===r)?e=1:e=vt(e),Wa(jt(t),e)}function kb(){var t=arguments,e=jt(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var Mb=ci(function(t,e,s){return t+(s?"_":"")+e.toLowerCase()});function Hb(t,e,s){return s&&typeof s!="number"&&tr(t,e,s)&&(e=s=r),s=s===r?G:s>>>0,s?(t=jt(t),t&&(typeof e=="string"||e!=null&&!yc(e))&&(e=fr(e),!e&&ti(t))?wn(Ar(t),0,s):t.split(e,s)):[]}var Kb=ci(function(t,e,s){return t+(s?" ":"")+wc(e)});function Fb(t,e,s){return t=jt(t),s=s==null?0:Un(vt(s),0,t.length),e=fr(e),t.slice(s,s+e.length)==e}function Vb(t,e,s){var c=f.templateSettings;s&&tr(t,e,s)&&(e=r),t=jt(t),e=vo({},e,c,_l);var l=vo({},e.imports,c.imports,_l),g=ke(l),m=Aa(l,g),b,P,q=0,U=e.interpolate||Gn,M="__p += '",W=Ta((e.escape||Gn).source+"|"+U.source+"|"+(U===ae?ia:Gn).source+"|"+(e.evaluate||Gn).source+"|$","g"),tt="//# sourceURL="+(Ut.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ea+"]")+`
`;t.replace(W,function(ot,Dt,Ot,gr,er,yr){return Ot||(Ot=gr),M+=t.slice(q,yr).replace(ha,_m),Dt&&(b=!0,M+=`' +
__e(`+Dt+`) +
'`),er&&(P=!0,M+=`';
`+er+`;
__p += '`),Ot&&(M+=`' +
((__t = (`+Ot+`)) == null ? '' : __t) +
'`),q=yr+ot.length,ot}),M+=`';
`;var st=Ut.call(e,"variable")&&e.variable;if(!st)M=`with (obj) {
`+M+`
}
`;else if(ra.test(st))throw new ut(y);M=(P?M.replace(qr,""):M).replace(Ze,"$1").replace(Wr,"$1;"),M="function("+(st||"obj")+`) {
`+(st?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(b?", __e = _.escape":"")+(P?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+M+`return __p
}`;var wt=pp(function(){return Tt(g,tt+"return "+M).apply(r,m)});if(wt.source=M,gc(wt))throw wt;return wt}function Gb(t){return jt(t).toLowerCase()}function Wb(t){return jt(t).toUpperCase()}function Bb(t,e,s){if(t=jt(t),t&&(s||e===r))return bh(t);if(!t||!(e=fr(e)))return t;var c=Ar(t),l=Ar(e),g=Eh(c,l),m=Dh(c,l)+1;return wn(c,g,m).join("")}function Yb(t,e,s){if(t=jt(t),t&&(s||e===r))return t.slice(0,Ph(t)+1);if(!t||!(e=fr(e)))return t;var c=Ar(t),l=Dh(c,Ar(e))+1;return wn(c,0,l).join("")}function Qb(t,e,s){if(t=jt(t),t&&(s||e===r))return t.replace(ge,"");if(!t||!(e=fr(e)))return t;var c=Ar(t),l=Eh(c,Ar(e));return wn(c,l).join("")}function Zb(t,e){var s=rt,c=yt;if(ce(e)){var l="separator"in e?e.separator:l;s="length"in e?vt(e.length):s,c="omission"in e?fr(e.omission):c}t=jt(t);var g=t.length;if(ti(t)){var m=Ar(t);g=m.length}if(s>=g)return t;var b=s-ei(c);if(b<1)return c;var P=m?wn(m,0,b).join(""):t.slice(0,b);if(l===r)return P+c;if(m&&(b+=P.length-b),yc(l)){if(t.slice(b).search(l)){var q,U=P;for(l.global||(l=Ta(l.source,jt(mr.exec(l))+"g")),l.lastIndex=0;q=l.exec(U);)var M=q.index;P=P.slice(0,M===r?b:M)}}else if(t.indexOf(fr(l),b)!=b){var W=P.lastIndexOf(l);W>-1&&(P=P.slice(0,W))}return P+c}function Xb(t){return t=jt(t),t&&le.test(t)?t.replace(hn,Cm):t}var Jb=ci(function(t,e,s){return t+(s?" ":"")+e.toUpperCase()}),wc=fl("toUpperCase");function lp(t,e,s){return t=jt(t),e=s?r:e,e===r?Em(t)?Am(t):fm(t):t.match(e)||[]}var pp=Et(function(t,e){try{return $e(t,r,e)}catch(s){return gc(s)?s:new ut(s)}}),tE=tn(function(t,e){return _r(e,function(s){s=Hr(s),Xr(t,s,fc(t[s],t))}),t});function eE(t){var e=t==null?0:t.length,s=it();return t=e?ie(t,function(c){if(typeof c[1]!="function")throw new br(p);return[s(c[0]),c[1]]}):[],Et(function(c){for(var l=-1;++l<e;){var g=t[l];if($e(g[0],this,c))return $e(g[1],this,c)}})}function rE(t){return Cw(Dr(t,C))}function _c(t){return function(){return t}}function nE(t,e){return t==null||t!==t?e:t}var iE=gl(),sE=gl(!0);function ur(t){return t}function bc(t){return Vh(typeof t=="function"?t:Dr(t,C))}function oE(t){return Wh(Dr(t,C))}function aE(t,e){return Bh(t,Dr(e,C))}var cE=Et(function(t,e){return function(s){return Mi(s,t,e)}}),uE=Et(function(t,e){return function(s){return Mi(t,s,e)}});function Ec(t,e,s){var c=ke(e),l=Zs(e,c);s==null&&!(ce(e)&&(l.length||!c.length))&&(s=e,e=t,t=this,l=Zs(e,ke(e)));var g=!(ce(s)&&"chain"in s)||!!s.chain,m=rn(t);return _r(l,function(b){var P=e[b];t[b]=P,m&&(t.prototype[b]=function(){var q=this.__chain__;if(g||q){var U=t(this.__wrapped__),M=U.__actions__=or(this.__actions__);return M.push({func:P,args:arguments,thisArg:t}),U.__chain__=q,U}return P.apply(t,fn([this.value()],arguments))})}),t}function hE(){return Ct._===this&&(Ct._=zm),this}function Dc(){}function lE(t){return t=vt(t),Et(function(e){return Yh(e,t)})}var pE=tc(ie),fE=tc(yh),dE=tc(Pa);function fp(t){return ac(t)?Sa(Hr(t)):Fw(t)}function gE(t){return function(e){return t==null?r:$n(t,e)}}var yE=vl(),vE=vl(!0);function Ic(){return[]}function Pc(){return!1}function mE(){return{}}function wE(){return""}function _E(){return!0}function bE(t,e){if(t=vt(t),t<1||t>Y)return[];var s=G,c=Ge(t,G);e=it(e),t-=G;for(var l=xa(c,e);++s<t;)e(s);return l}function EE(t){return ft(t)?ie(t,Hr):dr(t)?[t]:or(Rl(jt(t)))}function DE(t){var e=++jm;return jt(t)+e}var IE=no(function(t,e){return t+e},0),PE=ec("ceil"),SE=no(function(t,e){return t/e},1),CE=ec("floor");function OE(t){return t&&t.length?Qs(t,ur,ka):r}function xE(t,e){return t&&t.length?Qs(t,it(e,2),ka):r}function AE(t){return wh(t,ur)}function NE(t,e){return wh(t,it(e,2))}function TE(t){return t&&t.length?Qs(t,ur,Fa):r}function RE(t,e){return t&&t.length?Qs(t,it(e,2),Fa):r}var jE=no(function(t,e){return t*e},1),LE=ec("round"),zE=no(function(t,e){return t-e},0);function qE(t){return t&&t.length?Oa(t,ur):0}function UE(t,e){return t&&t.length?Oa(t,it(e,2)):0}return f.after=o1,f.ary=Fl,f.assign=W1,f.assignIn=ip,f.assignInWith=vo,f.assignWith=B1,f.at=Y1,f.before=Vl,f.bind=fc,f.bindAll=tE,f.bindKey=Gl,f.castArray=m1,f.chain=Ml,f.chunk=C_,f.compact=O_,f.concat=x_,f.cond=eE,f.conforms=rE,f.constant=_c,f.countBy=q0,f.create=Q1,f.curry=Wl,f.curryRight=Bl,f.debounce=Yl,f.defaults=Z1,f.defaultsDeep=X1,f.defer=a1,f.delay=c1,f.difference=A_,f.differenceBy=N_,f.differenceWith=T_,f.drop=R_,f.dropRight=j_,f.dropRightWhile=L_,f.dropWhile=z_,f.fill=q_,f.filter=$0,f.flatMap=H0,f.flatMapDeep=K0,f.flatMapDepth=F0,f.flatten=ql,f.flattenDeep=U_,f.flattenDepth=$_,f.flip=u1,f.flow=iE,f.flowRight=sE,f.fromPairs=k_,f.functions=sb,f.functionsIn=ob,f.groupBy=V0,f.initial=H_,f.intersection=K_,f.intersectionBy=F_,f.intersectionWith=V_,f.invert=cb,f.invertBy=ub,f.invokeMap=W0,f.iteratee=bc,f.keyBy=B0,f.keys=ke,f.keysIn=cr,f.map=ho,f.mapKeys=lb,f.mapValues=pb,f.matches=oE,f.matchesProperty=aE,f.memoize=po,f.merge=fb,f.mergeWith=sp,f.method=cE,f.methodOf=uE,f.mixin=Ec,f.negate=fo,f.nthArg=lE,f.omit=db,f.omitBy=gb,f.once=h1,f.orderBy=Y0,f.over=pE,f.overArgs=l1,f.overEvery=fE,f.overSome=dE,f.partial=dc,f.partialRight=Ql,f.partition=Q0,f.pick=yb,f.pickBy=op,f.property=fp,f.propertyOf=gE,f.pull=Y_,f.pullAll=$l,f.pullAllBy=Q_,f.pullAllWith=Z_,f.pullAt=X_,f.range=yE,f.rangeRight=vE,f.rearg=p1,f.reject=J0,f.remove=J_,f.rest=f1,f.reverse=lc,f.sampleSize=e1,f.set=mb,f.setWith=wb,f.shuffle=r1,f.slice=t0,f.sortBy=s1,f.sortedUniq=a0,f.sortedUniqBy=c0,f.split=Hb,f.spread=d1,f.tail=u0,f.take=h0,f.takeRight=l0,f.takeRightWhile=p0,f.takeWhile=f0,f.tap=O0,f.throttle=g1,f.thru=uo,f.toArray=ep,f.toPairs=ap,f.toPairsIn=cp,f.toPath=EE,f.toPlainObject=np,f.transform=_b,f.unary=y1,f.union=d0,f.unionBy=g0,f.unionWith=y0,f.uniq=v0,f.uniqBy=m0,f.uniqWith=w0,f.unset=bb,f.unzip=pc,f.unzipWith=kl,f.update=Eb,f.updateWith=Db,f.values=li,f.valuesIn=Ib,f.without=_0,f.words=lp,f.wrap=v1,f.xor=b0,f.xorBy=E0,f.xorWith=D0,f.zip=I0,f.zipObject=P0,f.zipObjectDeep=S0,f.zipWith=C0,f.entries=ap,f.entriesIn=cp,f.extend=ip,f.extendWith=vo,Ec(f,f),f.add=IE,f.attempt=pp,f.camelCase=Ob,f.capitalize=up,f.ceil=PE,f.clamp=Pb,f.clone=w1,f.cloneDeep=b1,f.cloneDeepWith=E1,f.cloneWith=_1,f.conformsTo=D1,f.deburr=hp,f.defaultTo=nE,f.divide=SE,f.endsWith=xb,f.eq=Tr,f.escape=Ab,f.escapeRegExp=Nb,f.every=U0,f.find=k0,f.findIndex=Ll,f.findKey=J1,f.findLast=M0,f.findLastIndex=zl,f.findLastKey=tb,f.floor=CE,f.forEach=Hl,f.forEachRight=Kl,f.forIn=eb,f.forInRight=rb,f.forOwn=nb,f.forOwnRight=ib,f.get=vc,f.gt=I1,f.gte=P1,f.has=ab,f.hasIn=mc,f.head=Ul,f.identity=ur,f.includes=G0,f.indexOf=M_,f.inRange=Sb,f.invoke=hb,f.isArguments=Hn,f.isArray=ft,f.isArrayBuffer=S1,f.isArrayLike=ar,f.isArrayLikeObject=be,f.isBoolean=C1,f.isBuffer=_n,f.isDate=O1,f.isElement=x1,f.isEmpty=A1,f.isEqual=N1,f.isEqualWith=T1,f.isError=gc,f.isFinite=R1,f.isFunction=rn,f.isInteger=Zl,f.isLength=go,f.isMap=Xl,f.isMatch=j1,f.isMatchWith=L1,f.isNaN=z1,f.isNative=q1,f.isNil=$1,f.isNull=U1,f.isNumber=Jl,f.isObject=ce,f.isObjectLike=ve,f.isPlainObject=Wi,f.isRegExp=yc,f.isSafeInteger=k1,f.isSet=tp,f.isString=yo,f.isSymbol=dr,f.isTypedArray=hi,f.isUndefined=M1,f.isWeakMap=H1,f.isWeakSet=K1,f.join=G_,f.kebabCase=Tb,f.last=Pr,f.lastIndexOf=W_,f.lowerCase=Rb,f.lowerFirst=jb,f.lt=F1,f.lte=V1,f.max=OE,f.maxBy=xE,f.mean=AE,f.meanBy=NE,f.min=TE,f.minBy=RE,f.stubArray=Ic,f.stubFalse=Pc,f.stubObject=mE,f.stubString=wE,f.stubTrue=_E,f.multiply=jE,f.nth=B_,f.noConflict=hE,f.noop=Dc,f.now=lo,f.pad=Lb,f.padEnd=zb,f.padStart=qb,f.parseInt=Ub,f.random=Cb,f.reduce=Z0,f.reduceRight=X0,f.repeat=$b,f.replace=kb,f.result=vb,f.round=LE,f.runInContext=D,f.sample=t1,f.size=n1,f.snakeCase=Mb,f.some=i1,f.sortedIndex=e0,f.sortedIndexBy=r0,f.sortedIndexOf=n0,f.sortedLastIndex=i0,f.sortedLastIndexBy=s0,f.sortedLastIndexOf=o0,f.startCase=Kb,f.startsWith=Fb,f.subtract=zE,f.sum=qE,f.sumBy=UE,f.template=Vb,f.times=bE,f.toFinite=nn,f.toInteger=vt,f.toLength=rp,f.toLower=Gb,f.toNumber=Sr,f.toSafeInteger=G1,f.toString=jt,f.toUpper=Wb,f.trim=Bb,f.trimEnd=Yb,f.trimStart=Qb,f.truncate=Zb,f.unescape=Xb,f.uniqueId=DE,f.upperCase=Jb,f.upperFirst=wc,f.each=Hl,f.eachRight=Kl,f.first=Ul,Ec(f,function(){var t={};return kr(f,function(e,s){Ut.call(f.prototype,s)||(t[s]=e)}),t}(),{chain:!1}),f.VERSION=i,_r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){f[t].placeholder=f}),_r(["drop","take"],function(t,e){St.prototype[t]=function(s){s=s===r?1:ze(vt(s),0);var c=this.__filtered__&&!e?new St(this):this.clone();return c.__filtered__?c.__takeCount__=Ge(s,c.__takeCount__):c.__views__.push({size:Ge(s,G),type:t+(c.__dir__<0?"Right":"")}),c},St.prototype[t+"Right"]=function(s){return this.reverse()[t](s).reverse()}}),_r(["filter","map","takeWhile"],function(t,e){var s=e+1,c=s==A||s==Lt;St.prototype[t]=function(l){var g=this.clone();return g.__iteratees__.push({iteratee:it(l,3),type:s}),g.__filtered__=g.__filtered__||c,g}}),_r(["head","last"],function(t,e){var s="take"+(e?"Right":"");St.prototype[t]=function(){return this[s](1).value()[0]}}),_r(["initial","tail"],function(t,e){var s="drop"+(e?"":"Right");St.prototype[t]=function(){return this.__filtered__?new St(this):this[s](1)}}),St.prototype.compact=function(){return this.filter(ur)},St.prototype.find=function(t){return this.filter(t).head()},St.prototype.findLast=function(t){return this.reverse().find(t)},St.prototype.invokeMap=Et(function(t,e){return typeof t=="function"?new St(this):this.map(function(s){return Mi(s,t,e)})}),St.prototype.reject=function(t){return this.filter(fo(it(t)))},St.prototype.slice=function(t,e){t=vt(t);var s=this;return s.__filtered__&&(t>0||e<0)?new St(s):(t<0?s=s.takeRight(-t):t&&(s=s.drop(t)),e!==r&&(e=vt(e),s=e<0?s.dropRight(-e):s.take(e-t)),s)},St.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},St.prototype.toArray=function(){return this.take(G)},kr(St.prototype,function(t,e){var s=/^(?:filter|find|map|reject)|While$/.test(e),c=/^(?:head|last)$/.test(e),l=f[c?"take"+(e=="last"?"Right":""):e],g=c||/^find/.test(e);l&&(f.prototype[e]=function(){var m=this.__wrapped__,b=c?[1]:arguments,P=m instanceof St,q=b[0],U=P||ft(m),M=function(Dt){var Ot=l.apply(f,fn([Dt],b));return c&&W?Ot[0]:Ot};U&&s&&typeof q=="function"&&q.length!=1&&(P=U=!1);var W=this.__chain__,tt=!!this.__actions__.length,st=g&&!W,wt=P&&!tt;if(!g&&U){m=wt?m:new St(this);var ot=t.apply(m,b);return ot.__actions__.push({func:uo,args:[M],thisArg:r}),new Er(ot,W)}return st&&wt?t.apply(this,b):(ot=this.thru(M),st?c?ot.value()[0]:ot.value():ot)})}),_r(["pop","push","shift","sort","splice","unshift"],function(t){var e=Ls[t],s=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",c=/^(?:pop|shift)$/.test(t);f.prototype[t]=function(){var l=arguments;if(c&&!this.__chain__){var g=this.value();return e.apply(ft(g)?g:[],l)}return this[s](function(m){return e.apply(ft(m)?m:[],l)})}}),kr(St.prototype,function(t,e){var s=f[e];if(s){var c=s.name+"";Ut.call(si,c)||(si[c]=[]),si[c].push({name:e,func:s})}}),si[ro(r,gt).name]=[{name:"wrapper",func:r}],St.prototype.clone=Xm,St.prototype.reverse=Jm,St.prototype.value=tw,f.prototype.at=x0,f.prototype.chain=A0,f.prototype.commit=N0,f.prototype.next=T0,f.prototype.plant=j0,f.prototype.reverse=L0,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=z0,f.prototype.first=f.prototype.head,ji&&(f.prototype[ji]=R0),f},ri=Nm();_e?((_e.exports=ri)._=ri,Gt._=ri):Ct._=ri}).call(Ci)})(Qo,Qo.exports);var Rv=Object.defineProperty,jv=Object.defineProperties,Lv=Object.getOwnPropertyDescriptors,eh=Object.getOwnPropertySymbols,zv=Object.prototype.hasOwnProperty,qv=Object.prototype.propertyIsEnumerable,rh=(o,n,r)=>n in o?Rv(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,hs=(o,n)=>{for(var r in n||(n={}))zv.call(n,r)&&rh(o,r,n[r]);if(eh)for(var r of eh(n))qv.call(n,r)&&rh(o,r,n[r]);return o},Uv=(o,n)=>jv(o,Lv(n));function un(o,n,r){var i;const a=I3(o);return((i=n.rpcMap)==null?void 0:i[a.reference])||`${Tv}?chainId=${a.namespace}:${a.reference}&projectId=${r}`}function On(o){return o.includes(":")?o.split(":")[1]:o}function nh(o){return o.map(n=>`${n.split(":")[0]}:${n.split(":")[1]}`)}function $v(o,n){const r=Object.keys(n.namespaces).filter(a=>a.includes(o));if(!r.length)return[];const i=[];return r.forEach(a=>{const u=n.namespaces[a].accounts;i.push(...u)}),i}function kv(o={},n={}){const r=ih(o),i=ih(n);return Qo.exports.merge(r,i)}function ih(o){var n,r,i,a;const u={};if(!Eo(o))return u;for(const[p,y]of Object.entries(o)){const w=xp(p)?[p]:y.chains,d=y.methods||[],_=y.events||[],C=y.rpcMap||{},S=Yi(p);u[S]=Uv(hs(hs({},u[S]),y),{chains:Ac(w,(n=u[S])==null?void 0:n.chains),methods:Ac(d,(r=u[S])==null?void 0:r.methods),events:Ac(_,(i=u[S])==null?void 0:i.events),rpcMap:hs(hs({},C),(a=u[S])==null?void 0:a.rpcMap)})}return u}function Mv(o){return o.includes(":")?o.split(":")[2]:o}function Hv(o){const n={};for(const[r,i]of Object.entries(o)){const a=i.methods||[],u=i.events||[],p=i.accounts||[],y=xp(r)?[r]:i.chains?i.chains:nh(i.accounts);n[r]={chains:y,methods:a,events:u,accounts:p}}return n}function Zo(o){return typeof o=="number"?o:o.includes("0x")?parseInt(o,16):o.includes(":")?Number(o.split(":")[1]):Number(o)}const sh={},ee=o=>sh[o],Xo=(o,n)=>{sh[o]=n};class Kv{constructor(n){this.name="polkadot",this.namespace=n.namespace,this.events=ee("events"),this.client=ee("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Gr.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}getAccounts(){const n=this.namespace.accounts;return n?n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var i;const a=On(r);n[a]=this.createHttpProvider(a,(i=this.namespace.rpcMap)==null?void 0:i[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const i=this.createHttpProvider(n,r);i&&(this.httpProviders[n]=i)}createHttpProvider(n,r){const i=r||un(n,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);return new on(new In(i,ee("disableProviderPing")))}}class Fv{constructor(n){this.name="eip155",this.namespace=n.namespace,this.events=ee("events"),this.client=ee("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(n){switch(n.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(n);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(n.request.method)?await this.client.request(n):this.getHttpProvider().request(n.request)}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(parseInt(n),r),this.chainId=parseInt(n),this.events.emit(Gr.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}createHttpProvider(n,r){const i=r||un(`${this.name}:${n}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);return new on(new In(i,ee("disableProviderPing")))}setHttpProvider(n,r){const i=this.createHttpProvider(n,r);i&&(this.httpProviders[n]=i)}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var i;const a=parseInt(On(r));n[a]=this.createHttpProvider(a,(i=this.namespace.rpcMap)==null?void 0:i[r])}),n}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const n=this.chainId,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}async handleSwitchChain(n){var r,i;let a=n.request.params?(r=n.request.params[0])==null?void 0:r.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const u=parseInt(a,16);if(this.isChainApproved(u))this.setDefaultChain(`${u}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:n.topic,request:{method:n.request.method,params:[{chainId:a}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${u}`);else throw new Error(`Failed to switch to chain 'eip155:${u}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(n){return this.namespace.chains.includes(`${this.name}:${n}`)}}class Vv{constructor(n){this.name="solana",this.namespace=n.namespace,this.events=ee("events"),this.client=ee("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Gr.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var i;const a=On(r);n[a]=this.createHttpProvider(a,(i=this.namespace.rpcMap)==null?void 0:i[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const i=this.createHttpProvider(n,r);i&&(this.httpProviders[n]=i)}createHttpProvider(n,r){const i=r||un(n,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);return new on(new In(i,ee("disableProviderPing")))}}class Gv{constructor(n){this.name="cosmos",this.namespace=n.namespace,this.events=ee("events"),this.client=ee("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Gr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var i;const a=On(r);n[a]=this.createHttpProvider(a,(i=this.namespace.rpcMap)==null?void 0:i[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const i=this.createHttpProvider(n,r);i&&(this.httpProviders[n]=i)}createHttpProvider(n,r){const i=r||un(n,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);return new on(new In(i,ee("disableProviderPing")))}}class Wv{constructor(n){this.name="cip34",this.namespace=n.namespace,this.events=ee("events"),this.client=ee("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Gr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{const i=this.getCardanoRPCUrl(r),a=On(r);n[a]=this.createHttpProvider(a,i)}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}getCardanoRPCUrl(n){const r=this.namespace.rpcMap;if(r)return r[n]}setHttpProvider(n,r){const i=this.createHttpProvider(n,r);i&&(this.httpProviders[n]=i)}createHttpProvider(n,r){const i=r||this.getCardanoRPCUrl(n);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);return new on(new In(i,ee("disableProviderPing")))}}class Bv{constructor(n){this.name="elrond",this.namespace=n.namespace,this.events=ee("events"),this.client=ee("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Gr.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var i;const a=On(r);n[a]=this.createHttpProvider(a,(i=this.namespace.rpcMap)==null?void 0:i[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const i=this.createHttpProvider(n,r);i&&(this.httpProviders[n]=i)}createHttpProvider(n,r){const i=r||un(n,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);return new on(new In(i,ee("disableProviderPing")))}}class Yv{constructor(n){this.name="multiversx",this.namespace=n.namespace,this.events=ee("events"),this.client=ee("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Gr.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var i;const a=On(r);n[a]=this.createHttpProvider(a,(i=this.namespace.rpcMap)==null?void 0:i[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const i=this.createHttpProvider(n,r);i&&(this.httpProviders[n]=i)}createHttpProvider(n,r){const i=r||un(n,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);return new on(new In(i,ee("disableProviderPing")))}}class Qv{constructor(n){this.name="near",this.namespace=n.namespace,this.events=ee("events"),this.client=ee("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){if(this.chainId=n,!this.httpProviders[n]){const i=r||un(`${this.name}:${n}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);this.setHttpProvider(n,i)}this.events.emit(Gr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const n=this.namespace.accounts;return n?n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var i;n[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const i=this.createHttpProvider(n,r);i&&(this.httpProviders[n]=i)}createHttpProvider(n,r){const i=r||un(n,this.namespace);return typeof i>"u"?void 0:new on(new In(i,ee("disableProviderPing")))}}var Zv=Object.defineProperty,Xv=Object.defineProperties,Jv=Object.getOwnPropertyDescriptors,oh=Object.getOwnPropertySymbols,tm=Object.prototype.hasOwnProperty,em=Object.prototype.propertyIsEnumerable,ah=(o,n,r)=>n in o?Zv(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,ls=(o,n)=>{for(var r in n||(n={}))tm.call(n,r)&&ah(o,r,n[r]);if(oh)for(var r of oh(n))em.call(n,r)&&ah(o,r,n[r]);return o},Jo=(o,n)=>Xv(o,Jv(n));class ta{constructor(n){this.events=new jc,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=n,this.logger=typeof(n==null?void 0:n.logger)<"u"&&typeof(n==null?void 0:n.logger)!="string"?n.logger:It.pino(It.getDefaultLoggerOptions({level:(n==null?void 0:n.logger)||Ju})),this.disableProviderPing=(n==null?void 0:n.disableProviderPing)||!1}static async init(n){const r=new ta(n);return await r.initialize(),r}async request(n,r){const[i,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:ls({},n),chainId:`${i}:${a}`,topic:this.session.topic})}sendAsync(n,r,i){const a=new Date().getTime();this.request(n,i).then(u=>r(null,Po(a,u))).catch(u=>r(u,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var n;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(n=this.session)==null?void 0:n.topic,reason:Be("USER_DISCONNECTED")}),await this.cleanup()}async connect(n){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(n),await this.cleanupPendingPairings(),!n.skipPairing)return await this.pair(n.pairingTopic)}on(n,r){this.events.on(n,r)}once(n,r){this.events.once(n,r)}removeListener(n,r){this.events.removeListener(n,r)}off(n,r){this.events.off(n,r)}get isWalletConnect(){return!0}async pair(n){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:a}=await this.client.connect({pairingTopic:n,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await a().then(u=>{this.session=u,this.namespaces||(this.namespaces=Hv(u.namespaces),this.persist("namespaces",this.namespaces))}).catch(u=>{if(u.message!==Qu)throw u;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(n,r){try{if(!this.session)return;const[i,a]=this.validateChain(n);this.getProvider(i).setDefaultChain(a,r)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(n={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(gi(r)){for(const i of r)n.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const n=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[n]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Ov.init({logger:this.providerOpts.logger||Ju,relayUrl:this.providerOpts.relayUrl||xv,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const n=[...new Set(Object.keys(this.session.namespaces).map(r=>Yi(r)))];Xo("client",this.client),Xo("events",this.events),Xo("disableProviderPing",this.disableProviderPing),n.forEach(r=>{if(!this.session)return;const i=$v(r,this.session),a=nh(i),u=kv(this.namespaces,this.optionalNamespaces),p=Jo(ls({},u[r]),{accounts:i,chains:a});switch(r){case"eip155":this.rpcProviders[r]=new Fv({namespace:p});break;case"solana":this.rpcProviders[r]=new Vv({namespace:p});break;case"cosmos":this.rpcProviders[r]=new Gv({namespace:p});break;case"polkadot":this.rpcProviders[r]=new Kv({namespace:p});break;case"cip34":this.rpcProviders[r]=new Wv({namespace:p});break;case"elrond":this.rpcProviders[r]=new Bv({namespace:p});break;case"multiversx":this.rpcProviders[r]=new Yv({namespace:p});break;case"near":this.rpcProviders[r]=new Qv({namespace:p});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",n=>{this.events.emit("session_ping",n)}),this.client.on("session_event",n=>{const{params:r}=n,{event:i}=r;if(i.name==="accountsChanged"){const a=i.data;a&&gi(a)&&this.events.emit("accountsChanged",a.map(Mv))}else if(i.name==="chainChanged"){const a=r.chainId,u=r.event.data,p=Yi(a),y=Zo(a)!==Zo(u)?`${p}:${Zo(u)}`:a;this.onChainChanged(y)}else this.events.emit(i.name,i.data);this.events.emit("session_event",n)}),this.client.on("session_update",({topic:n,params:r})=>{var i;const{namespaces:a}=r,u=(i=this.client)==null?void 0:i.session.get(n);this.session=Jo(ls({},u),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:n,params:r})}),this.client.on("session_delete",async n=>{await this.cleanup(),this.events.emit("session_delete",n),this.events.emit("disconnect",Jo(ls({},Be("USER_DISCONNECTED")),{data:n.topic}))}),this.on(Gr.DEFAULT_CHAIN_CHANGED,n=>{this.onChainChanged(n,!0)})}getProvider(n){if(!this.rpcProviders[n])throw new Error(`Provider not found: ${n}`);return this.rpcProviders[n]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(n=>{var r;this.getProvider(n).updateNamespace((r=this.session)==null?void 0:r.namespaces[n])})}setNamespaces(n){const{namespaces:r,optionalNamespaces:i,sessionProperties:a}=n;r&&Object.keys(r).length&&(this.namespaces=r),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",i)}validateChain(n){const[r,i]=(n==null?void 0:n.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,i];if(r&&!Object.keys(this.namespaces||{}).map(p=>Yi(p)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&i)return[r,i];const a=Yi(Object.keys(this.namespaces)[0]),u=this.rpcProviders[a].getDefaultChain();return[a,u]}async requestAccounts(){const[n]=this.validateChain();return await this.getProvider(n).requestAccounts()}onChainChanged(n,r=!1){var i;if(!this.namespaces)return;const[a,u]=this.validateChain(n);r||this.getProvider(a).setDefaultChain(u),((i=this.namespaces[a])!=null?i:this.namespaces[`${a}:${u}`]).defaultChain=u,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",u)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(n,r){this.client.core.storage.setItem(`${th}/${n}`,r)}async getFromStore(n){return await this.client.core.storage.getItem(`${th}/${n}`)}}let ch,uh,hh,lh,ph;ch=ta,uh="wc",hh="ethereum_provider",lh=`${uh}@2:${hh}:`,ph="https://rpc.walletconnect.com/v1/",Ji=["eth_sendTransaction","personal_sign"],zc=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Xi=["chainChanged","accountsChanged"],Lc=["chainChanged","accountsChanged","message","disconnect","connect"];var rm=Object.defineProperty,nm=Object.defineProperties,im=Object.getOwnPropertyDescriptors,fh=Object.getOwnPropertySymbols,sm=Object.prototype.hasOwnProperty,om=Object.prototype.propertyIsEnumerable,dh=(o,n,r)=>n in o?rm(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,Oi=(o,n)=>{for(var r in n||(n={}))sm.call(n,r)&&dh(o,r,n[r]);if(fh)for(var r of fh(n))om.call(n,r)&&dh(o,r,n[r]);return o},gh=(o,n)=>nm(o,im(n));function ps(o){return Number(o[0].split(":")[1])}function ea(o){return`0x${o.toString(16)}`}function am(o){const{chains:n,optionalChains:r,methods:i,optionalMethods:a,events:u,optionalEvents:p,rpcMap:y}=o;if(!gi(n))throw new Error("Invalid chains");const w={chains:n,methods:i||Ji,events:u||Xi,rpcMap:Oi({},n.length?{[ps(n)]:y[ps(n)]}:{})},d=u==null?void 0:u.filter(z=>!Xi.includes(z)),_=i==null?void 0:i.filter(z=>!Ji.includes(z));if(!r&&!p&&!a&&!(d!=null&&d.length)&&!(_!=null&&_.length))return{required:n.length?w:void 0};const C=(d==null?void 0:d.length)&&(_==null?void 0:_.length)||!r,S={chains:[...new Set(C?w.chains.concat(r||[]):r)],methods:[...new Set(w.methods.concat(a!=null&&a.length?a:zc))],events:[...new Set(w.events.concat(p!=null&&p.length?p:Lc))],rpcMap:y};return{required:n.length?w:void 0,optional:r.length?S:void 0}}So=class{constructor(){this.events=new Kr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=lh,this.on=(o,n)=>(this.events.on(o,n),this),this.once=(o,n)=>(this.events.once(o,n),this),this.removeListener=(o,n)=>(this.events.removeListener(o,n),this),this.off=(o,n)=>(this.events.off(o,n),this),this.parseAccount=o=>this.isCompatibleChainId(o)?this.parseAccountId(o).address:o,this.signer={},this.rpc={}}static async init(o){const n=new So;return await n.initialize(o),n}async request(o){return await this.signer.request(o,this.formatChainId(this.chainId))}sendAsync(o,n){this.signer.sendAsync(o,n,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(o){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(o);const{required:n,optional:r}=am(this.rpc);try{const i=await new Promise(async(u,p)=>{var y;this.rpc.showQrModal&&((y=this.modal)==null||y.subscribeModal(w=>{!w.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),p(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(gh(Oi({namespaces:Oi({},n&&{[this.namespace]:n})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:o==null?void 0:o.pairingTopic})).then(w=>{u(w)}).catch(w=>{p(new Error(w.message))})});if(!i)return;const a=P3(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:ea(this.chainId)})}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",o=>{const{params:n}=o,{event:r}=n;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",o)}),this.signer.on("chainChanged",o=>{const n=parseInt(o);this.chainId=n,this.events.emit("chainChanged",ea(this.chainId)),this.persist()}),this.signer.on("session_update",o=>{this.events.emit("session_update",o)}),this.signer.on("session_delete",o=>{this.reset(),this.events.emit("session_delete",o),this.events.emit("disconnect",gh(Oi({},Be("USER_DISCONNECTED")),{data:o.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",o=>{var n,r;this.rpc.showQrModal&&((n=this.modal)==null||n.closeModal(),(r=this.modal)==null||r.openModal({uri:o})),this.events.emit("display_uri",o)})}switchEthereumChain(o){this.request({method:"wallet_switchEthereumChain",params:[{chainId:o.toString(16)}]})}isCompatibleChainId(o){return typeof o=="string"?o.startsWith(`${this.namespace}:`):!1}formatChainId(o){return`${this.namespace}:${o}`}parseChainId(o){return Number(o.split(":")[1])}setChainIds(o){const n=o.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));n.length&&(this.chainId=n[0],this.events.emit("chainChanged",ea(this.chainId)),this.persist())}setChainId(o){if(this.isCompatibleChainId(o)){const n=this.parseChainId(o);this.chainId=n,this.switchEthereumChain(n)}}parseAccountId(o){const[n,r,i]=o.split(":");return{chainId:`${n}:${r}`,address:i}}setAccounts(o){this.accounts=o.filter(n=>this.parseChainId(this.parseAccountId(n).chainId)===this.chainId).map(n=>this.parseAccountId(n).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(o){var n,r;const i=(n=o==null?void 0:o.chains)!=null?n:[],a=(r=o==null?void 0:o.optionalChains)!=null?r:[],u=i.concat(a);if(!u.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const p=i.length?(o==null?void 0:o.methods)||Ji:[],y=i.length?(o==null?void 0:o.events)||Xi:[],w=(o==null?void 0:o.optionalMethods)||[],d=(o==null?void 0:o.optionalEvents)||[],_=(o==null?void 0:o.rpcMap)||this.buildRpcMap(u,o.projectId),C=(o==null?void 0:o.qrModalOptions)||void 0;return{chains:i==null?void 0:i.map(S=>this.formatChainId(S)),optionalChains:a.map(S=>this.formatChainId(S)),methods:p,events:y,optionalMethods:w,optionalEvents:d,rpcMap:_,showQrModal:!!(o!=null&&o.showQrModal),qrModalOptions:C,projectId:o.projectId,metadata:o.metadata}}buildRpcMap(o,n){const r={};return o.forEach(i=>{r[i]=this.getRpcUrl(i,n)}),r}async initialize(o){if(this.rpc=this.getRpcConfig(o),this.chainId=this.rpc.chains.length?ps(this.rpc.chains):ps(this.rpc.optionalChains),this.signer=await ch.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:o.disableProviderPing,relayUrl:o.relayUrl,storageOptions:o.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let n;try{const{WalletConnectModal:r}=await S3(()=>import("./index-80ecfe6c.js").then(async i=>(await i.__tla,i)).then(i=>i.i),["assets/index-80ecfe6c.js","assets/index-631ad936.js","assets/index-04dfa1e9.css"]);n=r}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(n)try{this.modal=new n(Oi({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(r){throw this.signer.logger.error(r),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(o){if(!o)return;const{chains:n,optionalChains:r,rpcMap:i}=o;n&&gi(n)&&(this.rpc.chains=n.map(a=>this.formatChainId(a)),n.forEach(a=>{this.rpc.rpcMap[a]=(i==null?void 0:i[a])||this.getRpcUrl(a)})),r&&gi(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r==null?void 0:r.map(a=>this.formatChainId(a)),r.forEach(a=>{this.rpc.rpcMap[a]=(i==null?void 0:i[a])||this.getRpcUrl(a)}))}getRpcUrl(o,n){var r;return((r=this.rpc.rpcMap)==null?void 0:r[o])||`${ph}?chainId=eip155:${o}&projectId=${n||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const o=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),n=this.session.namespaces[`${this.namespace}:${o}`]?this.session.namespaces[`${this.namespace}:${o}`]:this.session.namespaces[this.namespace];this.setChainIds(o?[this.formatChainId(o)]:n==null?void 0:n.accounts),this.setAccounts(n==null?void 0:n.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(o){return typeof o=="string"||o instanceof String?[this.parseAccount(o)]:o.map(n=>this.parseAccount(n))}},Np=So});export{Np as EthereumProvider,Lc as OPTIONAL_EVENTS,zc as OPTIONAL_METHODS,Xi as REQUIRED_EVENTS,Ji as REQUIRED_METHODS,j3 as __tla,So as default};

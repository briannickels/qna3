import{D as Ae,E as Ut,G as L,__tla as Nt}from"./index-631ad936.js";let Se,Te,Be,Ce,M,De,K,z,B,W,Ie,X,Me,Ue,Q,U,Y,Z,N,ee,Ft=Promise.all([(()=>{try{return Nt}catch{}})()]).then(async()=>{(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="94701cad-573b-4c15-b4e4-b4dabc9a43be",e._sentryDebugIdIdentifier="sentry-dbid-94701cad-573b-4c15-b4e4-b4dabc9a43be")}catch{}})();var F={exports:{}},j=typeof Reflect=="object"?Reflect:null,te=j&&typeof j.apply=="function"?j.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},C;j&&typeof j.ownKeys=="function"?C=j.ownKeys:Object.getOwnPropertySymbols?C=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:C=function(e){return Object.getOwnPropertyNames(e)};function Ne(e){console&&console.warn&&console.warn(e)}var ne=Number.isNaN||function(e){return e!==e};function h(){h.init.call(this)}F.exports=h,F.exports.once=$e,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var re=10;function D(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return re},set:function(e){if(typeof e!="number"||e<0||ne(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");re=e}}),h.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ne(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function oe(e){return e._maxListeners===void 0?h.defaultMaxListeners:e._maxListeners}h.prototype.getMaxListeners=function(){return oe(this)},h.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o=e==="error",s=this._events;if(s!==void 0)o=o&&s.error===void 0;else if(!o)return!1;if(o){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var c=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw c.context=i,c}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")te(u,this,t);else for(var m=u.length,f=ue(u,m),n=0;n<m;++n)te(f[n],this,t);return!0};function ie(e,t,n,o){var s,i,c;if(D(n),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),c=i[t]),c===void 0)c=i[t]=n,++e._eventsCount;else if(typeof c=="function"?c=i[t]=o?[n,c]:[c,n]:o?c.unshift(n):c.push(n),s=oe(e),s>0&&c.length>s&&!c.warned){c.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=c.length,Ne(u)}return e}h.prototype.addListener=function(e,t){return ie(this,e,t,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(e,t){return ie(this,e,t,!0)};function Fe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function se(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=Fe.bind(o);return s.listener=n,o.wrapFn=s,s}h.prototype.once=function(e,t){return D(t),this.on(e,se(this,e,t)),this},h.prototype.prependOnceListener=function(e,t){return D(t),this.prependListener(e,se(this,e,t)),this},h.prototype.removeListener=function(e,t){var n,o,s,i,c;if(D(t),o=this._events,o===void 0)return this;if(n=o[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){c=n[i].listener,s=i;break}if(s<0)return this;s===0?n.shift():ke(n,s),n.length===1&&(o[e]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(e){var t,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),i;for(o=0;o<s.length;++o)i=s[o],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function ae(e,t,n){var o=e._events;if(o===void 0)return[];var s=o[t];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?He(s):ue(s,s.length)}h.prototype.listeners=function(e){return ae(this,e,!0)},h.prototype.rawListeners=function(e){return ae(this,e,!1)},h.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):ce.call(e,t)},h.prototype.listenerCount=ce;function ce(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?C(this._events):[]};function ue(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}function ke(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function He(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function $e(e,t){return new Promise(function(n,o){function s(c){e.removeListener(t,i),o(c)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",s),n([].slice.call(arguments))}fe(e,t,i,{once:!0}),t!=="error"&&qe(e,s,{once:!0})})}function qe(e,t,n){typeof e.on=="function"&&fe(e,"error",t,n)}function fe(e,t,n,o){if(typeof e.on=="function")o.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(i){o.once&&e.removeEventListener(t,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}B=F.exports;let le,he;Se=Ae(B),le=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),he=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(o,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)},ee=function(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return he(e)}catch{return e}},M=function(e){return typeof e=="string"?e:le(e)||""};const Ge="PARSE_ERROR",Ve="INVALID_REQUEST",Je="METHOD_NOT_FOUND",Ke="INVALID_PARAMS",pe="INTERNAL_ERROR",k="SERVER_ERROR",ze=[-32700,-32600,-32601,-32602,-32603],R={[Ge]:{code:-32700,message:"Parse error"},[Ve]:{code:-32600,message:"Invalid Request"},[Je]:{code:-32601,message:"Method not found"},[Ke]:{code:-32602,message:"Invalid params"},[pe]:{code:-32603,message:"Internal error"},[k]:{code:-32e3,message:"Server error"}},de=k;function We(e){return ze.includes(e)}function ye(e){return Object.keys(R).includes(e)?R[e]:R[de]}function Xe(e){return Object.values(R).find(n=>n.code===e)||R[de]}z=function(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e},K={};var H=function(e,t){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])},H(e,t)};function Qe(e,t){H(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var $=function(){return $=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},$.apply(this,arguments)};function Ye(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(n[o[s]]=e[o[s]]);return n}function Ze(e,t,n,o){var s=arguments.length,i=s<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,n):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(c=e[u])&&(i=(s<3?c(i):s>3?c(t,n,i):c(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i}function et(e,t){return function(n,o){t(n,o,e)}}function tt(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function nt(e,t,n,o){function s(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(b){try{f(o.next(b))}catch(w){c(w)}}function m(b){try{f(o.throw(b))}catch(w){c(w)}}function f(b){b.done?i(b.value):s(b.value).then(u,m)}f((o=o.apply(e,t||[])).next())})}function rt(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,s,i,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(f){return function(b){return m([f,b])}}function m(f){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,s=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){n.label=f[1];break}if(f[0]===6&&n.label<i[1]){n.label=i[1],i=f;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(f);break}i[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(b){f=[6,b],s=0}finally{o=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function ot(e,t,n,o){o===void 0&&(o=n),e[o]=t[n]}function it(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function q(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,i=[],c;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)i.push(s.value)}catch(u){c={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return i}function st(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ve(arguments[t]));return e}function at(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var o=Array(e),s=0,t=0;t<n;t++)for(var i=arguments[t],c=0,u=i.length;c<u;c++,s++)o[s]=i[c];return o}function A(e){return this instanceof A?(this.v=e,this):new A(e)}function ct(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),s,i=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(y){o[y]&&(s[y]=function(_){return new Promise(function(d,S){i.push([y,_,d,S])>1||u(y,_)})})}function u(y,_){try{m(o[y](_))}catch(d){w(i[0][3],d)}}function m(y){y.value instanceof A?Promise.resolve(y.value.v).then(f,b):w(i[0][2],y)}function f(y){u("next",y)}function b(y){u("throw",y)}function w(y,_){y(_),i.shift(),i.length&&u(i[0][0],i[0][1])}}function ut(e){var t,n;return t={},o("next"),o("throw",function(s){throw s}),o("return"),t[Symbol.iterator]=function(){return this},t;function o(s,i){t[s]=e[s]?function(c){return(n=!n)?{value:A(e[s](c)),done:s==="return"}:i?i(c):c}:i}}function ft(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof q=="function"?q(e):e[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=e[i]&&function(c){return new Promise(function(u,m){c=e[i](c),s(u,m,c.done,c.value)})}}function s(i,c,u,m){Promise.resolve(m).then(function(f){i({value:f,done:u})},c)}}function lt(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function ht(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function pt(e){return e&&e.__esModule?e:{default:e}}function dt(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function yt(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const vt=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return $},__asyncDelegator:ut,__asyncGenerator:ct,__asyncValues:ft,__await:A,__awaiter:nt,__classPrivateFieldGet:dt,__classPrivateFieldSet:yt,__createBinding:ot,__decorate:Ze,__exportStar:it,__extends:Qe,__generator:rt,__importDefault:pt,__importStar:ht,__makeTemplateObject:lt,__metadata:tt,__param:et,__read:ve,__rest:Ye,__spread:st,__spreadArrays:at,__values:q},Symbol.toStringTag,{value:"Module"})),bt=Ut(vt);var O={},be;function mt(){if(be)return O;be=1,Object.defineProperty(O,"__esModule",{value:!0}),O.isBrowserCryptoAvailable=O.getSubtleCrypto=O.getBrowerCrypto=void 0;function e(){return(L===null||L===void 0?void 0:L.crypto)||(L===null||L===void 0?void 0:L.msCrypto)||{}}O.getBrowerCrypto=e;function t(){const o=e();return o.subtle||o.webkitSubtle}O.getSubtleCrypto=t;function n(){return!!e()&&!!t()}return O.isBrowserCryptoAvailable=n,O}var x={},me;function gt(){if(me)return x;me=1,Object.defineProperty(x,"__esModule",{value:!0}),x.isBrowser=x.isNode=x.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}x.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}x.isNode=t;function n(){return!e()&&!t()}return x.isBrowser=n,x}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=bt;t.__exportStar(mt(),e),t.__exportStar(gt(),e)})(K),N=function(e=3){const t=Date.now()*Math.pow(10,e),n=Math.floor(Math.random()*Math.pow(10,e));return t+n},Z=function(e=6){return BigInt(N(e))},Y=function(e,t,n){return{id:n||N(),jsonrpc:"2.0",method:e,params:t}},Ue=function(e,t){return{id:e,jsonrpc:"2.0",result:t}},W=function(e,t,n){return{id:e,jsonrpc:"2.0",error:wt(t,n)}};function wt(e,t){return typeof e>"u"?ye(pe):(typeof e=="string"&&(e=Object.assign(Object.assign({},ye(k)),{message:e})),typeof t<"u"&&(e.data=t),We(e.code)&&(e=Xe(e.code)),e)}class ge{}Be=class extends ge{constructor(e){super()}};class _t extends ge{constructor(){super()}}class Et extends _t{constructor(t){super()}}const Ot="^https?:",xt="^wss?:";function Pt(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function we(e,t){const n=Pt(e);return typeof n>"u"?!1:new RegExp(t).test(n)}function _e(e){return we(e,Ot)}Me=function(e){return we(e,xt)},De=function(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)};function Ee(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}Ie=function(e){return Ee(e)&&"method"in e},X=function(e){return Ee(e)&&(Q(e)||U(e))},Q=function(e){return"result"in e},U=function(e){return"error"in e},Ce=class extends Et{constructor(e){super(e),this.events=new B.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Y(e.method,e.params||[],e.id||Z().toString()),t)}async requestStrict(e,t){return new Promise(async(n,o)=>{if(!this.connection.connected)try{await this.open()}catch(s){o(s)}this.events.on(`${e.id}`,s=>{U(s)?o(s.error):n(s.result)});try{await this.connection.send(e,t)}catch(s){o(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),X(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};var G={exports:{}};(function(e,t){var n=typeof self<"u"?self:L,o=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(c){var u={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function m(r){return r&&DataView.prototype.isPrototypeOf(r)}if(u.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=ArrayBuffer.isView||function(r){return r&&f.indexOf(Object.prototype.toString.call(r))>-1};function w(r){if(typeof r!="string"&&(r=String(r)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(r))throw new TypeError("Invalid character in header field name");return r.toLowerCase()}function y(r){return typeof r!="string"&&(r=String(r)),r}function _(r){var a={next:function(){var l=r.shift();return{done:l===void 0,value:l}}};return u.iterable&&(a[Symbol.iterator]=function(){return a}),a}function d(r){this.map={},r instanceof d?r.forEach(function(a,l){this.append(l,a)},this):Array.isArray(r)?r.forEach(function(a){this.append(a[0],a[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(a){this.append(a,r[a])},this)}d.prototype.append=function(r,a){r=w(r),a=y(a);var l=this.map[r];this.map[r]=l?l+", "+a:a},d.prototype.delete=function(r){delete this.map[w(r)]},d.prototype.get=function(r){return r=w(r),this.has(r)?this.map[r]:null},d.prototype.has=function(r){return this.map.hasOwnProperty(w(r))},d.prototype.set=function(r,a){this.map[w(r)]=y(a)},d.prototype.forEach=function(r,a){for(var l in this.map)this.map.hasOwnProperty(l)&&r.call(a,this.map[l],l,this)},d.prototype.keys=function(){var r=[];return this.forEach(function(a,l){r.push(l)}),_(r)},d.prototype.values=function(){var r=[];return this.forEach(function(a){r.push(a)}),_(r)},d.prototype.entries=function(){var r=[];return this.forEach(function(a,l){r.push([l,a])}),_(r)},u.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function S(r){if(r.bodyUsed)return Promise.reject(new TypeError("Already read"));r.bodyUsed=!0}function Le(r){return new Promise(function(a,l){r.onload=function(){a(r.result)},r.onerror=function(){l(r.error)}})}function At(r){var a=new FileReader,l=Le(a);return a.readAsArrayBuffer(r),l}function St(r){var a=new FileReader,l=Le(a);return a.readAsText(r),l}function Tt(r){for(var a=new Uint8Array(r),l=new Array(a.length),g=0;g<a.length;g++)l[g]=String.fromCharCode(a[g]);return l.join("")}function je(r){if(r.slice)return r.slice(0);var a=new Uint8Array(r.byteLength);return a.set(new Uint8Array(r)),a.buffer}function Re(){return this.bodyUsed=!1,this._initBody=function(r){this._bodyInit=r,r?typeof r=="string"?this._bodyText=r:u.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:u.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():u.arrayBuffer&&u.blob&&m(r)?(this._bodyArrayBuffer=je(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||b(r))?this._bodyArrayBuffer=je(r):this._bodyText=r=Object.prototype.toString.call(r):this._bodyText="",this.headers.get("content-type")||(typeof r=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var r=S(this);if(r)return r;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?S(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(At)}),this.text=function(){var r=S(this);if(r)return r;if(this._bodyBlob)return St(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Tt(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(Dt)}),this.json=function(){return this.text().then(JSON.parse)},this}var Bt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Ct(r){var a=r.toUpperCase();return Bt.indexOf(a)>-1?a:r}function P(r,a){a=a||{};var l=a.body;if(r instanceof P){if(r.bodyUsed)throw new TypeError("Already read");this.url=r.url,this.credentials=r.credentials,a.headers||(this.headers=new d(r.headers)),this.method=r.method,this.mode=r.mode,this.signal=r.signal,!l&&r._bodyInit!=null&&(l=r._bodyInit,r.bodyUsed=!0)}else this.url=String(r);if(this.credentials=a.credentials||this.credentials||"same-origin",(a.headers||!this.headers)&&(this.headers=new d(a.headers)),this.method=Ct(a.method||this.method||"GET"),this.mode=a.mode||this.mode||null,this.signal=a.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&l)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(l)}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function Dt(r){var a=new FormData;return r.trim().split("&").forEach(function(l){if(l){var g=l.split("="),v=g.shift().replace(/\+/g," "),p=g.join("=").replace(/\+/g," ");a.append(decodeURIComponent(v),decodeURIComponent(p))}}),a}function It(r){var a=new d,l=r.replace(/\r?\n[\t ]+/g," ");return l.split(/\r?\n/).forEach(function(g){var v=g.split(":"),p=v.shift().trim();if(p){var I=v.join(":").trim();a.append(p,I)}}),a}Re.call(P.prototype);function E(r,a){a||(a={}),this.type="default",this.status=a.status===void 0?200:a.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in a?a.statusText:"OK",this.headers=new d(a.headers),this.url=a.url||"",this._initBody(r)}Re.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var r=new E(null,{status:0,statusText:""});return r.type="error",r};var Mt=[301,302,303,307,308];E.redirect=function(r,a){if(Mt.indexOf(a)===-1)throw new RangeError("Invalid status code");return new E(null,{status:a,headers:{location:r}})},c.DOMException=i.DOMException;try{new c.DOMException}catch{c.DOMException=function(r,a){this.message=r,this.name=a;var l=Error(r);this.stack=l.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function V(r,a){return new Promise(function(l,g){var v=new P(r,a);if(v.signal&&v.signal.aborted)return g(new c.DOMException("Aborted","AbortError"));var p=new XMLHttpRequest;function I(){p.abort()}p.onload=function(){var T={status:p.status,statusText:p.statusText,headers:It(p.getAllResponseHeaders()||"")};T.url="responseURL"in p?p.responseURL:T.headers.get("X-Request-URL");var J="response"in p?p.response:p.responseText;l(new E(J,T))},p.onerror=function(){g(new TypeError("Network request failed"))},p.ontimeout=function(){g(new TypeError("Network request failed"))},p.onabort=function(){g(new c.DOMException("Aborted","AbortError"))},p.open(v.method,v.url,!0),v.credentials==="include"?p.withCredentials=!0:v.credentials==="omit"&&(p.withCredentials=!1),"responseType"in p&&u.blob&&(p.responseType="blob"),v.headers.forEach(function(T,J){p.setRequestHeader(J,T)}),v.signal&&(v.signal.addEventListener("abort",I),p.onreadystatechange=function(){p.readyState===4&&v.signal.removeEventListener("abort",I)}),p.send(typeof v._bodyInit>"u"?null:v._bodyInit)})}return V.polyfill=!0,i.fetch||(i.fetch=V,i.Headers=d,i.Request=P,i.Response=E),c.Headers=d,c.Request=P,c.Response=E,c.fetch=V,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var s=o;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t})(G,G.exports);var Lt=G.exports;const Oe=Ae(Lt),jt={Accept:"application/json","Content-Type":"application/json"},Rt="POST",xe={headers:jt,method:Rt},Pe=10;Te=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new B.EventEmitter,this.isAvailable=!1,this.registering=!1,!_e(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const n=M(e),o=await(await Oe(this.url,Object.assign(Object.assign({},xe),{body:n}))).json();this.onPayload({data:o})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!_e(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,o)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),o(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=M({id:1,jsonrpc:"2.0",method:"test",params:[]});await Oe(e,Object.assign(Object.assign({},xe),{body:t}))}this.onOpen()}catch(t){const n=this.parseError(t);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?ee(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),o=n.message||n.toString(),s=W(e,o);this.events.emit("payload",s)}parseError(e,t=this.url){return z(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Pe&&this.events.setMaxListeners(Pe)}}});export{Se as E,Te as H,Be as I,Ce as J,Ft as __tla,M as a,De as b,K as c,z as d,B as e,W as f,Ie as g,X as h,Me as i,Ue as j,Q as k,U as l,Y as m,Z as n,N as p,ee as s};
